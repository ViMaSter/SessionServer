!function(e){var t={};function s(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=13)}([function(e,t){e.exports=require("events")},function(e,t){e.exports=require("util")},function(e,t,s){var i=t.noop=function(){};function o(e,t,s){this.logFunction=s,this.identifier=e,this.uniqueID=t,this.buffer=[]}t.extend=function(e,t){for(var s in t)e[s]=t[s]},t.eventEmitterListenerCount=s(0).EventEmitter.listenerCount||function(e,t){return e.listeners(t).length},t.bufferAllocUnsafe=Buffer.allocUnsafe?Buffer.allocUnsafe:function(e){return new Buffer(e)},t.bufferFromString=Buffer.from?Buffer.from:function(e,t){return new Buffer(e,t)},t.BufferingLogger=function(e,t){var n=s(5)(e);if(n.enabled){var r=new o(e,t,n),a=r.log.bind(r);return a.printOutput=r.printOutput.bind(r),a.enabled=n.enabled,a}return n.printOutput=i,n},o.prototype.log=function(){return this.buffer.push([new Date,Array.prototype.slice.call(arguments)]),this},o.prototype.clear=function(){return this.buffer=[],this},o.prototype.printOutput=function(e){e||(e=this.logFunction);var t=this.uniqueID;this.buffer.forEach(function(s){var i=s[0].toLocaleString(),o=s[1].slice(),n=o[0];void 0!==n&&null!==n&&(n="%s - %s - "+n.toString(),o.splice(0,1,n,i,t),e.apply(global,o))})}},function(e,t){e.exports=require("http")},function(e,t,s){var i=s(1),o=s(2),n=s(0).EventEmitter,r=s(10),a=s(25),c=s(27).Validation,h=o.bufferAllocUnsafe,l=o.bufferFromString;const u="open";var d="setImmediate"in global?global.setImmediate.bind(global):process.nextTick.bind(process),f=0;function p(e,t,s,i,c){if(this._debug=o.BufferingLogger("websocket:connection",++f),this._debug("constructor"),this._debug.enabled&&function(e,t){if(!e._debug.enabled)return;var s=t.emit;for(var i in t.emit=function(t){e._debug("||| Socket Event  '%s'",t),s.apply(this,arguments)},t)"function"==typeof t[i]&&-1===["emit"].indexOf(i)&&function(s){var i=t[s];t[s]="on"!==s?function(){return e._debug("||| Socket method called:  %s",s),i.apply(this,arguments)}:function(){return e._debug("||| Socket method called:  %s (%s)",s,arguments[0]),i.apply(this,arguments)}}(i)}(this,e),n.call(this),this._pingListenerCount=0,this.on("newListener",function(e){"ping"===e&&this._pingListenerCount++}).on("removeListener",function(e){"ping"===e&&this._pingListenerCount--}),this.config=c,this.socket=e,this.protocol=s,this.extensions=t,this.remoteAddress=e.remoteAddress,this.closeReasonCode=-1,this.closeDescription=null,this.closeEventEmitted=!1,this.maskOutgoingPackets=i,this.maskBytes=h(4),this.frameHeader=h(10),this.bufferList=new a,this.currentFrame=new r(this.maskBytes,this.frameHeader,this.config),this.fragmentationSize=0,this.frameQueue=[],this.connected=!0,this.state=u,this.waitingForCloseResponse=!1,this.receivedEnd=!1,this.closeTimeout=this.config.closeTimeout,this.assembleFragments=this.config.assembleFragments,this.maxReceivedMessageSize=this.config.maxReceivedMessageSize,this.outputBufferFull=!1,this.inputPaused=!1,this.receivedDataHandler=this.processReceivedData.bind(this),this._closeTimerHandler=this.handleCloseTimer.bind(this),this.socket.setNoDelay(this.config.disableNagleAlgorithm),this.socket.setTimeout(0),this.config.keepalive&&!this.config.useNativeKeepalive){if("number"!=typeof this.config.keepaliveInterval)throw new Error("keepaliveInterval must be specified and numeric if keepalive is true.");if(this._keepaliveTimerHandler=this.handleKeepaliveTimer.bind(this),this.setKeepaliveTimer(),this.config.dropConnectionOnKeepaliveTimeout){if("number"!=typeof this.config.keepaliveGracePeriod)throw new Error("keepaliveGracePeriod  must be specified and numeric if dropConnectionOnKeepaliveTimeout is true.");this._gracePeriodTimerHandler=this.handleGracePeriodTimer.bind(this)}}else if(this.config.keepalive&&this.config.useNativeKeepalive){if(!("setKeepAlive"in this.socket))throw new Error("Unable to use native keepalive: unsupported by this version of Node.");this.socket.setKeepAlive(!0,this.config.keepaliveInterval)}this.socket.removeAllListeners("error")}function g(e){return!(e<1e3)&&(e>=1e3&&e<=2999?-1!==[1e3,1001,1002,1003,1007,1008,1009,1010,1011,1012,1013,1014].indexOf(e):e>=3e3&&e<=3999||(e>=4e3&&e<=4999||!(e>=5e3)&&void 0))}p.CLOSE_REASON_NORMAL=1e3,p.CLOSE_REASON_GOING_AWAY=1001,p.CLOSE_REASON_PROTOCOL_ERROR=1002,p.CLOSE_REASON_UNPROCESSABLE_INPUT=1003,p.CLOSE_REASON_RESERVED=1004,p.CLOSE_REASON_NOT_PROVIDED=1005,p.CLOSE_REASON_ABNORMAL=1006,p.CLOSE_REASON_INVALID_DATA=1007,p.CLOSE_REASON_POLICY_VIOLATION=1008,p.CLOSE_REASON_MESSAGE_TOO_BIG=1009,p.CLOSE_REASON_EXTENSION_REQUIRED=1010,p.CLOSE_REASON_INTERNAL_SERVER_ERROR=1011,p.CLOSE_REASON_TLS_HANDSHAKE_FAILED=1015,p.CLOSE_DESCRIPTIONS={1000:"Normal connection closure",1001:"Remote peer is going away",1002:"Protocol error",1003:"Unprocessable input",1004:"Reserved",1005:"Reason not provided",1006:"Abnormal closure, no further detail available",1007:"Invalid data received",1008:"Policy violation",1009:"Message too big",1010:"Extension requested by client is required",1011:"Internal Server Error",1015:"TLS Handshake Failed"},i.inherits(p,n),p.prototype._addSocketEventListeners=function(){this.socket.on("error",this.handleSocketError.bind(this)),this.socket.on("end",this.handleSocketEnd.bind(this)),this.socket.on("close",this.handleSocketClose.bind(this)),this.socket.on("drain",this.handleSocketDrain.bind(this)),this.socket.on("pause",this.handleSocketPause.bind(this)),this.socket.on("resume",this.handleSocketResume.bind(this)),this.socket.on("data",this.handleSocketData.bind(this))},p.prototype.setKeepaliveTimer=function(){this._debug("setKeepaliveTimer"),this.config.keepalive&&!this.config.useNativeKeepalive&&(this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this._keepaliveTimeoutID=setTimeout(this._keepaliveTimerHandler,this.config.keepaliveInterval))},p.prototype.clearKeepaliveTimer=function(){this._keepaliveTimeoutID&&clearTimeout(this._keepaliveTimeoutID)},p.prototype.handleKeepaliveTimer=function(){this._debug("handleKeepaliveTimer"),this._keepaliveTimeoutID=null,this.ping(),this.config.dropConnectionOnKeepaliveTimeout?this.setGracePeriodTimer():this.setKeepaliveTimer()},p.prototype.setGracePeriodTimer=function(){this._debug("setGracePeriodTimer"),this.clearGracePeriodTimer(),this._gracePeriodTimeoutID=setTimeout(this._gracePeriodTimerHandler,this.config.keepaliveGracePeriod)},p.prototype.clearGracePeriodTimer=function(){this._gracePeriodTimeoutID&&clearTimeout(this._gracePeriodTimeoutID)},p.prototype.handleGracePeriodTimer=function(){this._debug("handleGracePeriodTimer"),this._gracePeriodTimeoutID=null,this.drop(p.CLOSE_REASON_ABNORMAL,"Peer not responding.",!0)},p.prototype.handleSocketData=function(e){this._debug("handleSocketData"),this.setKeepaliveTimer(),this.bufferList.write(e),this.processReceivedData()},p.prototype.processReceivedData=function(){if(this._debug("processReceivedData"),this.connected&&!this.inputPaused){var e=this.currentFrame;if(e.addData(this.bufferList)){var t=this;if(e.protocolError)return this._debug("-- protocol error"),void process.nextTick(function(){t.drop(p.CLOSE_REASON_PROTOCOL_ERROR,e.dropReason)});if(e.frameTooLarge)return this._debug("-- frame too large"),void process.nextTick(function(){t.drop(p.CLOSE_REASON_MESSAGE_TOO_BIG,e.dropReason)});if(e.rsv1||e.rsv2||e.rsv3)return this._debug("-- illegal rsv flag"),void process.nextTick(function(){t.drop(p.CLOSE_REASON_PROTOCOL_ERROR,"Unsupported usage of rsv bits without negotiated extension.")});this.assembleFragments||(this._debug("-- emitting frame"),process.nextTick(function(){t.emit("frame",e)})),process.nextTick(function(){t.processFrame(e)}),this.currentFrame=new r(this.maskBytes,this.frameHeader,this.config),this.bufferList.length>0&&d(this.receivedDataHandler)}else this._debug("-- insufficient data for frame")}},p.prototype.handleSocketError=function(e){this._debug("handleSocketError: %j",e),"closed"!==this.state?(this.closeReasonCode=p.CLOSE_REASON_ABNORMAL,this.closeDescription="Socket Error: "+e.syscall+" "+e.code,this.connected=!1,this.state="closed",this.fragmentationSize=0,o.eventEmitterListenerCount(this,"error")>0&&this.emit("error",e),this.socket.destroy(e),this._debug.printOutput()):this._debug("  --- Socket 'error' after 'close'")},p.prototype.handleSocketEnd=function(){this._debug("handleSocketEnd: received socket end.  state = %s",this.state),this.receivedEnd=!0,"closed"!==this.state?"peer_requested_close"!==this.state&&"ending"!==this.state&&(this._debug("  --- UNEXPECTED socket end."),this.socket.end()):this._debug("  --- Socket 'end' after 'close'")},p.prototype.handleSocketClose=function(e){this._debug("handleSocketClose: received socket close"),this.socketHadError=e,this.connected=!1,this.state="closed",-1===this.closeReasonCode&&(this.closeReasonCode=p.CLOSE_REASON_ABNORMAL,this.closeDescription="Connection dropped by remote peer."),this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("-- Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription))},p.prototype.handleSocketDrain=function(){this._debug("handleSocketDrain: socket drain event"),this.outputBufferFull=!1,this.emit("drain")},p.prototype.handleSocketPause=function(){this._debug("handleSocketPause: socket pause event"),this.inputPaused=!0,this.emit("pause")},p.prototype.handleSocketResume=function(){this._debug("handleSocketResume: socket resume event"),this.inputPaused=!1,this.emit("resume"),this.processReceivedData()},p.prototype.pause=function(){this._debug("pause: pause requested"),this.socket.pause()},p.prototype.resume=function(){this._debug("resume: resume requested"),this.socket.resume()},p.prototype.close=function(e,t){if(this.connected){if(this._debug("close: Initating clean WebSocket close sequence."),"number"!=typeof e&&(e=p.CLOSE_REASON_NORMAL),!g(e))throw new Error("Close code "+e+" is not valid.");"string"!=typeof t&&(t=p.CLOSE_DESCRIPTIONS[e]),this.closeReasonCode=e,this.closeDescription=t,this.setCloseTimer(),this.sendCloseFrame(this.closeReasonCode,this.closeDescription),this.state="ending",this.connected=!1}},p.prototype.drop=function(e,t,s){this._debug("drop"),"number"!=typeof e&&(e=p.CLOSE_REASON_PROTOCOL_ERROR),"string"!=typeof t&&(t=p.CLOSE_DESCRIPTIONS[e]),this._debug("Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s",s,e,t),this.closeReasonCode=e,this.closeDescription=t,this.frameQueue=[],this.fragmentationSize=0,s||this.sendCloseFrame(e,t),this.connected=!1,this.state="closed",this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription)),this._debug("Drop: destroying socket"),this.socket.destroy()},p.prototype.setCloseTimer=function(){this._debug("setCloseTimer"),this.clearCloseTimer(),this._debug("Setting close timer"),this.waitingForCloseResponse=!0,this.closeTimer=setTimeout(this._closeTimerHandler,this.closeTimeout)},p.prototype.clearCloseTimer=function(){this._debug("clearCloseTimer"),this.closeTimer&&(this._debug("Clearing close timer"),clearTimeout(this.closeTimer),this.waitingForCloseResponse=!1,this.closeTimer=null)},p.prototype.handleCloseTimer=function(){this._debug("handleCloseTimer"),this.closeTimer=null,this.waitingForCloseResponse&&(this._debug("Close response not received from client.  Forcing socket end."),this.waitingForCloseResponse=!1,this.state="closed",this.socket.end())},p.prototype.processFrame=function(e){if(this._debug("processFrame"),this._debug(" -- frame: %s",e),0!==this.frameQueue.length&&e.opcode>0&&e.opcode<8)this.drop(p.CLOSE_REASON_PROTOCOL_ERROR,"Illegal frame opcode 0x"+e.opcode.toString(16)+" received in middle of fragmented message.");else switch(e.opcode){case 2:this._debug("-- Binary Frame"),this.assembleFragments&&(e.fin?(this._debug("---- Emitting 'message' event"),this.emit("message",{type:"binary",binaryData:e.binaryPayload})):(this.frameQueue.push(e),this.fragmentationSize=e.length));break;case 1:if(this._debug("-- Text Frame"),this.assembleFragments)if(e.fin){if(!c.isValidUTF8(e.binaryPayload))return void this.drop(p.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this._debug("---- Emitting 'message' event"),this.emit("message",{type:"utf8",utf8Data:e.binaryPayload.toString("utf8")})}else this.frameQueue.push(e),this.fragmentationSize=e.length;break;case 0:if(this._debug("-- Continuation Frame"),this.assembleFragments){if(0===this.frameQueue.length)return void this.drop(p.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected Continuation Frame");if(this.fragmentationSize+=e.length,this.fragmentationSize>this.maxReceivedMessageSize)return void this.drop(p.CLOSE_REASON_MESSAGE_TOO_BIG,"Maximum message size exceeded.");if(this.frameQueue.push(e),e.fin){var t=0,s=h(this.fragmentationSize),i=this.frameQueue[0].opcode;switch(this.frameQueue.forEach(function(e){e.binaryPayload.copy(s,t),t+=e.binaryPayload.length}),this.frameQueue=[],this.fragmentationSize=0,i){case 2:this.emit("message",{type:"binary",binaryData:s});break;case 1:if(!c.isValidUTF8(s))return void this.drop(p.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.emit("message",{type:"utf8",utf8Data:s.toString("utf8")});break;default:return void this.drop(p.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected first opcode in fragmentation sequence: 0x"+i.toString(16))}}}break;case 9:if(this._debug("-- Ping Frame"),this._pingListenerCount>0){var o=!1;this.emit("ping",function(){o=!0},e.binaryPayload),o||this.pong(e.binaryPayload)}else this.pong(e.binaryPayload);break;case 10:this._debug("-- Pong Frame"),this.emit("pong",e.binaryPayload);break;case 8:if(this._debug("-- Close Frame"),this.waitingForCloseResponse)return this._debug("---- Got close response from peer.  Completing closing handshake."),this.clearCloseTimer(),this.waitingForCloseResponse=!1,this.state="closed",void this.socket.end();var n;if(this._debug("---- Closing handshake initiated by peer."),this.state="peer_requested_close",e.invalidCloseFrameLength?(this.closeReasonCode=1005,n=p.CLOSE_REASON_PROTOCOL_ERROR):-1===e.closeStatus||g(e.closeStatus)?(this.closeReasonCode=e.closeStatus,n=p.CLOSE_REASON_NORMAL):(this.closeReasonCode=e.closeStatus,n=p.CLOSE_REASON_PROTOCOL_ERROR),e.binaryPayload.length>1){if(!c.isValidUTF8(e.binaryPayload))return void this.drop(p.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.closeDescription=e.binaryPayload.toString("utf8")}else this.closeDescription=p.CLOSE_DESCRIPTIONS[this.closeReasonCode];this._debug("------ Remote peer %s - code: %d - %s - close frame payload length: %d",this.remoteAddress,this.closeReasonCode,this.closeDescription,e.length),this._debug("------ responding to remote peer's close request."),this.sendCloseFrame(n,null),this.connected=!1;break;default:this._debug("-- Unrecognized Opcode %d",e.opcode),this.drop(p.CLOSE_REASON_PROTOCOL_ERROR,"Unrecognized Opcode: 0x"+e.opcode.toString(16))}},p.prototype.send=function(e,t){if(this._debug("send"),Buffer.isBuffer(e))this.sendBytes(e,t);else{if("function"!=typeof e.toString)throw new Error("Data provided must either be a Node Buffer or implement toString()");this.sendUTF(e,t)}},p.prototype.sendUTF=function(e,t){e=l(e.toString(),"utf8"),this._debug("sendUTF: %d bytes",e.length);var s=new r(this.maskBytes,this.frameHeader,this.config);s.opcode=1,s.binaryPayload=e,this.fragmentAndSend(s,t)},p.prototype.sendBytes=function(e,t){if(this._debug("sendBytes"),!Buffer.isBuffer(e))throw new Error("You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()");var s=new r(this.maskBytes,this.frameHeader,this.config);s.opcode=2,s.binaryPayload=e,this.fragmentAndSend(s,t)},p.prototype.ping=function(e){this._debug("ping");var t=new r(this.maskBytes,this.frameHeader,this.config);t.opcode=9,t.fin=!0,e&&(Buffer.isBuffer(e)||(e=l(e.toString(),"utf8")),e.length>125&&(this._debug("WebSocket: Data for ping is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e),this.sendFrame(t)},p.prototype.pong=function(e){this._debug("pong");var t=new r(this.maskBytes,this.frameHeader,this.config);t.opcode=10,Buffer.isBuffer(e)&&e.length>125&&(this._debug("WebSocket: Data for pong is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e,t.fin=!0,this.sendFrame(t)},p.prototype.fragmentAndSend=function(e,t){if(this._debug("fragmentAndSend"),e.opcode>7)throw new Error("You cannot fragment control frames.");var s=this.config.fragmentationThreshold,i=e.binaryPayload.length;if(!this.config.fragmentOutgoingMessages||e.binaryPayload&&i<=s)return e.fin=!0,void this.sendFrame(e,t);for(var o=Math.ceil(i/s),n=0,a=function(e){e?"function"==typeof t&&(t(e),t=null):++n===o&&"function"==typeof t&&t()},c=1;c<=o;c++){var h=new r(this.maskBytes,this.frameHeader,this.config);h.opcode=1===c?e.opcode:0,h.fin=c===o;var l=c===o?i-s*(c-1):s,u=s*(c-1);h.binaryPayload=e.binaryPayload.slice(u,u+l),this.sendFrame(h,a)}},p.prototype.sendCloseFrame=function(e,t,s){if("number"!=typeof e&&(e=p.CLOSE_REASON_NORMAL),this._debug("sendCloseFrame state: %s, reasonCode: %d, description: %s",this.state,e,t),this.state===u||"peer_requested_close"===this.state){var i=new r(this.maskBytes,this.frameHeader,this.config);i.fin=!0,i.opcode=8,i.closeStatus=e,"string"==typeof t&&(i.binaryPayload=l(t,"utf8")),this.sendFrame(i,s),this.socket.end()}},p.prototype.sendFrame=function(e,t){this._debug("sendFrame"),e.mask=this.maskOutgoingPackets;var s=this.socket.write(e.toBuffer(),t);return this.outputBufferFull=!s,s},e.exports=p},function(e,t,s){"undefined"!=typeof process&&"renderer"===process.type?e.exports=s(17):e.exports=s(19)},function(e,t,s){var i;function o(e){function s(){if(s.enabled){var e=s,o=+new Date,n=o-(i||o);e.diff=n,e.prev=i,e.curr=o,i=o;for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(s,i){if("%%"===s)return s;c++;var o=t.formatters[i];if("function"==typeof o){var n=r[c];s=o.call(e,n),r.splice(c,1),c--}return s}),t.formatArgs.call(e,r),(s.log||t.log||console.log.bind(console)).apply(e,r)}}return s.namespace=e,s.enabled=t.enabled(e),s.useColors=t.useColors(),s.color=function(e){var s,i=0;for(s in e)i=(i<<5)-i+e.charCodeAt(s),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),"function"==typeof t.init&&t.init(s),s}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var s=("string"==typeof e?e:"").split(/[\s,]+/),i=s.length,o=0;o<i;o++)s[o]&&("-"===(e=s[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var s,i;for(s=0,i=t.skips.length;s<i;s++)if(t.skips[s].test(e))return!1;for(s=0,i=t.names.length;s<i;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(18),t.names=[],t.skips=[],t.formatters={}},function(e,t,s){for(var i=s(8),o=s(1),n=s(9),r=s(0).EventEmitter,a=s(4),c=/,\s*/,h=/;\s*/,l=/[\r\n]/g,u=/,\s*/,d=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],f=[String.fromCharCode(127)],p=0;p<31;p++)f.push(String.fromCharCode(p));var g=/([\x00-\x20\x22\x28\x29\x2c\x2f\x3a-\x3f\x40\x5b-\x5e\x7b\x7d\x7f])/,m=/[^\x21\x23-\x2b\x2d-\x3a\x3c-\x5b\x5d-\x7e]/,v=/^"[^"]*"$/,y=/[\x00-\x20\x3b]/g,b=/[;,] */,S={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",406:"Not Acceptable",407:"Proxy Authorization Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Long",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function _(e,t,s){r.call(this),this.socket=e,this.httpRequest=t,this.resource=t.url,this.remoteAddress=e.remoteAddress,this.remoteAddresses=[this.remoteAddress],this.serverConfig=s,this._socketIsClosing=!1,this._socketCloseHandler=this._handleSocketCloseBeforeAccept.bind(this),this.socket.on("end",this._socketCloseHandler),this.socket.on("close",this._socketCloseHandler),this._resolved=!1}function E(e){process.nextTick(function(){e.drop(1006,"TCP connection lost before handshake completed.",!0)})}o.inherits(_,r),_.prototype.readHandshake=function(){var e=this,t=this.httpRequest;if(this.resourceURL=n.parse(this.resource,!0),this.host=t.headers.host,!this.host)throw new Error("Client must provide a Host header.");if(this.key=t.headers["sec-websocket-key"],!this.key)throw new Error("Client must provide a value for Sec-WebSocket-Key.");if(this.webSocketVersion=parseInt(t.headers["sec-websocket-version"],10),!this.webSocketVersion||isNaN(this.webSocketVersion))throw new Error("Client must provide a value for Sec-WebSocket-Version.");switch(this.webSocketVersion){case 8:case 13:break;default:var s=new Error("Unsupported websocket client version: "+this.webSocketVersion+"Only versions 8 and 13 are supported.");throw s.httpCode=426,s.headers={"Sec-WebSocket-Version":"13"},s}13===this.webSocketVersion?this.origin=t.headers.origin:8===this.webSocketVersion&&(this.origin=t.headers["sec-websocket-origin"]);var i=t.headers["sec-websocket-protocol"];(this.protocolFullCaseMap={},this.requestedProtocols=[],i)&&i.split(c).forEach(function(t){var s=t.toLocaleLowerCase();e.requestedProtocols.push(s),e.protocolFullCaseMap[s]=t});if(!this.serverConfig.ignoreXForwardedFor&&t.headers["x-forwarded-for"]){var o=this.remoteAddress;this.remoteAddresses=t.headers["x-forwarded-for"].split(u),this.remoteAddresses.push(o),this.remoteAddress=this.remoteAddresses[0]}var r=t.headers["sec-websocket-extensions"];this.requestedExtensions=this.parseExtensions(r);var a=t.headers.cookie;this.cookies=this.parseCookies(a)},_.prototype.parseExtensions=function(e){if(!e||0===e.length)return[];var t=e.toLocaleLowerCase().split(c);return t.forEach(function(e,t,s){var i=e.split(h),o=i[0],n=i.slice(1);n.forEach(function(e,t,s){var i=e.split("="),o={name:i[0],value:i[1]};s.splice(t,1,o)});var r={name:o,params:n};s.splice(t,1,r)}),t},_.prototype.parseCookies=function(e){if(!e||"string"!=typeof e)return[];var t=[];return e.split(b).forEach(function(e){var s=e.indexOf("=");if(-1!==s){var i=e.substr(0,s).trim(),o=e.substr(++s,e.length).trim();'"'===o[0]&&(o=o.slice(1,-1)),t.push({name:i,value:decodeURIComponent(o)})}else t.push({name:e,value:null})}),t},_.prototype.accept=function(e,t,s){var o;this._verifyResolution(),e?void 0===(o=this.protocolFullCaseMap[e.toLocaleLowerCase()])&&(o=e):o=e,this.protocolFullCaseMap=null;var n=i.createHash("sha1");n.update(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var r="HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+n.digest("base64")+"\r\n";if(o){for(var c=0;c<o.length;c++){var h=o.charCodeAt(c),u=o.charAt(c);if(h<33||h>126||-1!==d.indexOf(u))throw this.reject(500),new Error('Illegal character "'+String.fromCharCode(u)+'" in subprotocol.')}if(-1===this.requestedProtocols.indexOf(e))throw this.reject(500),new Error("Specified protocol was not requested by the client.");o=o.replace(l,""),r+="Sec-WebSocket-Protocol: "+o+"\r\n"}if(this.requestedProtocols=null,t&&(t=t.replace(l,""),13===this.webSocketVersion?r+="Origin: "+t+"\r\n":8===this.webSocketVersion&&(r+="Sec-WebSocket-Origin: "+t+"\r\n")),s){if(!Array.isArray(s))throw this.reject(500),new Error('Value supplied for "cookies" argument must be an array.');var f={};s.forEach(function(e){if(!e.name||!e.value)throw this.reject(500),new Error('Each cookie to set must at least provide a "name" and "value"');if(e.name=e.name.replace(y,""),e.value=e.value.replace(y,""),f[e.name])throw this.reject(500),new Error("You may not specify the same cookie name twice.");f[e.name]=!0;var t=e.name.match(g);if(t)throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie name");if(t=e.value.match(v)?e.value.slice(1,-1).match(m):e.value.match(m))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie value");var s=[e.name+"="+e.value];if(e.path){if(t=e.path.match(y))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie path");s.push("Path="+e.path)}if(e.domain){if("string"!=typeof e.domain)throw this.reject(500),new Error("Domain must be specified and must be a string.");if(t=e.domain.match(y))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie domain");s.push("Domain="+e.domain.toLowerCase())}if(e.expires){if(!(e.expires instanceof Date))throw this.reject(500),new Error('Value supplied for cookie "expires" must be a vaild date object');s.push("Expires="+e.expires.toGMTString())}if(e.maxage){var i=e.maxage;if("string"==typeof i&&(i=parseInt(i,10)),isNaN(i)||i<=0)throw this.reject(500),new Error('Value supplied for cookie "maxage" must be a non-zero number');i=Math.round(i),s.push("Max-Age="+i.toString(10))}if(e.secure){if("boolean"!=typeof e.secure)throw this.reject(500),new Error('Value supplied for cookie "secure" must be of type boolean');s.push("Secure")}if(e.httponly){if("boolean"!=typeof e.httponly)throw this.reject(500),new Error('Value supplied for cookie "httponly" must be of type boolean');s.push("HttpOnly")}r+="Set-Cookie: "+s.join(";")+"\r\n"}.bind(this))}this._resolved=!0,this.emit("requestResolved",this),r+="\r\n";var p=new a(this.socket,[],e,!1,this.serverConfig);p.webSocketVersion=this.webSocketVersion,p.remoteAddress=this.remoteAddress,p.remoteAddresses=this.remoteAddresses;var b=this;return this._socketIsClosing?E(p):this.socket.write(r,"ascii",function(e){e?E(p):(b._removeSocketCloseListeners(),p._addSocketEventListeners())}),this.emit("requestAccepted",p),p},_.prototype.reject=function(e,t,s){this._verifyResolution(),this._resolved=!0,this.emit("requestResolved",this),"number"!=typeof e&&(e=403);var i="HTTP/1.1 "+e+" "+S[e]+"\r\nConnection: close\r\n";if(t&&(i+="X-WebSocket-Reject-Reason: "+(t=t.replace(l,""))+"\r\n"),s)for(var o in s){var n=s[o].toString().replace(l,"");i+=o.replace(l,"")+": "+n+"\r\n"}i+="\r\n",this.socket.end(i,"ascii"),this.emit("requestRejected",this)},_.prototype._handleSocketCloseBeforeAccept=function(){this._socketIsClosing=!0,this._removeSocketCloseListeners()},_.prototype._removeSocketCloseListeners=function(){this.socket.removeListener("end",this._socketCloseHandler),this.socket.removeListener("close",this._socketCloseHandler)},_.prototype._verifyResolution=function(){if(this._resolved)throw new Error("WebSocketRequest may only be accepted or rejected one time.")},e.exports=_},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("url")},function(e,t,s){var i=s(23).BufferUtil,o=s(2).bufferAllocUnsafe;const n=1;function r(e,t,s){this.maskBytes=e,this.frameHeader=t,this.config=s,this.maxReceivedFrameSize=s.maxReceivedFrameSize,this.protocolError=!1,this.frameTooLarge=!1,this.invalidCloseFrameLength=!1,this.parseState=n,this.closeStatus=-1}r.prototype.addData=function(e){if(this.parseState===n&&e.length>=2){e.joinInto(this.frameHeader,0,0,2),e.advance(2);var t=this.frameHeader[0],s=this.frameHeader[1];if(this.fin=Boolean(128&t),this.rsv1=Boolean(64&t),this.rsv2=Boolean(32&t),this.rsv3=Boolean(16&t),this.mask=Boolean(128&s),this.opcode=15&t,this.length=127&s,this.opcode>=8){if(this.length>125)return this.protocolError=!0,this.dropReason="Illegal control frame longer than 125 bytes.",!0;if(!this.fin)return this.protocolError=!0,this.dropReason="Control frames must not be fragmented.",!0}126===this.length?this.parseState=2:127===this.length?this.parseState=3:this.parseState=4}if(2===this.parseState)e.length>=2&&(e.joinInto(this.frameHeader,2,0,2),e.advance(2),this.length=this.frameHeader.readUInt16BE(2),this.parseState=4);else if(3===this.parseState&&e.length>=8){e.joinInto(this.frameHeader,2,0,8),e.advance(8);var r=[this.frameHeader.readUInt32BE(2),this.frameHeader.readUInt32BE(6)];if(0!==r[0])return this.protocolError=!0,this.dropReason="Unsupported 64-bit length frame received",!0;this.length=r[1],this.parseState=4}if(4===this.parseState&&(this.mask?e.length>=4&&(e.joinInto(this.maskBytes,0,0,4),e.advance(4),this.parseState=5):this.parseState=5),5===this.parseState){if(this.length>this.maxReceivedFrameSize)return this.frameTooLarge=!0,this.dropReason="Frame size of "+this.length.toString(10)+" bytes exceeds maximum accepted frame size",!0;if(0===this.length)return this.binaryPayload=o(0),this.parseState=6,!0;if(e.length>=this.length)return this.binaryPayload=e.take(this.length),e.advance(this.length),this.mask&&i.unmask(this.binaryPayload,this.maskBytes),8===this.opcode&&(1===this.length&&(this.binaryPayload=o(0),this.invalidCloseFrameLength=!0),this.length>=2&&(this.closeStatus=this.binaryPayload.readUInt16BE(0),this.binaryPayload=this.binaryPayload.slice(2))),this.parseState=6,!0}return!1},r.prototype.throwAwayPayload=function(e){return e.length>=this.length&&(e.advance(this.length),this.parseState=6,!0)},r.prototype.toBuffer=function(e){var t,s,n,r=2,a=0,c=0;this.fin&&(a|=128),this.rsv1&&(a|=64),this.rsv2&&(a|=32),this.rsv3&&(a|=16),this.mask&&(c|=128),a|=15&this.opcode,8===this.opcode?(this.length=2,this.binaryPayload&&(this.length+=this.binaryPayload.length),(s=o(this.length)).writeUInt16BE(this.closeStatus,0),this.length>2&&this.binaryPayload.copy(s,2)):this.binaryPayload?(s=this.binaryPayload,this.length=s.length):this.length=0,this.length<=125?c|=127&this.length:this.length>125&&this.length<=65535?(c|=126,r+=2):this.length>65535&&(c|=127,r+=8);var h=o(this.length+r+(this.mask?4:0));return h[0]=a,h[1]=c,n=2,this.length>125&&this.length<=65535?(h.writeUInt16BE(this.length,n),n+=2):this.length>65535&&(h.writeUInt32BE(0,n),h.writeUInt32BE(this.length,n+4),n+=8),this.mask?(t=e?0:4294967295*Math.random()>>>0,this.maskBytes.writeUInt32BE(t,0),this.maskBytes.copy(h,n),n+=4,s&&i.mask(s,this.maskBytes,h,n,this.length)):s&&s.copy(h,n),h},r.prototype.toString=function(){return"Opcode: "+this.opcode+", fin: "+this.fin+", length: "+this.length+", hasPayload: "+Boolean(this.binaryPayload)+", masked: "+this.mask},e.exports=r},function(e,t,s){var i=s(2),o=i.extend,n=s(1),r=s(0).EventEmitter,a=s(3),c=s(12),h=s(9),l=s(8),u=s(4),d=i.bufferAllocUnsafe,f=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],p=["hostname","port","method","path","headers"];function g(e){var t;(r.call(this),this.config={maxReceivedFrameSize:1048576,maxReceivedMessageSize:8388608,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,webSocketVersion:13,assembleFragments:!0,disableNagleAlgorithm:!0,closeTimeout:5e3,tlsOptions:{}},e)&&(e.tlsOptions?(t=e.tlsOptions,delete e.tlsOptions):t={},o(this.config,e),o(this.config.tlsOptions,t));switch(this._req=null,this.config.webSocketVersion){case 8:case 13:break;default:throw new Error("Requested webSocketVersion is not supported. Allowed values are 8 and 13.")}}n.inherits(g,r),g.prototype.connect=function(e,t,s,n,r){var l=this;if("string"==typeof t&&(t=t.length>0?[t]:[]),t instanceof Array||(t=[]),this.protocols=t,this.origin=s,this.url="string"==typeof e?h.parse(e):e,!this.url.protocol)throw new Error("You must specify a full WebSocket URL, including protocol.");if(!this.url.host)throw new Error("You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.");this.secure="wss:"===this.url.protocol,this.protocols.forEach(function(e){for(var t=0;t<e.length;t++){var s=e.charCodeAt(t),i=e.charAt(t);if(s<33||s>126||-1!==f.indexOf(i))throw new Error('Protocol list contains invalid character "'+String.fromCharCode(s)+'"')}});this.url.port||(this.url.port={"ws:":"80","wss:":"443"}[this.url.protocol]);for(var u=d(16),g=0;g<16;g++)u[g]=Math.round(255*Math.random());this.base64nonce=u.toString("base64");var m=this.url.hostname;("ws:"===this.url.protocol&&"80"!==this.url.port||"wss:"===this.url.protocol&&"443"!==this.url.port)&&(m+=":"+this.url.port);var v,y={};function b(e){l._req=null,l.emit("connectFailed",e)}this.secure&&this.config.tlsOptions.hasOwnProperty("headers")&&o(y,this.config.tlsOptions.headers),n&&o(y,n),o(y,{Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Version":this.config.webSocketVersion.toString(10),"Sec-WebSocket-Key":this.base64nonce,Host:y.Host||m}),this.protocols.length>0&&(y["Sec-WebSocket-Protocol"]=this.protocols.join(", ")),this.origin&&(13===this.config.webSocketVersion?y.Origin=this.origin:8===this.config.webSocketVersion&&(y["Sec-WebSocket-Origin"]=this.origin)),v=this.url.pathname?this.url.path:this.url.path?"/"+this.url.path:"/";var S={agent:!1};if(r&&o(S,r),o(S,{hostname:this.url.hostname,port:this.url.port,method:"GET",path:v,headers:y}),this.secure){var _=this.config.tlsOptions;for(var E in _)_.hasOwnProperty(E)&&-1===p.indexOf(E)&&(S[E]=_[E])}var k=this._req=(this.secure?c:a).request(S);k.on("upgrade",function(e,t,s){l._req=null,k.removeListener("error",b),l.socket=t,l.response=e,l.firstDataChunk=s,l.validateHandshake()}),k.on("error",b),k.on("response",function(e){if(l._req=null,i.eventEmitterListenerCount(l,"httpResponse")>0)l.emit("httpResponse",e,l),e.socket&&e.socket.end();else{var t=[];for(var s in e.headers)t.push(s+": "+e.headers[s]);l.failHandshake("Server responded with a non-101 status: "+e.statusCode+" "+e.statusMessage+"\nResponse Headers Follow:\n"+t.join("\n")+"\n")}}),k.end()},g.prototype.validateHandshake=function(){var e=this.response.headers;if(this.protocols.length>0){if(this.protocol=e["sec-websocket-protocol"],!this.protocol)return void this.failHandshake("Expected a Sec-WebSocket-Protocol header.");if(-1===this.protocols.indexOf(this.protocol))return void this.failHandshake("Server did not respond with a requested protocol.")}if(e.connection&&"upgrade"===e.connection.toLocaleLowerCase())if(e.upgrade&&"websocket"===e.upgrade.toLocaleLowerCase()){var t=l.createHash("sha1");t.update(this.base64nonce+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var s=t.digest("base64");e["sec-websocket-accept"]?e["sec-websocket-accept"]===s?this.succeedHandshake():this.failHandshake("Sec-WebSocket-Accept header from server didn't match expected value of "+s):this.failHandshake("Expected Sec-WebSocket-Accept header from server")}else this.failHandshake("Expected an Upgrade: websocket header from the server");else this.failHandshake("Expected a Connection: Upgrade header from the server")},g.prototype.failHandshake=function(e){this.socket&&this.socket.writable&&this.socket.end(),this.emit("connectFailed",new Error(e))},g.prototype.succeedHandshake=function(){var e=new u(this.socket,[],this.protocol,!0,this.config);e.webSocketVersion=this.config.webSocketVersion,e._addSocketEventListeners(),this.emit("connect",e),this.firstDataChunk.length>0&&e.handleSocketData(this.firstDataChunk),this.firstDataChunk=null},g.prototype.abort=function(){this._req&&this._req.abort()},e.exports=g},function(e,t){e.exports=require("https")},function(e,t,s){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),Array.prototype.remove&&(Array.prototype.remove=function(e){return this.filter(t=>t!==e)});class n{constructor(e,t,s){this.connectedPlayerIDs=[],this.id=t,this.currentSessionData=new e(s)}get CurrentPlayerCount(){return this.connectedPlayerIDs.length}HasPlayerInSession(e){return this.connectedPlayerIDs.indexOf(e)>-1}AddPlayerByID(e){return this.HasPlayerInSession(e)?(console.error(`[SessionServer] Player ${e} is already part of session ${this.id} (current players: ${this.connectedPlayerIDs.join(", ")})`),!1):(this.connectedPlayerIDs.push(e),!0)}RemovePlayerByID(e){return this.HasPlayerInSession(e)?(this.connectedPlayerIDs.splice(this.connectedPlayerIDs.indexOf(e),1),!0):(console.error(`[SessionServer] Player ${e} is not part of session ${this.id} (current players: ${this.connectedPlayerIDs.join(", ")})`),!1)}Update(e,t){return this.HasPlayerInSession(e)?(this.currentSessionData.Update(t),!0):(console.error(`[SessionServer] Player ${e} is not part of session ${this.id} and therefore can't update the session (current players: ${this.connectedPlayerIDs.join(", ")})`),!1)}GetData(){return this.currentSessionData}ForEachPlayer(e){this.connectedPlayerIDs.forEach(e)}}const r=i(s(3)),a=i(s(14)),c=o(s(40));class h{constructor(e,t){this.commands={},this.nextSessionID=0,this.sessions={},this.nextPlayerID=0,this.player={},this.port=-1,this.port=t,this.sessionType=e,this.httpServer=c.default(r.createServer(()=>{})),this.wsServer=new a.server({httpServer:this.httpServer})}validateSessionID(e,t,s){return"number"!=typeof t?(console.error(`[SessionServer] ${s} requires a 'sessionID'-parameter as number! (supplied: ${t} [${typeof t}])`),this.sendMessageToPlayer(e,JSON.stringify({command:s,sessionID:-1})),!1):!!this.sessions[t]||(console.error(`[SessionServer] Attemping to run ${s} on session '${t}' will fail, as the session doesn't exist`),this.sendMessageToPlayer(e,JSON.stringify({command:s,sessionID:-2})),!1)}setupCommands(){this.commands.createSession=((e,t)=>{const s=this.generateSessionID();if(this.sessions[s]=new n(this.sessionType,s,t.parameters),!this.sessions[s].AddPlayerByID(e))return console.error(`[SessionServer] Unable to add player ${e} to newly created session ${s}`),void this.sendMessageToPlayer(e,JSON.stringify({command:"sessionJoin",sessionID:-1,session:{}}));console.log(`[SessionServer] Created new session with ID ${s}`),this.sendMessageToPlayer(e,JSON.stringify({command:"sessionJoin",sessionID:s,session:this.sessions[s].GetData()}))}),this.commands.updateSession=((e,t)=>{console.log(`[SessionServer] Player ${e} attempting to update session ${t.sessionID}`),this.validateSessionID(e,t.sessionID,"sessionUpdate")&&(this.sessions[t.sessionID].Update(e,t.parameters)||this.sendMessageToPlayer(e,JSON.stringify({command:"sessionUpdate",sessionID:-3})),this.sessions[t.sessionID].ForEachPlayer((e=>{this.sendMessageToPlayer(e,JSON.stringify({command:"sessionUpdate",sessionID:t.sessionID,session:this.sessions[t.sessionID].GetData()}))}).bind(this)))}),this.commands.joinSession=((e,t)=>{(-1==t.sessionID||this.validateSessionID(e,t.sessionID,"sessionJoin"))&&(-1==t.sessionID&&(t.sessionID=this.nextSessionID-1),this.validateSessionID(e,t.sessionID,"sessionJoin")&&(this.sessions[t.sessionID].AddPlayerByID(e)?this.sendMessageToPlayer(e,JSON.stringify({command:"sessionJoin",sessionID:t.sessionID,session:this.sessions[t.sessionID].GetData()})):this.sendMessageToPlayer(e,JSON.stringify({command:"sessionJoin",sessionID:-3}))))}),this.commands.leaveSession=((e,t)=>{this.validateSessionID(e,t.sessionID,"sessionLeave")&&(this.sessions[t.sessionID].RemovePlayerByID(e)?(console.log(`[SessionServer] Players left in session ${t.sessionID}: ${this.sessions[t.sessionID].CurrentPlayerCount}`),this.sessions[t.sessionID].CurrentPlayerCount||(console.log(`[SessionServer] Session ${t.sessionID} has no players left; discarding it`),delete this.sessions[t.sessionID]),this.sendMessageToPlayer(e,JSON.stringify({command:"sessionLeave",sessionID:t.sessionID}))):this.sendMessageToPlayer(e,JSON.stringify({command:"sessionLeave",sessionID:-3})))})}generatePlayerMessageHandler(e){return t=>{if("utf8"===t.type)try{const s=JSON.parse(t.utf8Data);this.handleMessage(e,s)}catch(e){console.group("Invalid JSON string received!"),console.error(t),console.error(e),console.groupEnd()}}}generatePlayerCloseHandler(e){return(t,s)=>{this.removePlayer(e)}}removePlayer(e){console.log(`[SessionServer] Connection from player ${e} closed...`);for(const t in this.sessions)this.commands.leaveSession.apply(this,[e,{sessionID:parseInt(t)}]);delete this.player[e]}handleNewPlayer(e){const t=e.accept(void 0,e.origin),s=this.generatePlayerID();this.player[s]=t,this.player[s].on("message",this.generatePlayerMessageHandler(s)),this.player[s].on("close",this.generatePlayerCloseHandler(s))}static Create(e,t){return new Promise((s,i)=>{const o=new h(e,t);o.setupCommands(),o.wsServer.on("request",o.handleNewPlayer.bind(o)),o.httpServer.on("listening",()=>{console.log(`[SessionServer] Listening on port ${o.port}...`),s(o)}),o.wsServer.on("error",()=>{console.group("[SessionServer] Error initializing server!"),i()}),o.httpServer.listen(o.port)})}Shutdown(){return new Promise((e,t)=>{this.httpServer.shutdown(()=>{e()})})}Running(){return this.httpServer.shutdown()}generatePlayerID(){return this.nextPlayerID++}generateSessionID(){return this.nextSessionID++}handleMessage(e,t){t.command&&("function"==typeof this.commands[t.command]?this.commands[t.command].apply(this,[e,t]):console.error(`[SessionServer] no command called "${t.command}" available`))}sendMessageToPlayer(e,t){return this.player[e]?(this.player[e].send(t),!0):(console.error(`[SessionServer] No player with ID ${e} is connected!`),!1)}}t.SessionServer=h},function(e,t,s){e.exports=s(15)},function(e,t,s){e.exports={server:s(16),client:s(11),router:s(29),frame:s(10),request:s(7),connection:s(4),w3cwebsocket:s(31),deprecation:s(37),version:s(38)}},function(e,t,s){var i=s(2).extend,o=s(2),n=s(1),r=s(5)("websocket:server"),a=s(0).EventEmitter,c=s(7),h=function(e){a.call(this),this._handlers={upgrade:this.handleUpgrade.bind(this),requestAccepted:this.handleRequestAccepted.bind(this),requestResolved:this.handleRequestResolved.bind(this)},this.connections=[],this.pendingRequests=[],e&&this.mount(e)};n.inherits(h,a),h.prototype.mount=function(e){if(this.config={httpServer:null,maxReceivedFrameSize:65536,maxReceivedMessageSize:1048576,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,keepalive:!0,keepaliveInterval:2e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4,useNativeKeepalive:!1,assembleFragments:!0,autoAcceptConnections:!1,ignoreXForwardedFor:!1,disableNagleAlgorithm:!0,closeTimeout:5e3},i(this.config,e),!this.config.httpServer)throw new Error("You must specify an httpServer on which to mount the WebSocket server.");Array.isArray(this.config.httpServer)||(this.config.httpServer=[this.config.httpServer]);var t=this._handlers.upgrade;this.config.httpServer.forEach(function(e){e.on("upgrade",t)})},h.prototype.unmount=function(){var e=this._handlers.upgrade;this.config.httpServer.forEach(function(t){t.removeListener("upgrade",e)})},h.prototype.closeAllConnections=function(){this.connections.forEach(function(e){e.close()}),this.pendingRequests.forEach(function(e){process.nextTick(function(){e.reject(503)})})},h.prototype.broadcast=function(e){Buffer.isBuffer(e)?this.broadcastBytes(e):"function"==typeof e.toString&&this.broadcastUTF(e)},h.prototype.broadcastUTF=function(e){this.connections.forEach(function(t){t.sendUTF(e)})},h.prototype.broadcastBytes=function(e){this.connections.forEach(function(t){t.sendBytes(e)})},h.prototype.shutDown=function(){this.unmount(),this.closeAllConnections()},h.prototype.handleUpgrade=function(e,t){var s=new c(t,e,this.config);try{s.readHandshake()}catch(e){return s.reject(e.httpCode?e.httpCode:400,e.message,e.headers),void r("Invalid handshake: %s",e.message)}this.pendingRequests.push(s),s.once("requestAccepted",this._handlers.requestAccepted),s.once("requestResolved",this._handlers.requestResolved),!this.config.autoAcceptConnections&&o.eventEmitterListenerCount(this,"request")>0?this.emit("request",s):this.config.autoAcceptConnections?s.accept(s.requestedProtocols[0],s.origin):s.reject(404,"No handler is configured to accept the connection.")},h.prototype.handleRequestAccepted=function(e){var t=this;e.once("close",function(s,i){t.handleConnectionClose(e,s,i)}),this.connections.push(e),this.emit("connect",e)},h.prototype.handleConnectionClose=function(e,t,s){var i=this.connections.indexOf(e);-1!==i&&this.connections.splice(i,1),this.emit("close",e,t,s)},h.prototype.handleRequestResolved=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&this.pendingRequests.splice(t,1)},e.exports=h},function(e,t,s){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=s(6)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var s=this.useColors;if(e[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+e[0]+(s?"%c ":" ")+"+"+t.humanize(this.diff),!s)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(n=++o)}),e.splice(n,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())},function(e,t){var s=1e3,i=60*s,o=60*i,n=24*o,r=365.25*n;function a(e,t,s){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+s:Math.ceil(e/t)+" "+s+"s"}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*r;case"days":case"day":case"d":return a*n;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function(e){return a(e,n,"day")||a(e,o,"hour")||a(e,i,"minute")||a(e,s,"second")||e+" ms"}(e):function(e){if(e>=n)return Math.round(e/n)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=s)return Math.round(e/s)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,s){var i=s(20),o=s(1);(t=e.exports=s(6)).init=function(e){e.inspectOpts={};for(var s=Object.keys(t.inspectOpts),i=0;i<s.length;i++)e.inspectOpts[s[i]]=t.inspectOpts[s[i]]},t.log=function(){return r.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(e){var s=this.namespace;if(this.useColors){var i=this.color,o="  [3"+i+";1m"+s+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push("[3"+i+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+s+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):i.isatty(n)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var s=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[s]=i,e},{});var n=parseInt(process.env.DEBUG_FD,10)||2;1!==n&&2!==n&&o.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var r=1===n?process.stdout:2===n?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new i.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var o=s(21);(t=new o.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var n=s(22);(t=new n.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(n);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t){e.exports=require("tty")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("net")},function(e,t,s){
/*!
 * Copied from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
try{e.exports=s(!function(){var e=new Error("Cannot find module '../build/Release/bufferutil'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=s(!function(){var e=new Error("Cannot find module '../build/default/bufferutil'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=s(24)}catch(e){throw console.error("bufferutil.node seems to not have been built. Run npm install."),e}}}},function(e,t){
/*!
 * Copied from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.exports.BufferUtil={merge:function(e,t){for(var s=0,i=0,o=t.length;i<o;++i){var n=t[i];n.copy(e,s),s+=n.length}},mask:function(e,t,s,i,o){for(var n=t.readUInt32LE(0),r=0;r<o-3;r+=4){var a=n^e.readUInt32LE(r);a<0&&(a=4294967296+a),s.writeUInt32LE(a,i+r)}switch(o%4){case 3:s[i+r+2]=e[r+2]^t[2];case 2:s[i+r+1]=e[r+1]^t[1];case 1:s[i+r]=e[r]^t[0]}},unmask:function(e,t){for(var s=t.readUInt32LE(0),i=e.length,o=0;o<i-3;o+=4){var n=s^e.readUInt32LE(o);n<0&&(n=4294967296+n),e.writeUInt32LE(n,o)}switch(i%4){case 3:e[o+2]=e[o+2]^t[2];case 2:e[o+1]=e[o+1]^t[1];case 1:e[o]=e[o]^t[0]}}}},function(e,t,s){var i=s(26).Buffer,o=s(0).EventEmitter,n=s(2).bufferAllocUnsafe;function r(e){if(!(this instanceof r))return new r(e);o.call(this);var t=this;void 0===e&&(e={}),t.encoding=e.encoding;var s={next:null,buffer:null},a={next:null,buffer:null},c=0;t.__defineGetter__("length",function(){return c});var h=0;t.write=function(e){return s.buffer?(a.next={next:null,buffer:e},a=a.next):(s.buffer=e,a=s),c+=e.length,t.emit("write",e),!0},t.end=function(e){i.isBuffer(e)&&t.write(e)},t.push=function(){return[].concat.apply([],arguments).forEach(t.write),t},t.forEach=function(e){if(!s.buffer)return n(0);if(s.buffer.length-h<=0)return t;for(var i={buffer:s.buffer.slice(h),next:s.next};i&&i.buffer;){if(e(i.buffer))break;i=i.next}return t},t.join=function(e,i){if(!s.buffer)return n(0);void 0==e&&(e=0),void 0==i&&(i=t.length);var o=n(i-e),r=0;return t.forEach(function(t){if(e<r+t.length&&r<i&&t.copy(o,Math.max(0,r-e),Math.max(0,e-r),Math.min(t.length,i-r)),(r+=t.length)>i)return!0}),o},t.joinInto=function(e,i,o,r){if(!s.buffer)return new n(0);void 0==o&&(o=0),void 0==r&&(r=t.length);var a=e;if(a.length-i<r-o)throw new Error("Insufficient space available in target Buffer.");var c=0;return t.forEach(function(e){if(o<c+e.length&&c<r&&e.copy(a,Math.max(i,i+c-o),Math.max(0,o-c),Math.min(e.length,r-c)),(c+=e.length)>r)return!0}),a},t.advance=function(e){for(h+=e,c-=e;s.buffer&&h>=s.buffer.length;)h-=s.buffer.length,s=s.next?s.next:{buffer:null,next:null};return null===s.buffer&&(a={next:null,buffer:null}),t.emit("advance",e),t},t.take=function(e,s){void 0==e?e=t.length:"number"!=typeof e&&(s=e,e=t.length);if(s||(s=t.encoding),s){var i="";return t.forEach(function(t){if(e<=0)return!0;i+=t.toString(s,0,Math.min(e,t.length)),e-=t.length}),i}return t.join(0,e)},t.toString=function(){return t.take("binary")}}e.exports=r,e.exports.BufferList=r,s(1).inherits(r,o)},function(e,t){e.exports=require("buffer")},function(e,t,s){
/*!
 * UTF-8 Validation Code originally from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
try{e.exports=s(!function(){var e=new Error("Cannot find module '../build/Release/validation'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=s(!function(){var e=new Error("Cannot find module '../build/default/validation'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=s(28)}catch(e){throw console.error("validation.node seems not to have been built. Run npm install."),e}}}},function(e,t){
/*!
 * UTF-8 Validation Fallback Code originally from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.exports.Validation={isValidUTF8:function(){return!0}}},function(e,t,s){var i=s(2).extend,o=s(1),n=s(0).EventEmitter,r=s(30);function a(e){n.call(this),this.config={server:null},e&&i(this.config,e),this.handlers=[],this._requestHandler=this.handleRequest.bind(this),this.config.server&&this.attachServer(this.config.server)}o.inherits(a,n),a.prototype.attachServer=function(e){if(!e)throw new Error("You must specify a WebSocketServer instance to attach to.");this.server=e,this.server.on("request",this._requestHandler)},a.prototype.detachServer=function(){if(!this.server)throw new Error("Cannot detach from server: not attached.");this.server.removeListener("request",this._requestHandler),this.server=null},a.prototype.mount=function(e,t,s){if(!e)throw new Error("You must specify a path for this handler.");if(t||(t="____no_protocol____"),!s)throw new Error("You must specify a callback for this handler.");if(!((e=this.pathToRegExp(e))instanceof RegExp))throw new Error("Path must be specified as either a string or a RegExp.");var i=e.toString();if(t=t.toLocaleLowerCase(),-1!==this.findHandlerIndex(i,t))throw new Error("You may only mount one handler per path/protocol combination.");this.handlers.push({path:e,pathString:i,protocol:t,callback:s})},a.prototype.unmount=function(e,t){var s=this.findHandlerIndex(this.pathToRegExp(e).toString(),t);if(-1===s)throw new Error("Unable to find a route matching the specified path and protocol.");this.handlers.splice(s,1)},a.prototype.findHandlerIndex=function(e,t){t=t.toLocaleLowerCase();for(var s=0,i=this.handlers.length;s<i;s++){var o=this.handlers[s];if(o.pathString===e&&o.protocol===t)return s}return-1},a.prototype.pathToRegExp=function(e){return"string"==typeof e&&("*"===e?e=/^.*$/:(e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=new RegExp("^"+e+"$"))),e},a.prototype.handleRequest=function(e){var t=e.requestedProtocols;0===t.length&&(t=["____no_protocol____"]);for(var s=0;s<t.length;s++)for(var i=t[s].toLocaleLowerCase(),o=0,n=this.handlers.length;o<n;o++){var a=this.handlers[o];if(a.path.test(e.resourceURL.pathname)&&(i===a.protocol||"*"===a.protocol)){var c=new r(e,i);return void a.callback(c)}}e.reject(404,"No handler is available for the given request.")},e.exports=a},function(e,t,s){var i=s(1),o=s(0).EventEmitter;function n(e,t){o.call(this),this.webSocketRequest=e,this.protocol="____no_protocol____"===t?null:t,this.origin=e.origin,this.resource=e.resource,this.resourceURL=e.resourceURL,this.httpRequest=e.httpRequest,this.remoteAddress=e.remoteAddress,this.webSocketVersion=e.webSocketVersion,this.requestedExtensions=e.requestedExtensions,this.cookies=e.cookies}i.inherits(n,o),n.prototype.accept=function(e,t){var s=this.webSocketRequest.accept(this.protocol,e,t);return this.emit("requestAccepted",s),s},n.prototype.reject=function(e,t,s){this.webSocketRequest.reject(e,t,s),this.emit("requestRejected",this)},e.exports=n},function(e,t,s){var i=s(11),o=s(32),n=s(34);const r=0,a=1,c=2,h=3;function l(e,t,s,o,c,l){n.EventTarget.call(this),(l=l||{}).assembleFragments=!0;var g=this;this._url=e,this._readyState=r,this._protocol=void 0,this._extensions="",this._bufferedAmount=0,this._binaryType="arraybuffer",this._connection=void 0,this._client=new i(l),this._client.on("connect",function(e){(function(e){var t=this;this._readyState=a,this._connection=e,this._protocol=e.protocol,this._extensions=e.extensions,this._connection.on("close",function(e,s){(function(e,t){p.call(this),this._readyState=h,this.dispatchEvent(u(e,t||""))}).call(t,e,s)}),this._connection.on("message",function(e){(function(e){if(e.utf8Data)this.dispatchEvent(d(e.utf8Data));else if(e.binaryData&&"arraybuffer"===this.binaryType){for(var t=e.binaryData,s=new ArrayBuffer(t.length),i=new Uint8Array(s),o=0,n=t.length;o<n;++o)i[o]=t[o];this.dispatchEvent(d(s))}}).call(t,e)}),this.dispatchEvent(new n.Event("open"))}).call(g,e)}),this._client.on("connectFailed",function(){f.call(g)}),this._client.connect(e,t,s,o,c)}function u(e,t){var s=new n.Event("close");return s.code=e,s.reason=t,s.wasClean=void 0===e||1e3===e,s}function d(e){var t=new n.Event("message");return t.data=e,t}function f(){p.call(this),this._readyState=h;try{this.dispatchEvent(new n.Event("error"))}finally{this.dispatchEvent(u(1006,"connection failed"))}}function p(){this._client.removeAllListeners(),this._connection&&this._connection.removeAllListeners()}e.exports=l,Object.defineProperties(l.prototype,{url:{get:function(){return this._url}},readyState:{get:function(){return this._readyState}},protocol:{get:function(){return this._protocol}},extensions:{get:function(){return this._extensions}},bufferedAmount:{get:function(){return this._bufferedAmount}}}),Object.defineProperties(l.prototype,{binaryType:{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e)throw new SyntaxError('just "arraybuffer" type allowed for "binaryType" attribute');this._binaryType=e}}}),[["CONNECTING",r],["OPEN",a],["CLOSING",c],["CLOSED",h]].forEach(function(e){Object.defineProperty(l.prototype,e[0],{get:function(){return e[1]}})}),[["CONNECTING",r],["OPEN",a],["CLOSING",c],["CLOSED",h]].forEach(function(e){Object.defineProperty(l,e[0],{get:function(){return e[1]}})}),l.prototype.send=function(e){if(this._readyState!==a)throw new Error("cannot call send() while not connected");if("string"==typeof e||e instanceof String)this._connection.sendUTF(e);else if(e instanceof Buffer)this._connection.sendBytes(e);else{if(!e.byteLength&&0!==e.byteLength)throw new Error("unknown binary data:",e);e=o(e),this._connection.sendBytes(e)}},l.prototype.close=function(e,t){switch(this._readyState){case r:f.call(this),this._client.on("connect",function(s){e?s.close(e,t):s.close()});break;case a:this._readyState=c,e?this._connection.close(e,t):this._connection.close()}}},function(e,t,s){var i=s(33).strict;e.exports=function(e){if(i(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},function(e,t){e.exports=o,o.strict=n,o.loose=r;var s=Object.prototype.toString,i={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function o(e){return n(e)||r(e)}function n(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function r(e){return i[s.call(e)]}},function(e,t,s){e.exports={EventTarget:s(35),Event:s(36)}},function(e,t){function s(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=i,this.removeEventListener=o,this.dispatchEvent=n)}function i(e,t){var s,i,o;if(e&&t){for(void 0===(s=this._listeners[e])&&(this._listeners[e]=s=[]),i=0;o=s[i];i++)if(o===t)return;s.push(t)}}function o(e,t){var s,i,o;if(e&&t&&void 0!==(s=this._listeners[e])){for(i=0;o=s[i];i++)if(o===t){s.splice(i,1);break}0===s.length&&delete this._listeners[e]}}function n(e){var t,s,i,o,n,r=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");e._yaeti&&(e.target=this,e.cancelable=!0);try{e.stopImmediatePropagation=function(){r=!0}}catch(e){}for(t=e.type,s=this._listeners[t]||[],"function"==typeof(i=this["on"+t])&&i.call(this,e),o=0;(n=s[o])&&!r;o++)n.call(this,e);return!e.defaultPrevented}e.exports=s,Object.defineProperties(s.prototype,{listeners:{get:function(){return this._listeners}}})},function(e,t){e.exports=function(e){this.type=e,this.isTrusted=!1,this._yaeti=!0}},function(e,t){var s={disableWarnings:!1,deprecationWarningMap:{},warn:function(e){!this.disableWarnings&&this.deprecationWarningMap[e]&&(console.warn("DEPRECATION WARNING: "+this.deprecationWarningMap[e]),this.deprecationWarningMap[e]=!1)}};e.exports=s},function(e,t,s){e.exports=s(39).version},function(e){e.exports={_args:[["websocket@1.0.28","C:\\prj\\7_typescriptgameserver\\0_git"]],_from:"websocket@1.0.28",_id:"websocket@1.0.28",_inBundle:!1,_integrity:"sha512-00y/20/80P7H4bCYkzuuvvfDvh+dgtXi5kzDf3UcZwN6boTYaKvsrtZ5lIYm1Gsg48siMErd9M4zjSYfYFHTrA==",_location:"/websocket",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"websocket@1.0.28",name:"websocket",escapedName:"websocket",rawSpec:"1.0.28",saveSpec:null,fetchSpec:"1.0.28"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.28.tgz",_spec:"1.0.28",_where:"C:\\prj\\7_typescriptgameserver\\0_git",author:{name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.11.0","typedarray-to-buffer":"^3.1.5",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.28"}},function(e,t,s){"use strict";var i=s(3),o=s(12);function n(e){var t={},s=!1,i=0;function o(e,i){(i||e._isIdle&&s)&&(e.destroy(),delete t[e._connectionId])}function n(e){var s=i++;e._isIdle=!0,e._connectionId=s,t[s]=e,e.on("close",function(){delete t[s]})}function r(i,n){s=!0,e.close(function(e){n&&process.nextTick(function(){n(e)})}),Object.keys(t).forEach(function(e){o(t[e],i)})}return e.on("request",function(e,t){e.socket._isIdle=!1,t.on("finish",function(){e.socket._isIdle=!0,o(e.socket)})}),e.on("connection",n),e.on("secureConnection",n),e.shutdown=function(e){r(!1,e)},e.forceShutdown=function(e){r(!0,e)},e}(e.exports=n).extend=function(){i.Server.prototype.withShutdown=function(){return n(this)},o.Server.prototype.withShutdown=function(){return n(this)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZXZlbnRzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwidXRpbFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL3V0aWxzLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImh0dHBcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0L2xpYi9XZWJTb2NrZXRDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9kZWJ1Zy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0L2xpYi9XZWJTb2NrZXRSZXF1ZXN0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImNyeXB0b1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcInVybFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL1dlYlNvY2tldEZyYW1lLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL1dlYlNvY2tldENsaWVudC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJodHRwc1wiIiwid2VicGFjazovLy8uL3NyYy9TZXNzaW9uU2VydmVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnNvY2tldC9saWIvd2Vic29ja2V0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL1dlYlNvY2tldFNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21zL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvbm9kZS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ0dHlcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcIm5ldFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL0J1ZmZlclV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnNvY2tldC9saWIvQnVmZmVyVXRpbC5mYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0L3ZlbmRvci9GYXN0QnVmZmVyTGlzdC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJidWZmZXJcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0L2xpYi9WYWxpZGF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL1ZhbGlkYXRpb24uZmFsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnNvY2tldC9saWIvV2ViU29ja2V0Um91dGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL1dlYlNvY2tldFJvdXRlclJlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnNvY2tldC9saWIvVzNDV2ViU29ja2V0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90eXBlZGFycmF5LXRvLWJ1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaXMtdHlwZWRhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMveWFldGkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3lhZXRpL2xpYi9FdmVudFRhcmdldC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMveWFldGkvbGliL0V2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL0RlcHJlY2F0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQvbGliL3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2h0dHAtc2h1dGRvd24vaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZXF1aXJlIiwibm9vcCIsIkJ1ZmZlcmluZ0xvZ2dlciIsImlkZW50aWZpZXIiLCJ1bmlxdWVJRCIsImxvZ0Z1bmN0aW9uIiwidGhpcyIsImJ1ZmZlciIsImV4dGVuZCIsImRlc3QiLCJzb3VyY2UiLCJwcm9wIiwiZXZlbnRFbWl0dGVyTGlzdGVuZXJDb3VudCIsIkV2ZW50RW1pdHRlciIsImxpc3RlbmVyQ291bnQiLCJlbWl0dGVyIiwidHlwZSIsImxpc3RlbmVycyIsImxlbmd0aCIsImJ1ZmZlckFsbG9jVW5zYWZlIiwiQnVmZmVyIiwiYWxsb2NVbnNhZmUiLCJzaXplIiwiYnVmZmVyRnJvbVN0cmluZyIsImZyb20iLCJzdHJpbmciLCJlbmNvZGluZyIsImVuYWJsZWQiLCJsb2dnZXIiLCJkZWJ1ZyIsImxvZyIsInByaW50T3V0cHV0IiwicHVzaCIsIkRhdGUiLCJBcnJheSIsInNsaWNlIiwiYXJndW1lbnRzIiwiY2xlYXIiLCJmb3JFYWNoIiwiZW50cnkiLCJkYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJhcmdzIiwiZm9ybWF0U3RyaW5nIiwidG9TdHJpbmciLCJzcGxpY2UiLCJhcHBseSIsImdsb2JhbCIsInV0aWwiLCJ1dGlscyIsIldlYlNvY2tldEZyYW1lIiwiQnVmZmVyTGlzdCIsIlZhbGlkYXRpb24iLCJTVEFURV9PUEVOIiwic2V0SW1tZWRpYXRlSW1wbCIsInNldEltbWVkaWF0ZSIsInByb2Nlc3MiLCJuZXh0VGljayIsImlkQ291bnRlciIsIldlYlNvY2tldENvbm5lY3Rpb24iLCJzb2NrZXQiLCJleHRlbnNpb25zIiwicHJvdG9jb2wiLCJtYXNrT3V0Z29pbmdQYWNrZXRzIiwiY29uZmlnIiwiX2RlYnVnIiwiY29ubmVjdGlvbiIsIm9yaWdpbmFsU29ja2V0RW1pdCIsImVtaXQiLCJldmVudCIsImluZGV4T2YiLCJvcmlnaW5hbCIsImluc3RydW1lbnRTb2NrZXRGb3JEZWJ1Z2dpbmciLCJfcGluZ0xpc3RlbmVyQ291bnQiLCJvbiIsImV2IiwicmVtb3RlQWRkcmVzcyIsImNsb3NlUmVhc29uQ29kZSIsImNsb3NlRGVzY3JpcHRpb24iLCJjbG9zZUV2ZW50RW1pdHRlZCIsIm1hc2tCeXRlcyIsImZyYW1lSGVhZGVyIiwiYnVmZmVyTGlzdCIsImN1cnJlbnRGcmFtZSIsImZyYWdtZW50YXRpb25TaXplIiwiZnJhbWVRdWV1ZSIsImNvbm5lY3RlZCIsInN0YXRlIiwid2FpdGluZ0ZvckNsb3NlUmVzcG9uc2UiLCJyZWNlaXZlZEVuZCIsImNsb3NlVGltZW91dCIsImFzc2VtYmxlRnJhZ21lbnRzIiwibWF4UmVjZWl2ZWRNZXNzYWdlU2l6ZSIsIm91dHB1dEJ1ZmZlckZ1bGwiLCJpbnB1dFBhdXNlZCIsInJlY2VpdmVkRGF0YUhhbmRsZXIiLCJwcm9jZXNzUmVjZWl2ZWREYXRhIiwiX2Nsb3NlVGltZXJIYW5kbGVyIiwiaGFuZGxlQ2xvc2VUaW1lciIsInNldE5vRGVsYXkiLCJkaXNhYmxlTmFnbGVBbGdvcml0aG0iLCJzZXRUaW1lb3V0Iiwia2VlcGFsaXZlIiwidXNlTmF0aXZlS2VlcGFsaXZlIiwiRXJyb3IiLCJfa2VlcGFsaXZlVGltZXJIYW5kbGVyIiwiaGFuZGxlS2VlcGFsaXZlVGltZXIiLCJzZXRLZWVwYWxpdmVUaW1lciIsImRyb3BDb25uZWN0aW9uT25LZWVwYWxpdmVUaW1lb3V0IiwiX2dyYWNlUGVyaW9kVGltZXJIYW5kbGVyIiwiaGFuZGxlR3JhY2VQZXJpb2RUaW1lciIsInNldEtlZXBBbGl2ZSIsImtlZXBhbGl2ZUludGVydmFsIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwidmFsaWRhdGVDbG9zZVJlYXNvbiIsImNvZGUiLCJDTE9TRV9SRUFTT05fTk9STUFMIiwiQ0xPU0VfUkVBU09OX0dPSU5HX0FXQVkiLCJDTE9TRV9SRUFTT05fUFJPVE9DT0xfRVJST1IiLCJDTE9TRV9SRUFTT05fVU5QUk9DRVNTQUJMRV9JTlBVVCIsIkNMT1NFX1JFQVNPTl9SRVNFUlZFRCIsIkNMT1NFX1JFQVNPTl9OT1RfUFJPVklERUQiLCJDTE9TRV9SRUFTT05fQUJOT1JNQUwiLCJDTE9TRV9SRUFTT05fSU5WQUxJRF9EQVRBIiwiQ0xPU0VfUkVBU09OX1BPTElDWV9WSU9MQVRJT04iLCJDTE9TRV9SRUFTT05fTUVTU0FHRV9UT09fQklHIiwiQ0xPU0VfUkVBU09OX0VYVEVOU0lPTl9SRVFVSVJFRCIsIkNMT1NFX1JFQVNPTl9JTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJDTE9TRV9SRUFTT05fVExTX0hBTkRTSEFLRV9GQUlMRUQiLCJDTE9TRV9ERVNDUklQVElPTlMiLCIxMDAwIiwiMTAwMSIsIjEwMDIiLCIxMDAzIiwiMTAwNCIsIjEwMDUiLCIxMDA2IiwiMTAwNyIsIjEwMDgiLCIxMDA5IiwiMTAxMCIsIjEwMTEiLCIxMDE1IiwiaW5oZXJpdHMiLCJfYWRkU29ja2V0RXZlbnRMaXN0ZW5lcnMiLCJoYW5kbGVTb2NrZXRFcnJvciIsImhhbmRsZVNvY2tldEVuZCIsImhhbmRsZVNvY2tldENsb3NlIiwiaGFuZGxlU29ja2V0RHJhaW4iLCJoYW5kbGVTb2NrZXRQYXVzZSIsImhhbmRsZVNvY2tldFJlc3VtZSIsImhhbmRsZVNvY2tldERhdGEiLCJjbGVhcktlZXBhbGl2ZVRpbWVyIiwiY2xlYXJHcmFjZVBlcmlvZFRpbWVyIiwiX2tlZXBhbGl2ZVRpbWVvdXRJRCIsImNsZWFyVGltZW91dCIsInBpbmciLCJzZXRHcmFjZVBlcmlvZFRpbWVyIiwiX2dyYWNlUGVyaW9kVGltZW91dElEIiwia2VlcGFsaXZlR3JhY2VQZXJpb2QiLCJkcm9wIiwiZGF0YSIsIndyaXRlIiwiZnJhbWUiLCJhZGREYXRhIiwic2VsZiIsInByb3RvY29sRXJyb3IiLCJkcm9wUmVhc29uIiwiZnJhbWVUb29MYXJnZSIsInJzdjEiLCJyc3YyIiwicnN2MyIsInByb2Nlc3NGcmFtZSIsImVycm9yIiwic3lzY2FsbCIsImRlc3Ryb3kiLCJlbmQiLCJoYWRFcnJvciIsInNvY2tldEhhZEVycm9yIiwiY2xlYXJDbG9zZVRpbWVyIiwicGF1c2UiLCJyZXN1bWUiLCJjbG9zZSIsInJlYXNvbkNvZGUiLCJkZXNjcmlwdGlvbiIsInNldENsb3NlVGltZXIiLCJzZW5kQ2xvc2VGcmFtZSIsInNraXBDbG9zZUZyYW1lIiwiY2xvc2VUaW1lciIsIm9wY29kZSIsImZpbiIsImJpbmFyeURhdGEiLCJiaW5hcnlQYXlsb2FkIiwiaXNWYWxpZFVURjgiLCJ1dGY4RGF0YSIsImJ5dGVzQ29waWVkIiwiY29weSIsImNhbmNlbGxlZCIsInBvbmciLCJyZXNwb25kQ2xvc2VSZWFzb25Db2RlIiwiaW52YWxpZENsb3NlRnJhbWVMZW5ndGgiLCJjbG9zZVN0YXR1cyIsInNlbmQiLCJjYiIsImlzQnVmZmVyIiwic2VuZEJ5dGVzIiwic2VuZFVURiIsImZyYWdtZW50QW5kU2VuZCIsInNlbmRGcmFtZSIsInRocmVzaG9sZCIsImZyYWdtZW50YXRpb25UaHJlc2hvbGQiLCJmcmFnbWVudE91dGdvaW5nTWVzc2FnZXMiLCJudW1GcmFnbWVudHMiLCJNYXRoIiwiY2VpbCIsInNlbnRGcmFnbWVudHMiLCJzZW50Q2FsbGJhY2siLCJlcnIiLCJjdXJyZW50TGVuZ3RoIiwic2xpY2VTdGFydCIsIm1hc2siLCJmbHVzaGVkIiwidG9CdWZmZXIiLCJwcmV2VGltZSIsImNyZWF0ZURlYnVnIiwibmFtZXNwYWNlIiwiY3VyciIsIm1zIiwiZGlmZiIsInByZXYiLCJjb2VyY2UiLCJ1bnNoaWZ0IiwiaW5kZXgiLCJyZXBsYWNlIiwibWF0Y2giLCJmb3JtYXQiLCJmb3JtYXR0ZXIiLCJmb3JtYXR0ZXJzIiwidmFsIiwiZm9ybWF0QXJncyIsImNvbnNvbGUiLCJ1c2VDb2xvcnMiLCJjb2xvciIsImhhc2giLCJjaGFyQ29kZUF0IiwiY29sb3JzIiwiYWJzIiwic2VsZWN0Q29sb3IiLCJpbml0Iiwic3RhY2siLCJtZXNzYWdlIiwiZGlzYWJsZSIsImVuYWJsZSIsIm5hbWVzcGFjZXMiLCJzYXZlIiwibmFtZXMiLCJza2lwcyIsInNwbGl0IiwibGVuIiwiUmVnRXhwIiwic3Vic3RyIiwidGVzdCIsImh1bWFuaXplIiwiY3J5cHRvIiwidXJsIiwiaGVhZGVyVmFsdWVTcGxpdFJlZ0V4cCIsImhlYWRlclBhcmFtU3BsaXRSZWdFeHAiLCJoZWFkZXJTYW5pdGl6ZVJlZ0V4cCIsInhGb3J3YXJkZWRGb3JTZXBhcmF0b3JSZWdFeHAiLCJzZXBhcmF0b3JzIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY29udHJvbENoYXJzIiwiY29va2llTmFtZVZhbGlkYXRlUmVnRXgiLCJjb29raWVWYWx1ZVZhbGlkYXRlUmVnRXgiLCJjb29raWVWYWx1ZURRdW90ZVZhbGlkYXRlUmVnRXgiLCJjb250cm9sQ2hhcnNBbmRTZW1pY29sb25SZWdFeCIsImNvb2tpZVNlcGFyYXRvclJlZ0V4IiwiaHR0cFN0YXR1c0Rlc2NyaXB0aW9ucyIsIjEwMCIsIjEwMSIsIjIwMCIsIjIwMSIsIjIwMyIsIjIwNCIsIjIwNSIsIjIwNiIsIjMwMCIsIjMwMSIsIjMwMiIsIjMwMyIsIjMwNCIsIjMwNSIsIjMwNyIsIjQwMCIsIjQwMSIsIjQwMiIsIjQwMyIsIjQwNCIsIjQwNiIsIjQwNyIsIjQwOCIsIjQwOSIsIjQxMCIsIjQxMSIsIjQxMiIsIjQxMyIsIjQxNCIsIjQxNSIsIjQxNiIsIjQxNyIsIjQyNiIsIjUwMCIsIjUwMSIsIjUwMiIsIjUwMyIsIjUwNCIsIjUwNSIsIldlYlNvY2tldFJlcXVlc3QiLCJodHRwUmVxdWVzdCIsInNlcnZlckNvbmZpZyIsInJlc291cmNlIiwicmVtb3RlQWRkcmVzc2VzIiwiX3NvY2tldElzQ2xvc2luZyIsIl9zb2NrZXRDbG9zZUhhbmRsZXIiLCJfaGFuZGxlU29ja2V0Q2xvc2VCZWZvcmVBY2NlcHQiLCJfcmVzb2x2ZWQiLCJjbGVhbnVwRmFpbGVkQ29ubmVjdGlvbiIsInJlYWRIYW5kc2hha2UiLCJyZXF1ZXN0IiwicmVzb3VyY2VVUkwiLCJwYXJzZSIsImhvc3QiLCJoZWFkZXJzIiwid2ViU29ja2V0VmVyc2lvbiIsInBhcnNlSW50IiwiaXNOYU4iLCJlIiwiaHR0cENvZGUiLCJTZWMtV2ViU29ja2V0LVZlcnNpb24iLCJvcmlnaW4iLCJwcm90b2NvbFN0cmluZyIsInByb3RvY29sRnVsbENhc2VNYXAiLCJyZXF1ZXN0ZWRQcm90b2NvbHMiLCJsY1Byb3RvY29sIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJpZ25vcmVYRm9yd2FyZGVkRm9yIiwiaW1tZWRpYXRlUGVlcklQIiwiZXh0ZW5zaW9uc1N0cmluZyIsInJlcXVlc3RlZEV4dGVuc2lvbnMiLCJwYXJzZUV4dGVuc2lvbnMiLCJjb29raWVTdHJpbmciLCJjb29raWVzIiwicGFyc2VDb29raWVzIiwiZXh0ZW5zaW9uIiwiYXJyYXkiLCJwYXJhbXMiLCJleHRlbnNpb25OYW1lIiwiZXh0ZW5zaW9uUGFyYW1zIiwicmF3UGFyYW0iLCJhcnIiLCJvYmoiLCJzdHIiLCJwYWlyIiwiZXFfaWR4IiwidHJpbSIsImRlY29kZVVSSUNvbXBvbmVudCIsImFjY2VwdCIsImFjY2VwdGVkUHJvdG9jb2wiLCJhbGxvd2VkT3JpZ2luIiwicHJvdG9jb2xGdWxsQ2FzZSIsIl92ZXJpZnlSZXNvbHV0aW9uIiwic2hhMSIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJyZXNwb25zZSIsImRpZ2VzdCIsImNoYXJDb2RlIiwiY2hhcmFjdGVyIiwiY2hhckF0IiwicmVqZWN0IiwiaXNBcnJheSIsInNlZW5Db29raWVzIiwiY29va2llIiwiaW52YWxpZENoYXIiLCJjb29raWVQYXJ0cyIsInBhdGgiLCJkb21haW4iLCJ0b0xvd2VyQ2FzZSIsImV4cGlyZXMiLCJ0b0dNVFN0cmluZyIsIm1heGFnZSIsInJvdW5kIiwic2VjdXJlIiwiaHR0cG9ubHkiLCJqb2luIiwiX3JlbW92ZVNvY2tldENsb3NlTGlzdGVuZXJzIiwic3RhdHVzIiwicmVhc29uIiwiZXh0cmFIZWFkZXJzIiwic2FuaXRpemVkVmFsdWUiLCJyZW1vdmVMaXN0ZW5lciIsImJ1ZmZlclV0aWwiLCJCdWZmZXJVdGlsIiwiREVDT0RFX0hFQURFUiIsIm1heFJlY2VpdmVkRnJhbWVTaXplIiwicGFyc2VTdGF0ZSIsImpvaW5JbnRvIiwiYWR2YW5jZSIsImZpcnN0Qnl0ZSIsInNlY29uZEJ5dGUiLCJCb29sZWFuIiwicmVhZFVJbnQxNkJFIiwibGVuZ3RoUGFpciIsInJlYWRVSW50MzJCRSIsInRha2UiLCJ1bm1hc2siLCJ0aHJvd0F3YXlQYXlsb2FkIiwibnVsbE1hc2siLCJtYXNrS2V5Iiwib3V0cHV0UG9zIiwiaGVhZGVyTGVuZ3RoIiwid3JpdGVVSW50MTZCRSIsIm91dHB1dCIsIndyaXRlVUludDMyQkUiLCJyYW5kb20iLCJodHRwIiwiaHR0cHMiLCJwcm90b2NvbFNlcGFyYXRvcnMiLCJleGNsdWRlZFRsc09wdGlvbnMiLCJXZWJTb2NrZXRDbGllbnQiLCJ0bHNPcHRpb25zIiwiX3JlcSIsImNvbm5lY3QiLCJyZXF1ZXN0VXJsIiwicHJvdG9jb2xzIiwiZXh0cmFSZXF1ZXN0T3B0aW9ucyIsInBvcnQiLCJ3czoiLCJ3c3M6Iiwibm9uY2UiLCJiYXNlNjRub25jZSIsImhvc3RIZWFkZXJWYWx1ZSIsImhvc3RuYW1lIiwicGF0aEFuZFF1ZXJ5IiwicmVxSGVhZGVycyIsImhhbmRsZVJlcXVlc3RFcnJvciIsIlVwZ3JhZGUiLCJDb25uZWN0aW9uIiwiU2VjLVdlYlNvY2tldC1LZXkiLCJIb3N0IiwicGF0aG5hbWUiLCJyZXF1ZXN0T3B0aW9ucyIsImFnZW50IiwibWV0aG9kIiwicmVxIiwiaGVhZCIsImZpcnN0RGF0YUNodW5rIiwidmFsaWRhdGVIYW5kc2hha2UiLCJoZWFkZXJEdW1wUGFydHMiLCJoZWFkZXJOYW1lIiwiZmFpbEhhbmRzaGFrZSIsInN0YXR1c0NvZGUiLCJzdGF0dXNNZXNzYWdlIiwiZXhwZWN0ZWRLZXkiLCJzdWNjZWVkSGFuZHNoYWtlIiwiZXJyb3JEZXNjcmlwdGlvbiIsIndyaXRhYmxlIiwiYWJvcnQiLCJyZW1vdmUiLCJlbGVtIiwiZmlsdGVyIiwiU2Vzc2lvbiIsIltvYmplY3QgT2JqZWN0XSIsInNlc3Npb25UeXBlIiwiSUQiLCJzZXNzaW9uQ3JlYXRpb25Bcmd1bWVudHMiLCJjb25uZWN0ZWRQbGF5ZXJJRHMiLCJpZCIsImN1cnJlbnRTZXNzaW9uRGF0YSIsIkN1cnJlbnRQbGF5ZXJDb3VudCIsInBsYXllcklEIiwiSGFzUGxheWVySW5TZXNzaW9uIiwic2Vzc2lvblVwZGF0ZUFyZ3VtZW50cyIsIlVwZGF0ZSIsImNhbGxiYWNrIiwiX19pbXBvcnRTdGFyIiwid3MiLCJodHRwX3NodXRkb3duXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJTZXNzaW9uU2VydmVyIiwiY29tbWFuZHMiLCJuZXh0U2Vzc2lvbklEIiwic2Vzc2lvbnMiLCJuZXh0UGxheWVySUQiLCJwbGF5ZXIiLCJodHRwU2VydmVyIiwiZGVmYXVsdCIsImNyZWF0ZVNlcnZlciIsIndzU2VydmVyIiwic2VydmVyIiwic2Vzc2lvbklEIiwic2VuZE1lc3NhZ2VUb1BsYXllciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb21tYW5kIiwianNvbk1lc3NhZ2UiLCJuZXdTZXNzaW9uSUQiLCJnZW5lcmF0ZVNlc3Npb25JRCIsInBhcmFtZXRlcnMiLCJBZGRQbGF5ZXJCeUlEIiwic2Vzc2lvbiIsIkdldERhdGEiLCJ2YWxpZGF0ZVNlc3Npb25JRCIsIkZvckVhY2hQbGF5ZXIiLCJSZW1vdmVQbGF5ZXJCeUlEIiwiaGFuZGxlTWVzc2FnZSIsImdyb3VwIiwiZ3JvdXBFbmQiLCJyZW1vdmVQbGF5ZXIiLCJsZWF2ZVNlc3Npb24iLCJ1bmRlZmluZWQiLCJnZW5lcmF0ZVBsYXllcklEIiwiZ2VuZXJhdGVQbGF5ZXJNZXNzYWdlSGFuZGxlciIsImdlbmVyYXRlUGxheWVyQ2xvc2VIYW5kbGVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJuZXdTZXJ2ZXIiLCJzZXR1cENvbW1hbmRzIiwiaGFuZGxlTmV3UGxheWVyIiwibGlzdGVuIiwic2h1dGRvd24iLCJjbGllbnQiLCJyb3V0ZXIiLCJ3M2N3ZWJzb2NrZXQiLCJkZXByZWNhdGlvbiIsInZlcnNpb24iLCJXZWJTb2NrZXRTZXJ2ZXIiLCJfaGFuZGxlcnMiLCJ1cGdyYWRlIiwiaGFuZGxlVXBncmFkZSIsInJlcXVlc3RBY2NlcHRlZCIsImhhbmRsZVJlcXVlc3RBY2NlcHRlZCIsInJlcXVlc3RSZXNvbHZlZCIsImhhbmRsZVJlcXVlc3RSZXNvbHZlZCIsImNvbm5lY3Rpb25zIiwicGVuZGluZ1JlcXVlc3RzIiwibW91bnQiLCJhdXRvQWNjZXB0Q29ubmVjdGlvbnMiLCJ1cGdyYWRlSGFuZGxlciIsInVubW91bnQiLCJjbG9zZUFsbENvbm5lY3Rpb25zIiwiYnJvYWRjYXN0IiwiYnJvYWRjYXN0Qnl0ZXMiLCJicm9hZGNhc3RVVEYiLCJ1dGZEYXRhIiwic2h1dERvd24iLCJ3c1JlcXVlc3QiLCJvbmNlIiwiY2xvc2VSZWFzb24iLCJoYW5kbGVDb25uZWN0aW9uQ2xvc2UiLCJsb2FkIiwic3RvcmFnZSIsImVudiIsIkRFQlVHIiwiRnVuY3Rpb24iLCJsYXN0QyIsInJlbW92ZUl0ZW0iLCJ3aW5kb3ciLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwiV2Via2l0QXBwZWFyYW5jZSIsImZpcmVidWciLCJleGNlcHRpb24iLCJ0YWJsZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIiQxIiwiY2hyb21lIiwibG9jYWwiLCJsb2NhbFN0b3JhZ2UiLCJsb2NhbHN0b3JhZ2UiLCJqIiwidiIsImgiLCJ5IiwicGx1cmFsIiwiZmxvb3IiLCJvcHRpb25zIiwiZXhlYyIsInBhcnNlRmxvYXQiLCJsb25nIiwiZm10TG9uZyIsImZtdFNob3J0IiwidHR5IiwiaW5zcGVjdE9wdHMiLCJrZXlzIiwic3RyZWFtIiwicHJlZml4IiwidG9VVENTdHJpbmciLCJpc2F0dHkiLCJmZCIsInJlZHVjZSIsInN1YnN0cmluZyIsIl8iLCJrIiwidG9VcHBlckNhc2UiLCJOdW1iZXIiLCJERUJVR19GRCIsImRlcHJlY2F0ZSIsInN0ZG91dCIsInN0ZGVyciIsImJpbmRpbmciLCJndWVzc0hhbmRsZVR5cGUiLCJXcml0ZVN0cmVhbSIsIl90eXBlIiwiX2hhbmRsZSIsInVucmVmIiwiZnMiLCJTeW5jV3JpdGVTdHJlYW0iLCJhdXRvQ2xvc2UiLCJuZXQiLCJTb2NrZXQiLCJyZWFkYWJsZSIsInJlYWQiLCJfaXNTdGRpbyIsImNyZWF0ZVdyaXRhYmxlU3RkaW9TdHJlYW0iLCJpbnNwZWN0IiwibWFwIiwiTyIsIm1lcmdlIiwibWVyZ2VkQnVmZmVyIiwiYnVmZmVycyIsIm9mZnNldCIsImJ1ZiIsIm1hc2tOdW0iLCJyZWFkVUludDMyTEUiLCJudW0iLCJ3cml0ZVVJbnQzMkxFIiwib3B0cyIsIm5leHQiLCJsYXN0IiwiX19kZWZpbmVHZXR0ZXJfXyIsImNvbmNhdCIsImZuIiwiYiIsInN0YXJ0IiwiYmlnIiwiaXgiLCJtYXgiLCJtaW4iLCJ0YXJnZXRCdWZmZXIiLCJ0YXJnZXRTdGFydCIsInNvdXJjZVN0YXJ0Iiwic291cmNlRW5kIiwiYWNjIiwiV2ViU29ja2V0Um91dGVyUmVxdWVzdCIsIldlYlNvY2tldFJvdXRlciIsImhhbmRsZXJzIiwiX3JlcXVlc3RIYW5kbGVyIiwiaGFuZGxlUmVxdWVzdCIsImF0dGFjaFNlcnZlciIsImRldGFjaFNlcnZlciIsInBhdGhUb1JlZ0V4cCIsInBhdGhTdHJpbmciLCJmaW5kSGFuZGxlckluZGV4IiwiaGFuZGxlciIsInJlcXVlc3RlZFByb3RvY29sIiwicm91dGVyUmVxdWVzdCIsIndlYlNvY2tldFJlcXVlc3QiLCJyZXNvbHZlZFByb3RvY29sIiwieWFldGkiLCJDT05ORUNUSU5HIiwiT1BFTiIsIkNMT1NJTkciLCJDTE9TRUQiLCJXM0NXZWJTb2NrZXQiLCJjbGllbnRDb25maWciLCJFdmVudFRhcmdldCIsIl91cmwiLCJfcmVhZHlTdGF0ZSIsIl9wcm90b2NvbCIsIl9leHRlbnNpb25zIiwiX2J1ZmZlcmVkQW1vdW50IiwiX2JpbmFyeVR5cGUiLCJfY29ubmVjdGlvbiIsIl9jbGllbnQiLCJkaXNwYXRjaEV2ZW50IiwiY3JlYXRlQ2xvc2VFdmVudCIsIm1zZyIsImNyZWF0ZU1lc3NhZ2VFdmVudCIsImJpbmFyeVR5cGUiLCJhcnJheWJ1ZmZlciIsIkFycmF5QnVmZmVyIiwidmlldyIsIlVpbnQ4QXJyYXkiLCJFdmVudCIsIm9uQ29ubmVjdEZhaWxlZCIsIndhc0NsZWFuIiwiZGVmaW5lUHJvcGVydGllcyIsInJlYWR5U3RhdGUiLCJidWZmZXJlZEFtb3VudCIsInNldCIsIlN5bnRheEVycm9yIiwiYnl0ZUxlbmd0aCIsImlzVHlwZWRBcnJheSIsInN0cmljdCIsImJ5dGVPZmZzZXQiLCJpc1N0cmljdFR5cGVkQXJyYXkiLCJsb29zZSIsImlzTG9vc2VUeXBlZEFycmF5IiwiW29iamVjdCBJbnQ4QXJyYXldIiwiW29iamVjdCBJbnQxNkFycmF5XSIsIltvYmplY3QgSW50MzJBcnJheV0iLCJbb2JqZWN0IFVpbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iLCJbb2JqZWN0IFVpbnQxNkFycmF5XSIsIltvYmplY3QgVWludDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDY0QXJyYXldIiwiSW50OEFycmF5IiwiSW50MTZBcnJheSIsIkludDMyQXJyYXkiLCJVaW50OENsYW1wZWRBcnJheSIsIlVpbnQxNkFycmF5IiwiVWludDMyQXJyYXkiLCJGbG9hdDMyQXJyYXkiLCJGbG9hdDY0QXJyYXkiLCJfRXZlbnRUYXJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpc3RlbmVycyIsIl9hZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9yZW1vdmVFdmVudExpc3RlbmVyIiwiX2Rpc3BhdGNoRXZlbnQiLCJuZXdMaXN0ZW5lciIsImxpc3RlbmVyc1R5cGUiLCJsaXN0ZW5lciIsIm9sZExpc3RlbmVyIiwiZHVtbXlMaXN0ZW5lciIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsIl95YWV0aSIsInRhcmdldCIsImNhbmNlbGFibGUiLCJkZWZhdWx0UHJldmVudGVkIiwiaXNUcnVzdGVkIiwiRGVwcmVjYXRpb24iLCJkaXNhYmxlV2FybmluZ3MiLCJkZXByZWNhdGlvbldhcm5pbmdNYXAiLCJ3YXJuIiwiZGVwcmVjYXRpb25OYW1lIiwiYWRkU2h1dGRvd24iLCJpc1NodXR0aW5nRG93biIsImNvbm5lY3Rpb25Db3VudGVyIiwiZm9yY2UiLCJfaXNJZGxlIiwiX2Nvbm5lY3Rpb25JZCIsIm9uQ29ubmVjdGlvbiIsInJlcyIsImZvcmNlU2h1dGRvd24iLCJTZXJ2ZXIiLCJ3aXRoU2h1dGRvd24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYs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QixTQUFBLEVBRUFHLEVBQUE3cUIsR0FBQSxvQkFDQTZYLEVBQUEzWSxPQUFBd3JCLFNBQUEsRUFDQXJrQixFQUFBd1IsRUFBQTNZLFlBSUF3YixFQUFBMWEsR0FBQSxhQUFBNHFCLEdBQ0FsUSxFQUFBMWEsR0FBQSxtQkFBQTRxQixHQWVBbFEsRUFBQStCLFNBQUEsU0FBQXhVLEdBQ0F3VSxHQUFBLEVBQUF4VSxJQUdBeVMsRUFBQW9RLGNBQUEsU0FBQTdpQixHQUNBd1UsR0FBQSxFQUFBeFUsSUFHQXlTLEdBOURBcmhCLEVBQUFELFFBQUFreEIsR0FxRUF4dUIsT0FBQSxXQUNBa2EsRUFBQStVLE9BQUE3dkIsVUFBQTh2QixhQUFBLFdBQ0EsT0FBQVYsRUFBQTF1QixPQUdBcWEsRUFBQThVLE9BQUE3dkIsVUFBQTh2QixhQUFBLFdBQ0EsT0FBQVYsRUFBQTF1QiIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTMpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXZlbnRzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInV0aWxcIik7IiwidmFyIG5vb3AgPSBleHBvcnRzLm5vb3AgPSBmdW5jdGlvbigpe307XG5cbmV4cG9ydHMuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kKGRlc3QsIHNvdXJjZSkge1xuICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG4gICAgICAgIGRlc3RbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxufTtcblxuZXhwb3J0cy5ldmVudEVtaXR0ZXJMaXN0ZW5lckNvdW50ID1cbiAgICByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCB8fFxuICAgIGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDsgfTtcblxuZXhwb3J0cy5idWZmZXJBbGxvY1Vuc2FmZSA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSA/XG4gICAgQnVmZmVyLmFsbG9jVW5zYWZlIDpcbiAgICBmdW5jdGlvbiBvbGRCdWZmZXJBbGxvY1Vuc2FmZShzaXplKSB7IHJldHVybiBuZXcgQnVmZmVyKHNpemUpOyB9O1xuXG5leHBvcnRzLmJ1ZmZlckZyb21TdHJpbmcgPSBCdWZmZXIuZnJvbSA/XG4gICAgQnVmZmVyLmZyb20gOlxuICAgIGZ1bmN0aW9uIG9sZEJ1ZmZlckZyb21TdHJpbmcoc3RyaW5nLCBlbmNvZGluZykge1xuICAgICAgcmV0dXJuIG5ldyBCdWZmZXIoc3RyaW5nLCBlbmNvZGluZyk7XG4gICAgfTtcblxuZXhwb3J0cy5CdWZmZXJpbmdMb2dnZXIgPSBmdW5jdGlvbiBjcmVhdGVCdWZmZXJpbmdMb2dnZXIoaWRlbnRpZmllciwgdW5pcXVlSUQpIHtcbiAgICB2YXIgbG9nRnVuY3Rpb24gPSByZXF1aXJlKCdkZWJ1ZycpKGlkZW50aWZpZXIpO1xuICAgIGlmIChsb2dGdW5jdGlvbi5lbmFibGVkKSB7XG4gICAgICAgIHZhciBsb2dnZXIgPSBuZXcgQnVmZmVyaW5nTG9nZ2VyKGlkZW50aWZpZXIsIHVuaXF1ZUlELCBsb2dGdW5jdGlvbik7XG4gICAgICAgIHZhciBkZWJ1ZyA9IGxvZ2dlci5sb2cuYmluZChsb2dnZXIpO1xuICAgICAgICBkZWJ1Zy5wcmludE91dHB1dCA9IGxvZ2dlci5wcmludE91dHB1dC5iaW5kKGxvZ2dlcik7XG4gICAgICAgIGRlYnVnLmVuYWJsZWQgPSBsb2dGdW5jdGlvbi5lbmFibGVkO1xuICAgICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICAgIGxvZ0Z1bmN0aW9uLnByaW50T3V0cHV0ID0gbm9vcDtcbiAgICByZXR1cm4gbG9nRnVuY3Rpb247XG59O1xuXG5mdW5jdGlvbiBCdWZmZXJpbmdMb2dnZXIoaWRlbnRpZmllciwgdW5pcXVlSUQsIGxvZ0Z1bmN0aW9uKSB7XG4gICAgdGhpcy5sb2dGdW5jdGlvbiA9IGxvZ0Z1bmN0aW9uO1xuICAgIHRoaXMuaWRlbnRpZmllciA9IGlkZW50aWZpZXI7XG4gICAgdGhpcy51bmlxdWVJRCA9IHVuaXF1ZUlEO1xuICAgIHRoaXMuYnVmZmVyID0gW107XG59XG5cbkJ1ZmZlcmluZ0xvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuYnVmZmVyLnB1c2goWyBuZXcgRGF0ZSgpLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpIF0pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkJ1ZmZlcmluZ0xvZ2dlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5idWZmZXIgPSBbXTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5CdWZmZXJpbmdMb2dnZXIucHJvdG90eXBlLnByaW50T3V0cHV0ID0gZnVuY3Rpb24obG9nRnVuY3Rpb24pIHtcbiAgICBpZiAoIWxvZ0Z1bmN0aW9uKSB7IGxvZ0Z1bmN0aW9uID0gdGhpcy5sb2dGdW5jdGlvbjsgfVxuICAgIHZhciB1bmlxdWVJRCA9IHRoaXMudW5pcXVlSUQ7XG4gICAgdGhpcy5idWZmZXIuZm9yRWFjaChmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICB2YXIgZGF0ZSA9IGVudHJ5WzBdLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICAgIHZhciBhcmdzID0gZW50cnlbMV0uc2xpY2UoKTtcbiAgICAgICAgdmFyIGZvcm1hdFN0cmluZyA9IGFyZ3NbMF07XG4gICAgICAgIGlmIChmb3JtYXRTdHJpbmcgIT09ICh2b2lkIDApICYmIGZvcm1hdFN0cmluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZm9ybWF0U3RyaW5nID0gJyVzIC0gJXMgLSAnICsgZm9ybWF0U3RyaW5nLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBhcmdzLnNwbGljZSgwLCAxLCBmb3JtYXRTdHJpbmcsIGRhdGUsIHVuaXF1ZUlEKTtcbiAgICAgICAgICAgIGxvZ0Z1bmN0aW9uLmFwcGx5KGdsb2JhbCwgYXJncyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwXCIpOyIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICBDb3B5cmlnaHQgMjAxMC0yMDE1IEJyaWFuIE1jS2VsdmV5LlxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xudmFyIFdlYlNvY2tldEZyYW1lID0gcmVxdWlyZSgnLi9XZWJTb2NrZXRGcmFtZScpO1xudmFyIEJ1ZmZlckxpc3QgPSByZXF1aXJlKCcuLi92ZW5kb3IvRmFzdEJ1ZmZlckxpc3QnKTtcbnZhciBWYWxpZGF0aW9uID0gcmVxdWlyZSgnLi9WYWxpZGF0aW9uJykuVmFsaWRhdGlvbjtcbnZhciBidWZmZXJBbGxvY1Vuc2FmZSA9IHV0aWxzLmJ1ZmZlckFsbG9jVW5zYWZlO1xudmFyIGJ1ZmZlckZyb21TdHJpbmcgPSB1dGlscy5idWZmZXJGcm9tU3RyaW5nO1xuXG4vLyBDb25uZWN0ZWQsIGZ1bGx5LW9wZW4sIHJlYWR5IHRvIHNlbmQgYW5kIHJlY2VpdmUgZnJhbWVzXG5jb25zdCBTVEFURV9PUEVOID0gJ29wZW4nO1xuLy8gUmVjZWl2ZWQgYSBjbG9zZSBmcmFtZSBmcm9tIHRoZSByZW1vdGUgcGVlclxuY29uc3QgU1RBVEVfUEVFUl9SRVFVRVNURURfQ0xPU0UgPSAncGVlcl9yZXF1ZXN0ZWRfY2xvc2UnO1xuLy8gU2VudCBjbG9zZSBmcmFtZSB0byByZW1vdGUgcGVlci4gIE5vIGZ1cnRoZXIgZGF0YSBjYW4gYmUgc2VudC5cbmNvbnN0IFNUQVRFX0VORElORyA9ICdlbmRpbmcnO1xuLy8gQ29ubmVjdGlvbiBpcyBmdWxseSBjbG9zZWQuICBObyBmdXJ0aGVyIGRhdGEgY2FuIGJlIHNlbnQgb3IgcmVjZWl2ZWQuXG5jb25zdCBTVEFURV9DTE9TRUQgPSAnY2xvc2VkJztcblxudmFyIHNldEltbWVkaWF0ZUltcGwgPSAoJ3NldEltbWVkaWF0ZScgaW4gZ2xvYmFsKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsLnNldEltbWVkaWF0ZS5iaW5kKGdsb2JhbCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2suYmluZChwcm9jZXNzKTtcblxudmFyIGlkQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIFdlYlNvY2tldENvbm5lY3Rpb24oc29ja2V0LCBleHRlbnNpb25zLCBwcm90b2NvbCwgbWFza091dGdvaW5nUGFja2V0cywgY29uZmlnKSB7XG4gICAgdGhpcy5fZGVidWcgPSB1dGlscy5CdWZmZXJpbmdMb2dnZXIoJ3dlYnNvY2tldDpjb25uZWN0aW9uJywgKytpZENvdW50ZXIpO1xuICAgIHRoaXMuX2RlYnVnKCdjb25zdHJ1Y3RvcicpO1xuICAgIFxuICAgIGlmICh0aGlzLl9kZWJ1Zy5lbmFibGVkKSB7XG4gICAgICAgIGluc3RydW1lbnRTb2NrZXRGb3JEZWJ1Z2dpbmcodGhpcywgc29ja2V0KTtcbiAgICB9XG4gICAgXG4gICAgLy8gU3VwZXJjbGFzcyBDb25zdHJ1Y3RvclxuICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5fcGluZ0xpc3RlbmVyQ291bnQgPSAwO1xuICAgIHRoaXMub24oJ25ld0xpc3RlbmVyJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKGV2ID09PSAncGluZycpe1xuICAgICAgICAgICAgdGhpcy5fcGluZ0xpc3RlbmVyQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfSkub24oJ3JlbW92ZUxpc3RlbmVyJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKGV2ID09PSAncGluZycpIHtcbiAgICAgICAgICAgIHRoaXMuX3BpbmdMaXN0ZW5lckNvdW50LS07XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgIHRoaXMucHJvdG9jb2wgPSBwcm90b2NvbDtcbiAgICB0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuICAgIHRoaXMucmVtb3RlQWRkcmVzcyA9IHNvY2tldC5yZW1vdGVBZGRyZXNzO1xuICAgIHRoaXMuY2xvc2VSZWFzb25Db2RlID0gLTE7XG4gICAgdGhpcy5jbG9zZURlc2NyaXB0aW9uID0gbnVsbDtcbiAgICB0aGlzLmNsb3NlRXZlbnRFbWl0dGVkID0gZmFsc2U7XG5cbiAgICAvLyBXZSBoYXZlIHRvIG1hc2sgb3V0Z29pbmcgcGFja2V0cyBpZiB3ZSdyZSBhY3RpbmcgYXMgYSBXZWJTb2NrZXQgY2xpZW50LlxuICAgIHRoaXMubWFza091dGdvaW5nUGFja2V0cyA9IG1hc2tPdXRnb2luZ1BhY2tldHM7XG5cbiAgICAvLyBXZSByZS11c2UgdGhlIHNhbWUgYnVmZmVycyBmb3IgdGhlIG1hc2sgYW5kIGZyYW1lIGhlYWRlciBmb3IgYWxsIGZyYW1lc1xuICAgIC8vIHJlY2VpdmVkIG9uIGVhY2ggY29ubmVjdGlvbiB0byBhdm9pZCBhIHNtYWxsIG1lbW9yeSBhbGxvY2F0aW9uIGZvciBlYWNoXG4gICAgLy8gZnJhbWUuXG4gICAgdGhpcy5tYXNrQnl0ZXMgPSBidWZmZXJBbGxvY1Vuc2FmZSg0KTtcbiAgICB0aGlzLmZyYW1lSGVhZGVyID0gYnVmZmVyQWxsb2NVbnNhZmUoMTApO1xuXG4gICAgLy8gdGhlIEJ1ZmZlckxpc3Qgd2lsbCBoYW5kbGUgdGhlIGRhdGEgc3RyZWFtaW5nIGluXG4gICAgdGhpcy5idWZmZXJMaXN0ID0gbmV3IEJ1ZmZlckxpc3QoKTtcblxuICAgIC8vIFByZXBhcmUgZm9yIHJlY2VpdmluZyBmaXJzdCBmcmFtZVxuICAgIHRoaXMuY3VycmVudEZyYW1lID0gbmV3IFdlYlNvY2tldEZyYW1lKHRoaXMubWFza0J5dGVzLCB0aGlzLmZyYW1lSGVhZGVyLCB0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5mcmFnbWVudGF0aW9uU2l6ZSA9IDA7IC8vIGRhdGEgcmVjZWl2ZWQgc28gZmFyLi4uXG4gICAgdGhpcy5mcmFtZVF1ZXVlID0gW107XG4gICAgXG4gICAgLy8gVmFyaW91cyBiaXRzIG9mIGNvbm5lY3Rpb24gc3RhdGVcbiAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgdGhpcy5zdGF0ZSA9IFNUQVRFX09QRU47XG4gICAgdGhpcy53YWl0aW5nRm9yQ2xvc2VSZXNwb25zZSA9IGZhbHNlO1xuICAgIC8vIFJlY2VpdmVkIFRDUCBGSU4sIHNvY2tldCdzIHJlYWRhYmxlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICB0aGlzLnJlY2VpdmVkRW5kID0gZmFsc2U7XG5cbiAgICB0aGlzLmNsb3NlVGltZW91dCA9IHRoaXMuY29uZmlnLmNsb3NlVGltZW91dDtcbiAgICB0aGlzLmFzc2VtYmxlRnJhZ21lbnRzID0gdGhpcy5jb25maWcuYXNzZW1ibGVGcmFnbWVudHM7XG4gICAgdGhpcy5tYXhSZWNlaXZlZE1lc3NhZ2VTaXplID0gdGhpcy5jb25maWcubWF4UmVjZWl2ZWRNZXNzYWdlU2l6ZTtcblxuICAgIHRoaXMub3V0cHV0QnVmZmVyRnVsbCA9IGZhbHNlO1xuICAgIHRoaXMuaW5wdXRQYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLnJlY2VpdmVkRGF0YUhhbmRsZXIgPSB0aGlzLnByb2Nlc3NSZWNlaXZlZERhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9jbG9zZVRpbWVySGFuZGxlciA9IHRoaXMuaGFuZGxlQ2xvc2VUaW1lci5iaW5kKHRoaXMpO1xuXG4gICAgLy8gRGlzYWJsZSBuYWdsZSBhbGdvcml0aG0/XG4gICAgdGhpcy5zb2NrZXQuc2V0Tm9EZWxheSh0aGlzLmNvbmZpZy5kaXNhYmxlTmFnbGVBbGdvcml0aG0pO1xuXG4gICAgLy8gTWFrZSBzdXJlIHRoZXJlIGlzIG5vIHNvY2tldCBpbmFjdGl2aXR5IHRpbWVvdXRcbiAgICB0aGlzLnNvY2tldC5zZXRUaW1lb3V0KDApO1xuXG4gICAgaWYgKHRoaXMuY29uZmlnLmtlZXBhbGl2ZSAmJiAhdGhpcy5jb25maWcudXNlTmF0aXZlS2VlcGFsaXZlKSB7XG4gICAgICAgIGlmICh0eXBlb2YodGhpcy5jb25maWcua2VlcGFsaXZlSW50ZXJ2YWwpICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdrZWVwYWxpdmVJbnRlcnZhbCBtdXN0IGJlIHNwZWNpZmllZCBhbmQgbnVtZXJpYyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWYga2VlcGFsaXZlIGlzIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fa2VlcGFsaXZlVGltZXJIYW5kbGVyID0gdGhpcy5oYW5kbGVLZWVwYWxpdmVUaW1lci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNldEtlZXBhbGl2ZVRpbWVyKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmRyb3BDb25uZWN0aW9uT25LZWVwYWxpdmVUaW1lb3V0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMuY29uZmlnLmtlZXBhbGl2ZUdyYWNlUGVyaW9kKSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2tlZXBhbGl2ZUdyYWNlUGVyaW9kICBtdXN0IGJlIHNwZWNpZmllZCBhbmQgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdudW1lcmljIGlmIGRyb3BDb25uZWN0aW9uT25LZWVwYWxpdmVUaW1lb3V0ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaXMgdHJ1ZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2dyYWNlUGVyaW9kVGltZXJIYW5kbGVyID0gdGhpcy5oYW5kbGVHcmFjZVBlcmlvZFRpbWVyLmJpbmQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5jb25maWcua2VlcGFsaXZlICYmIHRoaXMuY29uZmlnLnVzZU5hdGl2ZUtlZXBhbGl2ZSkge1xuICAgICAgICBpZiAoISgnc2V0S2VlcEFsaXZlJyBpbiB0aGlzLnNvY2tldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHVzZSBuYXRpdmUga2VlcGFsaXZlOiB1bnN1cHBvcnRlZCBieSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGhpcyB2ZXJzaW9uIG9mIE5vZGUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zb2NrZXQuc2V0S2VlcEFsaXZlKHRydWUsIHRoaXMuY29uZmlnLmtlZXBhbGl2ZUludGVydmFsKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVGhlIEhUVFAgQ2xpZW50IHNlZW1zIHRvIHN1YnNjcmliZSB0byBzb2NrZXQgZXJyb3IgZXZlbnRzXG4gICAgLy8gYW5kIHJlLWRpc3BhdGNoIHRoZW0gaW4gc3VjaCBhIHdheSB0aGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIGZvciB1c2VycyBvZiBvdXIgY2xpZW50LCBzbyB3ZSB3YW50IHRvIG1ha2Ugc3VyZSBub2JvZHlcbiAgICAvLyBlbHNlIGlzIGxpc3RlbmluZyBmb3IgZXJyb3IgZXZlbnRzIG9uIHRoZSBzb2NrZXQgYmVzaWRlcyB1cy5cbiAgICB0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Vycm9yJyk7XG59XG5cbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX05PUk1BTCA9IDEwMDA7XG5XZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9HT0lOR19BV0FZID0gMTAwMTtcbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX1BST1RPQ09MX0VSUk9SID0gMTAwMjtcbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX1VOUFJPQ0VTU0FCTEVfSU5QVVQgPSAxMDAzO1xuV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fUkVTRVJWRUQgPSAxMDA0OyAvLyBSZXNlcnZlZCB2YWx1ZS4gIFVuZGVmaW5lZCBtZWFuaW5nLlxuV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fTk9UX1BST1ZJREVEID0gMTAwNTsgLy8gTm90IHRvIGJlIHVzZWQgb24gdGhlIHdpcmVcbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX0FCTk9STUFMID0gMTAwNjsgLy8gTm90IHRvIGJlIHVzZWQgb24gdGhlIHdpcmVcbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX0lOVkFMSURfREFUQSA9IDEwMDc7XG5XZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9QT0xJQ1lfVklPTEFUSU9OID0gMTAwODtcbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX01FU1NBR0VfVE9PX0JJRyA9IDEwMDk7XG5XZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9FWFRFTlNJT05fUkVRVUlSRUQgPSAxMDEwO1xuV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fSU5URVJOQUxfU0VSVkVSX0VSUk9SID0gMTAxMTtcbldlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX1RMU19IQU5EU0hBS0VfRkFJTEVEID0gMTAxNTsgLy8gTm90IHRvIGJlIHVzZWQgb24gdGhlIHdpcmVcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9ERVNDUklQVElPTlMgPSB7XG4gICAgMTAwMDogJ05vcm1hbCBjb25uZWN0aW9uIGNsb3N1cmUnLFxuICAgIDEwMDE6ICdSZW1vdGUgcGVlciBpcyBnb2luZyBhd2F5JyxcbiAgICAxMDAyOiAnUHJvdG9jb2wgZXJyb3InLFxuICAgIDEwMDM6ICdVbnByb2Nlc3NhYmxlIGlucHV0JyxcbiAgICAxMDA0OiAnUmVzZXJ2ZWQnLFxuICAgIDEwMDU6ICdSZWFzb24gbm90IHByb3ZpZGVkJyxcbiAgICAxMDA2OiAnQWJub3JtYWwgY2xvc3VyZSwgbm8gZnVydGhlciBkZXRhaWwgYXZhaWxhYmxlJyxcbiAgICAxMDA3OiAnSW52YWxpZCBkYXRhIHJlY2VpdmVkJyxcbiAgICAxMDA4OiAnUG9saWN5IHZpb2xhdGlvbicsXG4gICAgMTAwOTogJ01lc3NhZ2UgdG9vIGJpZycsXG4gICAgMTAxMDogJ0V4dGVuc2lvbiByZXF1ZXN0ZWQgYnkgY2xpZW50IGlzIHJlcXVpcmVkJyxcbiAgICAxMDExOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAxMDE1OiAnVExTIEhhbmRzaGFrZSBGYWlsZWQnXG59O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUNsb3NlUmVhc29uKGNvZGUpIHtcbiAgICBpZiAoY29kZSA8IDEwMDApIHtcbiAgICAgICAgLy8gU3RhdHVzIGNvZGVzIGluIHRoZSByYW5nZSAwLTk5OSBhcmUgbm90IHVzZWRcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY29kZSA+PSAxMDAwICYmIGNvZGUgPD0gMjk5OSkge1xuICAgICAgICAvLyBDb2RlcyBmcm9tIDEwMDAgLSAyOTk5IGFyZSByZXNlcnZlZCBmb3IgdXNlIGJ5IHRoZSBwcm90b2NvbC4gIE9ubHlcbiAgICAgICAgLy8gYSBmZXcgY29kZXMgYXJlIGRlZmluZWQsIGFsbCBvdGhlcnMgYXJlIGN1cnJlbnRseSBpbGxlZ2FsLlxuICAgICAgICByZXR1cm4gWzEwMDAsIDEwMDEsIDEwMDIsIDEwMDMsIDEwMDcsIDEwMDgsIDEwMDksIDEwMTAsIDEwMTEsIDEwMTIsIDEwMTMsIDEwMTRdLmluZGV4T2YoY29kZSkgIT09IC0xO1xuICAgIH1cbiAgICBpZiAoY29kZSA+PSAzMDAwICYmIGNvZGUgPD0gMzk5OSkge1xuICAgICAgICAvLyBSZXNlcnZlZCBmb3IgdXNlIGJ5IGxpYnJhcmllcywgZnJhbWV3b3JrcywgYW5kIGFwcGxpY2F0aW9ucy5cbiAgICAgICAgLy8gU2hvdWxkIGJlIHJlZ2lzdGVyZWQgd2l0aCBJQU5BLiAgSW50ZXJwcmV0YXRpb24gb2YgdGhlc2UgY29kZXMgaXNcbiAgICAgICAgLy8gdW5kZWZpbmVkIGJ5IHRoZSBXZWJTb2NrZXQgcHJvdG9jb2wuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29kZSA+PSA0MDAwICYmIGNvZGUgPD0gNDk5OSkge1xuICAgICAgICAvLyBSZXNlcnZlZCBmb3IgcHJpdmF0ZSB1c2UuICBJbnRlcnByZXRhdGlvbiBvZiB0aGVzZSBjb2RlcyBpc1xuICAgICAgICAvLyB1bmRlZmluZWQgYnkgdGhlIFdlYlNvY2tldCBwcm90b2NvbC5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb2RlID49IDUwMDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxudXRpbC5pbmhlcml0cyhXZWJTb2NrZXRDb25uZWN0aW9uLCBFdmVudEVtaXR0ZXIpO1xuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5fYWRkU29ja2V0RXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNvY2tldC5vbignZXJyb3InLCB0aGlzLmhhbmRsZVNvY2tldEVycm9yLmJpbmQodGhpcykpO1xuICAgIHRoaXMuc29ja2V0Lm9uKCdlbmQnLCB0aGlzLmhhbmRsZVNvY2tldEVuZC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNvY2tldC5vbignY2xvc2UnLCB0aGlzLmhhbmRsZVNvY2tldENsb3NlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuc29ja2V0Lm9uKCdkcmFpbicsIHRoaXMuaGFuZGxlU29ja2V0RHJhaW4uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zb2NrZXQub24oJ3BhdXNlJywgdGhpcy5oYW5kbGVTb2NrZXRQYXVzZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNvY2tldC5vbigncmVzdW1lJywgdGhpcy5oYW5kbGVTb2NrZXRSZXN1bWUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zb2NrZXQub24oJ2RhdGEnLCB0aGlzLmhhbmRsZVNvY2tldERhdGEuYmluZCh0aGlzKSk7XG59O1xuXG4vLyBzZXQgb3IgcmVzZXQgdGhlIGtlZXBhbGl2ZSB0aW1lciB3aGVuIGRhdGEgaXMgcmVjZWl2ZWQuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRLZWVwYWxpdmVUaW1lciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlYnVnKCdzZXRLZWVwYWxpdmVUaW1lcicpO1xuICAgIGlmICghdGhpcy5jb25maWcua2VlcGFsaXZlICB8fCB0aGlzLmNvbmZpZy51c2VOYXRpdmVLZWVwYWxpdmUpIHsgcmV0dXJuOyB9XG4gICAgdGhpcy5jbGVhcktlZXBhbGl2ZVRpbWVyKCk7XG4gICAgdGhpcy5jbGVhckdyYWNlUGVyaW9kVGltZXIoKTtcbiAgICB0aGlzLl9rZWVwYWxpdmVUaW1lb3V0SUQgPSBzZXRUaW1lb3V0KHRoaXMuX2tlZXBhbGl2ZVRpbWVySGFuZGxlciwgdGhpcy5jb25maWcua2VlcGFsaXZlSW50ZXJ2YWwpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuY2xlYXJLZWVwYWxpdmVUaW1lciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9rZWVwYWxpdmVUaW1lb3V0SUQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2tlZXBhbGl2ZVRpbWVvdXRJRCk7XG4gICAgfVxufTtcblxuLy8gTm8gZGF0YSBoYXMgYmVlbiByZWNlaXZlZCB3aXRoaW4gY29uZmlnLmtlZXBhbGl2ZVRpbWVvdXQgbXMuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5oYW5kbGVLZWVwYWxpdmVUaW1lciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVLZWVwYWxpdmVUaW1lcicpO1xuICAgIHRoaXMuX2tlZXBhbGl2ZVRpbWVvdXRJRCA9IG51bGw7XG4gICAgdGhpcy5waW5nKCk7XG5cbiAgICAvLyBJZiB3ZSBhcmUgY29uZmlndXJlZCB0byBkcm9wIGNvbm5lY3Rpb25zIGlmIHRoZSBjbGllbnQgZG9lc24ndCByZXNwb25kXG4gICAgLy8gdGhlbiBzZXQgdGhlIGdyYWNlIHBlcmlvZCB0aW1lci5cbiAgICBpZiAodGhpcy5jb25maWcuZHJvcENvbm5lY3Rpb25PbktlZXBhbGl2ZVRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRHcmFjZVBlcmlvZFRpbWVyKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBPdGhlcndpc2UgcmVzZXQgdGhlIGtlZXBhbGl2ZSB0aW1lciB0byBzZW5kIHRoZSBuZXh0IHBpbmcuXG4gICAgICAgIHRoaXMuc2V0S2VlcGFsaXZlVGltZXIoKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRHcmFjZVBlcmlvZFRpbWVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGVidWcoJ3NldEdyYWNlUGVyaW9kVGltZXInKTtcbiAgICB0aGlzLmNsZWFyR3JhY2VQZXJpb2RUaW1lcigpO1xuICAgIHRoaXMuX2dyYWNlUGVyaW9kVGltZW91dElEID0gc2V0VGltZW91dCh0aGlzLl9ncmFjZVBlcmlvZFRpbWVySGFuZGxlciwgdGhpcy5jb25maWcua2VlcGFsaXZlR3JhY2VQZXJpb2QpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuY2xlYXJHcmFjZVBlcmlvZFRpbWVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2dyYWNlUGVyaW9kVGltZW91dElEKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9ncmFjZVBlcmlvZFRpbWVvdXRJRCk7XG4gICAgfVxufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuaGFuZGxlR3JhY2VQZXJpb2RUaW1lciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVHcmFjZVBlcmlvZFRpbWVyJyk7XG4gICAgLy8gSWYgdGhpcyBpcyBjYWxsZWQsIHRoZSBjbGllbnQgaGFzIG5vdCByZXNwb25kZWQgYW5kIGlzIGFzc3VtZWQgZGVhZC5cbiAgICB0aGlzLl9ncmFjZVBlcmlvZFRpbWVvdXRJRCA9IG51bGw7XG4gICAgdGhpcy5kcm9wKFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX0FCTk9STUFMLCAnUGVlciBub3QgcmVzcG9uZGluZy4nLCB0cnVlKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLmhhbmRsZVNvY2tldERhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdGhpcy5fZGVidWcoJ2hhbmRsZVNvY2tldERhdGEnKTtcbiAgICAvLyBSZXNldCB0aGUga2VlcGFsaXZlIHRpbWVyIHdoZW4gcmVjZWl2aW5nIGRhdGEgb2YgYW55IGtpbmQuXG4gICAgdGhpcy5zZXRLZWVwYWxpdmVUaW1lcigpO1xuXG4gICAgLy8gQWRkIHJlY2VpdmVkIGRhdGEgdG8gb3VyIGJ1ZmZlckxpc3QsIHdoaWNoIGVmZmljaWVudGx5IGhvbGRzIHJlY2VpdmVkXG4gICAgLy8gZGF0YSBjaHVua3MgaW4gYSBsaW5rZWQgbGlzdCBvZiBCdWZmZXIgb2JqZWN0cy5cbiAgICB0aGlzLmJ1ZmZlckxpc3Qud3JpdGUoZGF0YSk7XG5cbiAgICB0aGlzLnByb2Nlc3NSZWNlaXZlZERhdGEoKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLnByb2Nlc3NSZWNlaXZlZERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9kZWJ1ZygncHJvY2Vzc1JlY2VpdmVkRGF0YScpO1xuICAgIC8vIElmIHdlJ3JlIG5vdCBjb25uZWN0ZWQsIHdlIHNob3VsZCBpZ25vcmUgYW55IGRhdGEgcmVtYWluaW5nIG9uIHRoZSBidWZmZXIuXG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgeyByZXR1cm47IH1cblxuICAgIC8vIFJlY2VpdmluZy9wYXJzaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGhhbHRlZCB3aGVuIHBhdXNlZC5cbiAgICBpZiAodGhpcy5pbnB1dFBhdXNlZCkgeyByZXR1cm47IH1cblxuICAgIHZhciBmcmFtZSA9IHRoaXMuY3VycmVudEZyYW1lO1xuXG4gICAgLy8gV2ViU29ja2V0RnJhbWUucHJvdG90eXBlLmFkZERhdGEgcmV0dXJucyB0cnVlIGlmIGFsbCBkYXRhIG5lY2Vzc2FyeSB0b1xuICAgIC8vIHBhcnNlIHRoZSBmcmFtZSB3YXMgYXZhaWxhYmxlLiAgSXQgcmV0dXJucyBmYWxzZSBpZiB3ZSBhcmUgd2FpdGluZyBmb3JcbiAgICAvLyBtb3JlIGRhdGEgdG8gY29tZSBpbiBvbiB0aGUgd2lyZS5cbiAgICBpZiAoIWZyYW1lLmFkZERhdGEodGhpcy5idWZmZXJMaXN0KSkgeyB0aGlzLl9kZWJ1ZygnLS0gaW5zdWZmaWNpZW50IGRhdGEgZm9yIGZyYW1lJyk7IHJldHVybjsgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gSGFuZGxlIHBvc3NpYmxlIHBhcnNpbmcgZXJyb3JzXG4gICAgaWYgKGZyYW1lLnByb3RvY29sRXJyb3IpIHtcbiAgICAgICAgLy8gU29tZXRoaW5nIGJhZCBoYXBwZW5lZC4uIGdldCByaWQgb2YgdGhpcyBjbGllbnQuXG4gICAgICAgIHRoaXMuX2RlYnVnKCctLSBwcm90b2NvbCBlcnJvcicpO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5kcm9wKFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX1BST1RPQ09MX0VSUk9SLCBmcmFtZS5kcm9wUmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSBpZiAoZnJhbWUuZnJhbWVUb29MYXJnZSkge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnLS0gZnJhbWUgdG9vIGxhcmdlJyk7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fTUVTU0FHRV9UT09fQklHLCBmcmFtZS5kcm9wUmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGb3Igbm93IHNpbmNlIHdlIGRvbid0IHN1cHBvcnQgZXh0ZW5zaW9ucywgYWxsIFJTViBiaXRzIGFyZSBpbGxlZ2FsXG4gICAgaWYgKGZyYW1lLnJzdjEgfHwgZnJhbWUucnN2MiB8fCBmcmFtZS5yc3YzKSB7XG4gICAgICAgIHRoaXMuX2RlYnVnKCctLSBpbGxlZ2FsIHJzdiBmbGFnJyk7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fUFJPVE9DT0xfRVJST1IsXG4gICAgICAgICAgICAgICdVbnN1cHBvcnRlZCB1c2FnZSBvZiByc3YgYml0cyB3aXRob3V0IG5lZ290aWF0ZWQgZXh0ZW5zaW9uLicpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hc3NlbWJsZUZyYWdtZW50cykge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnLS0gZW1pdHRpbmcgZnJhbWUnKTtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHsgc2VsZi5lbWl0KCdmcmFtZScsIGZyYW1lKTsgfSk7XG4gICAgfVxuXG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHsgc2VsZi5wcm9jZXNzRnJhbWUoZnJhbWUpOyB9KTtcbiAgICBcbiAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IG5ldyBXZWJTb2NrZXRGcmFtZSh0aGlzLm1hc2tCeXRlcywgdGhpcy5mcmFtZUhlYWRlciwgdGhpcy5jb25maWcpO1xuXG4gICAgLy8gSWYgdGhlcmUncyBkYXRhIHJlbWFpbmluZywgc2NoZWR1bGUgYWRkaXRpb25hbCBwcm9jZXNzaW5nLCBidXQgeWllbGRcbiAgICAvLyBmb3Igbm93IHNvIHRoYXQgb3RoZXIgY29ubmVjdGlvbnMgaGF2ZSBhIGNoYW5jZSB0byBoYXZlIHRoZWlyIGRhdGFcbiAgICAvLyBwcm9jZXNzZWQuICBXZSB1c2Ugc2V0SW1tZWRpYXRlIGhlcmUgaW5zdGVhZCBvZiBwcm9jZXNzLm5leHRUaWNrIHRvXG4gICAgLy8gZXhwbGljaXRseSBpbmRpY2F0ZSB0aGF0IHdlIHdpc2ggZm9yIG90aGVyIEkvTyB0byBiZSBoYW5kbGVkIGZpcnN0LlxuICAgIGlmICh0aGlzLmJ1ZmZlckxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICBzZXRJbW1lZGlhdGVJbXBsKHRoaXMucmVjZWl2ZWREYXRhSGFuZGxlcik7XG4gICAgfVxufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuaGFuZGxlU29ja2V0RXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVTb2NrZXRFcnJvcjogJWonLCBlcnJvcik7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09IFNUQVRFX0NMT1NFRCkge1xuXHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdGhldHVydGxlMzIvV2ViU29ja2V0LU5vZGUvaXNzdWVzLzI4OFxuICAgICAgICB0aGlzLl9kZWJ1ZygnICAtLS0gU29ja2V0IFxcJ2Vycm9yXFwnIGFmdGVyIFxcJ2Nsb3NlXFwnJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jbG9zZVJlYXNvbkNvZGUgPSBXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9BQk5PUk1BTDtcbiAgICB0aGlzLmNsb3NlRGVzY3JpcHRpb24gPSAnU29ja2V0IEVycm9yOiAnICsgZXJyb3Iuc3lzY2FsbCArICcgJyArIGVycm9yLmNvZGU7XG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnN0YXRlID0gU1RBVEVfQ0xPU0VEO1xuICAgIHRoaXMuZnJhZ21lbnRhdGlvblNpemUgPSAwO1xuICAgIGlmICh1dGlscy5ldmVudEVtaXR0ZXJMaXN0ZW5lckNvdW50KHRoaXMsICdlcnJvcicpID4gMCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH1cbiAgICB0aGlzLnNvY2tldC5kZXN0cm95KGVycm9yKTtcbiAgICB0aGlzLl9kZWJ1Zy5wcmludE91dHB1dCgpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuaGFuZGxlU29ja2V0RW5kID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGVidWcoJ2hhbmRsZVNvY2tldEVuZDogcmVjZWl2ZWQgc29ja2V0IGVuZC4gIHN0YXRlID0gJXMnLCB0aGlzLnN0YXRlKTtcbiAgICB0aGlzLnJlY2VpdmVkRW5kID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU1RBVEVfQ0xPU0VEKSB7XG4gICAgICAgIC8vIFdoZW4gdXNpbmcgdGhlIFRMUyBtb2R1bGUsIHNvbWV0aW1lcyB0aGUgc29ja2V0IHdpbGwgZW1pdCAnZW5kJ1xuICAgICAgICAvLyBhZnRlciBpdCBlbWl0cyAnY2xvc2UnLiAgSSBkb24ndCB0aGluayB0aGF0J3MgY29ycmVjdCBiZWhhdmlvcixcbiAgICAgICAgLy8gYnV0IHdlIHNob3VsZCBkZWFsIHdpdGggaXQgZ3JhY2VmdWxseSBieSBpZ25vcmluZyBpdC5cbiAgICAgICAgdGhpcy5fZGVidWcoJyAgLS0tIFNvY2tldCBcXCdlbmRcXCcgYWZ0ZXIgXFwnY2xvc2VcXCcnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUEVFUl9SRVFVRVNURURfQ0xPU0UgJiZcbiAgICAgICAgdGhpcy5zdGF0ZSAhPT0gU1RBVEVfRU5ESU5HKSB7XG4gICAgICB0aGlzLl9kZWJ1ZygnICAtLS0gVU5FWFBFQ1RFRCBzb2NrZXQgZW5kLicpO1xuICAgICAgdGhpcy5zb2NrZXQuZW5kKCk7XG4gICAgfVxufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuaGFuZGxlU29ja2V0Q2xvc2UgPSBmdW5jdGlvbihoYWRFcnJvcikge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVTb2NrZXRDbG9zZTogcmVjZWl2ZWQgc29ja2V0IGNsb3NlJyk7XG4gICAgdGhpcy5zb2NrZXRIYWRFcnJvciA9IGhhZEVycm9yO1xuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0NMT1NFRDtcbiAgICAvLyBJZiBjbG9zZVJlYXNvbkNvZGUgaXMgc3RpbGwgc2V0IHRvIC0xIGF0IHRoaXMgcG9pbnQgdGhlbiB3ZSBtdXN0XG4gICAgLy8gbm90IGhhdmUgcmVjZWl2ZWQgYSBjbG9zZSBmcmFtZSEhXG4gICAgaWYgKHRoaXMuY2xvc2VSZWFzb25Db2RlID09PSAtMSkge1xuICAgICAgICB0aGlzLmNsb3NlUmVhc29uQ29kZSA9IFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX0FCTk9STUFMO1xuICAgICAgICB0aGlzLmNsb3NlRGVzY3JpcHRpb24gPSAnQ29ubmVjdGlvbiBkcm9wcGVkIGJ5IHJlbW90ZSBwZWVyLic7XG4gICAgfVxuICAgIHRoaXMuY2xlYXJDbG9zZVRpbWVyKCk7XG4gICAgdGhpcy5jbGVhcktlZXBhbGl2ZVRpbWVyKCk7XG4gICAgdGhpcy5jbGVhckdyYWNlUGVyaW9kVGltZXIoKTtcbiAgICBpZiAoIXRoaXMuY2xvc2VFdmVudEVtaXR0ZWQpIHtcbiAgICAgICAgdGhpcy5jbG9zZUV2ZW50RW1pdHRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2RlYnVnKCctLSBFbWl0dGluZyBXZWJTb2NrZXRDb25uZWN0aW9uIGNsb3NlIGV2ZW50Jyk7XG4gICAgICAgIHRoaXMuZW1pdCgnY2xvc2UnLCB0aGlzLmNsb3NlUmVhc29uQ29kZSwgdGhpcy5jbG9zZURlc2NyaXB0aW9uKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5oYW5kbGVTb2NrZXREcmFpbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVTb2NrZXREcmFpbjogc29ja2V0IGRyYWluIGV2ZW50Jyk7XG4gICAgdGhpcy5vdXRwdXRCdWZmZXJGdWxsID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0KCdkcmFpbicpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuaGFuZGxlU29ja2V0UGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9kZWJ1ZygnaGFuZGxlU29ja2V0UGF1c2U6IHNvY2tldCBwYXVzZSBldmVudCcpO1xuICAgIHRoaXMuaW5wdXRQYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLmhhbmRsZVNvY2tldFJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVTb2NrZXRSZXN1bWU6IHNvY2tldCByZXN1bWUgZXZlbnQnKTtcbiAgICB0aGlzLmlucHV0UGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0KCdyZXN1bWUnKTtcbiAgICB0aGlzLnByb2Nlc3NSZWNlaXZlZERhdGEoKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGVidWcoJ3BhdXNlOiBwYXVzZSByZXF1ZXN0ZWQnKTtcbiAgICB0aGlzLnNvY2tldC5wYXVzZSgpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGVidWcoJ3Jlc3VtZTogcmVzdW1lIHJlcXVlc3RlZCcpO1xuICAgIHRoaXMuc29ja2V0LnJlc3VtZSgpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbihyZWFzb25Db2RlLCBkZXNjcmlwdGlvbikge1xuICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnY2xvc2U6IEluaXRhdGluZyBjbGVhbiBXZWJTb2NrZXQgY2xvc2Ugc2VxdWVuY2UuJyk7XG4gICAgICAgIGlmICgnbnVtYmVyJyAhPT0gdHlwZW9mIHJlYXNvbkNvZGUpIHtcbiAgICAgICAgICAgIHJlYXNvbkNvZGUgPSBXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9OT1JNQUw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF2YWxpZGF0ZUNsb3NlUmVhc29uKHJlYXNvbkNvZGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb3NlIGNvZGUgJyArIHJlYXNvbkNvZGUgKyAnIGlzIG5vdCB2YWxpZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBkZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX0RFU0NSSVBUSU9OU1tyZWFzb25Db2RlXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlUmVhc29uQ29kZSA9IHJlYXNvbkNvZGU7XG4gICAgICAgIHRoaXMuY2xvc2VEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnNldENsb3NlVGltZXIoKTtcbiAgICAgICAgdGhpcy5zZW5kQ2xvc2VGcmFtZSh0aGlzLmNsb3NlUmVhc29uQ29kZSwgdGhpcy5jbG9zZURlc2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0VORElORztcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5kcm9wID0gZnVuY3Rpb24ocmVhc29uQ29kZSwgZGVzY3JpcHRpb24sIHNraXBDbG9zZUZyYW1lKSB7XG4gICAgdGhpcy5fZGVidWcoJ2Ryb3AnKTtcbiAgICBpZiAodHlwZW9mKHJlYXNvbkNvZGUpICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZWFzb25Db2RlID0gV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fUFJPVE9DT0xfRVJST1I7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZihkZXNjcmlwdGlvbikgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIElmIG5vIGRlc2NyaXB0aW9uIGlzIHByb3ZpZGVkLCB0cnkgdG8gbG9vayBvbmUgdXAgYmFzZWQgb24gdGhlXG4gICAgICAgIC8vIHNwZWNpZmllZCByZWFzb25Db2RlLlxuICAgICAgICBkZXNjcmlwdGlvbiA9IFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfREVTQ1JJUFRJT05TW3JlYXNvbkNvZGVdO1xuICAgIH1cblxuICAgIHRoaXMuX2RlYnVnKCdGb3JjZWZ1bGx5IGRyb3BwaW5nIGNvbm5lY3Rpb24uIHNraXBDbG9zZUZyYW1lOiAlcywgY29kZTogJWQsIGRlc2NyaXB0aW9uOiAlcycsXG4gICAgICAgIHNraXBDbG9zZUZyYW1lLCByZWFzb25Db2RlLCBkZXNjcmlwdGlvblxuICAgICk7XG5cbiAgICB0aGlzLmNsb3NlUmVhc29uQ29kZSA9IHJlYXNvbkNvZGU7XG4gICAgdGhpcy5jbG9zZURlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5mcmFtZVF1ZXVlID0gW107XG4gICAgdGhpcy5mcmFnbWVudGF0aW9uU2l6ZSA9IDA7XG4gICAgaWYgKCFza2lwQ2xvc2VGcmFtZSkge1xuICAgICAgICB0aGlzLnNlbmRDbG9zZUZyYW1lKHJlYXNvbkNvZGUsIGRlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnN0YXRlID0gU1RBVEVfQ0xPU0VEO1xuICAgIHRoaXMuY2xlYXJDbG9zZVRpbWVyKCk7XG4gICAgdGhpcy5jbGVhcktlZXBhbGl2ZVRpbWVyKCk7XG4gICAgdGhpcy5jbGVhckdyYWNlUGVyaW9kVGltZXIoKTtcblxuICAgIGlmICghdGhpcy5jbG9zZUV2ZW50RW1pdHRlZCkge1xuICAgICAgICB0aGlzLmNsb3NlRXZlbnRFbWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZGVidWcoJ0VtaXR0aW5nIFdlYlNvY2tldENvbm5lY3Rpb24gY2xvc2UgZXZlbnQnKTtcbiAgICAgICAgdGhpcy5lbWl0KCdjbG9zZScsIHRoaXMuY2xvc2VSZWFzb25Db2RlLCB0aGlzLmNsb3NlRGVzY3JpcHRpb24pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLl9kZWJ1ZygnRHJvcDogZGVzdHJveWluZyBzb2NrZXQnKTtcbiAgICB0aGlzLnNvY2tldC5kZXN0cm95KCk7XG59O1xuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRDbG9zZVRpbWVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGVidWcoJ3NldENsb3NlVGltZXInKTtcbiAgICB0aGlzLmNsZWFyQ2xvc2VUaW1lcigpO1xuICAgIHRoaXMuX2RlYnVnKCdTZXR0aW5nIGNsb3NlIHRpbWVyJyk7XG4gICAgdGhpcy53YWl0aW5nRm9yQ2xvc2VSZXNwb25zZSA9IHRydWU7XG4gICAgdGhpcy5jbG9zZVRpbWVyID0gc2V0VGltZW91dCh0aGlzLl9jbG9zZVRpbWVySGFuZGxlciwgdGhpcy5jbG9zZVRpbWVvdXQpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuY2xlYXJDbG9zZVRpbWVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGVidWcoJ2NsZWFyQ2xvc2VUaW1lcicpO1xuICAgIGlmICh0aGlzLmNsb3NlVGltZXIpIHtcbiAgICAgICAgdGhpcy5fZGVidWcoJ0NsZWFyaW5nIGNsb3NlIHRpbWVyJyk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsb3NlVGltZXIpO1xuICAgICAgICB0aGlzLndhaXRpbmdGb3JDbG9zZVJlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xvc2VUaW1lciA9IG51bGw7XG4gICAgfVxufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuaGFuZGxlQ2xvc2VUaW1lciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlYnVnKCdoYW5kbGVDbG9zZVRpbWVyJyk7XG4gICAgdGhpcy5jbG9zZVRpbWVyID0gbnVsbDtcbiAgICBpZiAodGhpcy53YWl0aW5nRm9yQ2xvc2VSZXNwb25zZSkge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnQ2xvc2UgcmVzcG9uc2Ugbm90IHJlY2VpdmVkIGZyb20gY2xpZW50LiAgRm9yY2luZyBzb2NrZXQgZW5kLicpO1xuICAgICAgICB0aGlzLndhaXRpbmdGb3JDbG9zZVJlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9DTE9TRUQ7XG4gICAgICAgIHRoaXMuc29ja2V0LmVuZCgpO1xuICAgIH1cbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLnByb2Nlc3NGcmFtZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XG4gICAgdGhpcy5fZGVidWcoJ3Byb2Nlc3NGcmFtZScpO1xuICAgIHRoaXMuX2RlYnVnKCcgLS0gZnJhbWU6ICVzJywgZnJhbWUpO1xuICAgIFxuICAgIC8vIEFueSBub24tY29udHJvbCBvcGNvZGUgYmVzaWRlcyAweDAwIChjb250aW51YXRpb24pIHJlY2VpdmVkIGluIHRoZVxuICAgIC8vIG1pZGRsZSBvZiBhIGZyYWdtZW50ZWQgbWVzc2FnZSBpcyBpbGxlZ2FsLlxuICAgIGlmICh0aGlzLmZyYW1lUXVldWUubGVuZ3RoICE9PSAwICYmIChmcmFtZS5vcGNvZGUgPiAweDAwICYmIGZyYW1lLm9wY29kZSA8IDB4MDgpKSB7XG4gICAgICAgIHRoaXMuZHJvcChXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9QUk9UT0NPTF9FUlJPUixcbiAgICAgICAgICAnSWxsZWdhbCBmcmFtZSBvcGNvZGUgMHgnICsgZnJhbWUub3Bjb2RlLnRvU3RyaW5nKDE2KSArICcgJyArXG4gICAgICAgICAgJ3JlY2VpdmVkIGluIG1pZGRsZSBvZiBmcmFnbWVudGVkIG1lc3NhZ2UuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2goZnJhbWUub3Bjb2RlKSB7XG4gICAgICAgIGNhc2UgMHgwMjogLy8gV2ViU29ja2V0RnJhbWUuQklOQVJZX0ZSQU1FXG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnLS0gQmluYXJ5IEZyYW1lJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5hc3NlbWJsZUZyYWdtZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZS5maW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGxldGUgc2luZ2xlLWZyYW1lIG1lc3NhZ2UgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJy0tLS0gRW1pdHRpbmcgXFwnbWVzc2FnZVxcJyBldmVudCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmluYXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmFyeURhdGE6IGZyYW1lLmJpbmFyeVBheWxvYWRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBiZWdpbm5pbmcgb2YgYSBmcmFnbWVudGVkIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZVF1ZXVlLnB1c2goZnJhbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYWdtZW50YXRpb25TaXplID0gZnJhbWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDB4MDE6IC8vIFdlYlNvY2tldEZyYW1lLlRFWFRfRlJBTUVcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCctLSBUZXh0IEZyYW1lJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5hc3NlbWJsZUZyYWdtZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZS5maW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFWYWxpZGF0aW9uLmlzVmFsaWRVVEY4KGZyYW1lLmJpbmFyeVBheWxvYWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fSU5WQUxJRF9EQVRBLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCBVVEYtOCBEYXRhIFJlY2VpdmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGxldGUgc2luZ2xlLWZyYW1lIG1lc3NhZ2UgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJy0tLS0gRW1pdHRpbmcgXFwnbWVzc2FnZVxcJyBldmVudCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndXRmOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGY4RGF0YTogZnJhbWUuYmluYXJ5UGF5bG9hZC50b1N0cmluZygndXRmOCcpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVnaW5uaW5nIG9mIGEgZnJhZ21lbnRlZCBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVRdWV1ZS5wdXNoKGZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudGF0aW9uU2l6ZSA9IGZyYW1lLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAweDAwOiAvLyBXZWJTb2NrZXRGcmFtZS5DT05USU5VQVRJT05cbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCctLSBDb250aW51YXRpb24gRnJhbWUnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFzc2VtYmxlRnJhZ21lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wKFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX1BST1RPQ09MX0VSUk9SLFxuICAgICAgICAgICAgICAgICAgICAgICdVbmV4cGVjdGVkIENvbnRpbnVhdGlvbiBGcmFtZScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudGF0aW9uU2l6ZSArPSBmcmFtZS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFnbWVudGF0aW9uU2l6ZSA+IHRoaXMubWF4UmVjZWl2ZWRNZXNzYWdlU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fTUVTU0FHRV9UT09fQklHLFxuICAgICAgICAgICAgICAgICAgICAgICdNYXhpbXVtIG1lc3NhZ2Ugc2l6ZSBleGNlZWRlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVRdWV1ZS5wdXNoKGZyYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmIChmcmFtZS5maW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5kIG9mIGZyYWdtZW50ZWQgbWVzc2FnZSwgc28gd2UgcHJvY2VzcyB0aGUgd2hvbGVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWVzc2FnZSBub3cuICBXZSBhbHNvIGhhdmUgdG8gZGVjb2RlIHRoZSB1dGYtOCBkYXRhXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB0ZXh0IGZyYW1lcyBhZnRlciBjb21iaW5pbmcgYWxsIHRoZSBmcmFnbWVudHMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBieXRlc0NvcGllZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiaW5hcnlQYXlsb2FkID0gYnVmZmVyQWxsb2NVbnNhZmUodGhpcy5mcmFnbWVudGF0aW9uU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcGNvZGUgPSB0aGlzLmZyYW1lUXVldWVbMF0ub3Bjb2RlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lUXVldWUuZm9yRWFjaChmdW5jdGlvbiAoY3VycmVudEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWUuYmluYXJ5UGF5bG9hZC5jb3B5KGJpbmFyeVBheWxvYWQsIGJ5dGVzQ29waWVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzQ29waWVkICs9IGN1cnJlbnRGcmFtZS5iaW5hcnlQYXlsb2FkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYWdtZW50YXRpb25TaXplID0gMDtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wY29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAweDAyOiAvLyBXZWJTb2NrZXRPcGNvZGUuQklOQVJZX0ZSQU1FXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmluYXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluYXJ5RGF0YTogYmluYXJ5UGF5bG9hZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAweDAxOiAvLyBXZWJTb2NrZXRPcGNvZGUuVEVYVF9GUkFNRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVmFsaWRhdGlvbi5pc1ZhbGlkVVRGOChiaW5hcnlQYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fSU5WQUxJRF9EQVRBLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIFVURi04IERhdGEgUmVjZWl2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1dGY4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmOERhdGE6IGJpbmFyeVBheWxvYWQudG9TdHJpbmcoJ3V0ZjgnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fUFJPVE9DT0xfRVJST1IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVW5leHBlY3RlZCBmaXJzdCBvcGNvZGUgaW4gZnJhZ21lbnRhdGlvbiBzZXF1ZW5jZTogMHgnICsgb3Bjb2RlLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMHgwOTogLy8gV2ViU29ja2V0RnJhbWUuUElOR1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJy0tIFBpbmcgRnJhbWUnKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3BpbmdMaXN0ZW5lckNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIGxvZ2ljIHRvIGVtaXQgdGhlIHBpbmcgZnJhbWU6IHRoaXMgaXMgb25seSBkb25lIHdoZW4gYSBsaXN0ZW5lciBpcyBrbm93biB0byBleGlzdFxuICAgICAgICAgICAgICAgIC8vIEV4cG9zZSBhIGZ1bmN0aW9uIGFsbG93aW5nIHRoZSB1c2VyIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHBpbmcoKSBiZWhhdmlvclxuICAgICAgICAgICAgICAgIHZhciBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsID0gZnVuY3Rpb24oKSB7IFxuICAgICAgICAgICAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTsgXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3BpbmcnLCBjYW5jZWwsIGZyYW1lLmJpbmFyeVBheWxvYWQpO1xuXG4gICAgICAgICAgICAgICAgLy8gT25seSBzZW5kIGEgcG9uZyBpZiB0aGUgY2xpZW50IGRpZCBub3QgaW5kaWNhdGUgdGhhdCBoZSB3b3VsZCBsaWtlIHRvIGNhbmNlbFxuICAgICAgICAgICAgICAgIGlmICghY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9uZyhmcmFtZS5iaW5hcnlQYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvbmcoZnJhbWUuYmluYXJ5UGF5bG9hZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDB4MEE6IC8vIFdlYlNvY2tldEZyYW1lLlBPTkdcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCctLSBQb25nIEZyYW1lJyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3BvbmcnLCBmcmFtZS5iaW5hcnlQYXlsb2FkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDB4MDg6IC8vIFdlYlNvY2tldEZyYW1lLkNPTk5FQ1RJT05fQ0xPU0VcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCctLSBDbG9zZSBGcmFtZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMud2FpdGluZ0ZvckNsb3NlUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBHb3QgcmVzcG9uc2UgdG8gb3VyIHJlcXVlc3QgdG8gY2xvc2UgdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICAgICAgLy8gQ2xvc2UgaXMgY29tcGxldGUsIHNvIHdlIGp1c3QgaGFuZyB1cC5cbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnLS0tLSBHb3QgY2xvc2UgcmVzcG9uc2UgZnJvbSBwZWVyLiAgQ29tcGxldGluZyBjbG9zaW5nIGhhbmRzaGFrZS4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2xvc2VUaW1lcigpO1xuICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ0ZvckNsb3NlUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfQ0xPU0VEO1xuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LmVuZCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJy0tLS0gQ2xvc2luZyBoYW5kc2hha2UgaW5pdGlhdGVkIGJ5IHBlZXIuJyk7XG4gICAgICAgICAgICAvLyBHb3QgcmVxdWVzdCBmcm9tIG90aGVyIHBhcnR5IHRvIGNsb3NlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICAvLyBTZW5kIGJhY2sgYWNrbm93bGVkZ2VtZW50IGFuZCB0aGVuIGhhbmcgdXAuXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUEVFUl9SRVFVRVNURURfQ0xPU0U7XG4gICAgICAgICAgICB2YXIgcmVzcG9uZENsb3NlUmVhc29uQ29kZTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBjbG9zZSByZWFzb24gcHJvdmlkZWQgaXMgbGVnYWwgYWNjb3JkaW5nIHRvXG4gICAgICAgICAgICAvLyB0aGUgcHJvdG9jb2wgc3BlYy4gIFByb3ZpZGluZyBubyBjbG9zZSBzdGF0dXMgaXMgbGVnYWwuXG4gICAgICAgICAgICAvLyBXZWJTb2NrZXRGcmFtZSBzZXRzIGNsb3NlU3RhdHVzIHRvIC0xIGJ5IGRlZmF1bHQsIHNvIGlmIGl0XG4gICAgICAgICAgICAvLyBpcyBzdGlsbCAtMSwgdGhlbiBubyBzdGF0dXMgd2FzIHByb3ZpZGVkLlxuICAgICAgICAgICAgaWYgKGZyYW1lLmludmFsaWRDbG9zZUZyYW1lTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlYXNvbkNvZGUgPSAxMDA1OyAvLyAxMDA1ID0gTm8gcmVhc29uIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIHJlc3BvbmRDbG9zZVJlYXNvbkNvZGUgPSBXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9QUk9UT0NPTF9FUlJPUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZyYW1lLmNsb3NlU3RhdHVzID09PSAtMSB8fCB2YWxpZGF0ZUNsb3NlUmVhc29uKGZyYW1lLmNsb3NlU3RhdHVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFzb25Db2RlID0gZnJhbWUuY2xvc2VTdGF0dXM7XG4gICAgICAgICAgICAgICAgcmVzcG9uZENsb3NlUmVhc29uQ29kZSA9IFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX05PUk1BTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFzb25Db2RlID0gZnJhbWUuY2xvc2VTdGF0dXM7XG4gICAgICAgICAgICAgICAgcmVzcG9uZENsb3NlUmVhc29uQ29kZSA9IFdlYlNvY2tldENvbm5lY3Rpb24uQ0xPU0VfUkVBU09OX1BST1RPQ09MX0VSUk9SO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHRleHR1YWwgZGVzY3JpcHRpb24gaW4gdGhlIGNsb3NlIGZyYW1lLCBleHRyYWN0IGl0LlxuICAgICAgICAgICAgaWYgKGZyYW1lLmJpbmFyeVBheWxvYWQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmICghVmFsaWRhdGlvbi5pc1ZhbGlkVVRGOChmcmFtZS5iaW5hcnlQYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fSU5WQUxJRF9EQVRBLFxuICAgICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIFVURi04IERhdGEgUmVjZWl2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGVzY3JpcHRpb24gPSBmcmFtZS5iaW5hcnlQYXlsb2FkLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGVzY3JpcHRpb24gPSBXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX0RFU0NSSVBUSU9OU1t0aGlzLmNsb3NlUmVhc29uQ29kZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZyhcbiAgICAgICAgICAgICAgICAnLS0tLS0tIFJlbW90ZSBwZWVyICVzIC0gY29kZTogJWQgLSAlcyAtIGNsb3NlIGZyYW1lIHBheWxvYWQgbGVuZ3RoOiAlZCcsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVBZGRyZXNzLCB0aGlzLmNsb3NlUmVhc29uQ29kZSxcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGVzY3JpcHRpb24sIGZyYW1lLmxlbmd0aFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCctLS0tLS0gcmVzcG9uZGluZyB0byByZW1vdGUgcGVlclxcJ3MgY2xvc2UgcmVxdWVzdC4nKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZENsb3NlRnJhbWUocmVzcG9uZENsb3NlUmVhc29uQ29kZSwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnLS0gVW5yZWNvZ25pemVkIE9wY29kZSAlZCcsIGZyYW1lLm9wY29kZSk7XG4gICAgICAgICAgICB0aGlzLmRyb3AoV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fUFJPVE9DT0xfRVJST1IsXG4gICAgICAgICAgICAgICdVbnJlY29nbml6ZWQgT3Bjb2RlOiAweCcgKyBmcmFtZS5vcGNvZGUudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhLCBjYikge1xuICAgIHRoaXMuX2RlYnVnKCdzZW5kJyk7XG4gICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkge1xuICAgICAgICB0aGlzLnNlbmRCeXRlcyhkYXRhLCBjYik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZihkYXRhWyd0b1N0cmluZyddKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnNlbmRVVEYoZGF0YSwgY2IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhIHByb3ZpZGVkIG11c3QgZWl0aGVyIGJlIGEgTm9kZSBCdWZmZXIgb3IgaW1wbGVtZW50IHRvU3RyaW5nKCknKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5zZW5kVVRGID0gZnVuY3Rpb24oZGF0YSwgY2IpIHtcbiAgICBkYXRhID0gYnVmZmVyRnJvbVN0cmluZyhkYXRhLnRvU3RyaW5nKCksICd1dGY4Jyk7XG4gICAgdGhpcy5fZGVidWcoJ3NlbmRVVEY6ICVkIGJ5dGVzJywgZGF0YS5sZW5ndGgpO1xuICAgIHZhciBmcmFtZSA9IG5ldyBXZWJTb2NrZXRGcmFtZSh0aGlzLm1hc2tCeXRlcywgdGhpcy5mcmFtZUhlYWRlciwgdGhpcy5jb25maWcpO1xuICAgIGZyYW1lLm9wY29kZSA9IDB4MDE7IC8vIFdlYlNvY2tldE9wY29kZS5URVhUX0ZSQU1FXG4gICAgZnJhbWUuYmluYXJ5UGF5bG9hZCA9IGRhdGE7XG4gICAgdGhpcy5mcmFnbWVudEFuZFNlbmQoZnJhbWUsIGNiKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLnNlbmRCeXRlcyA9IGZ1bmN0aW9uKGRhdGEsIGNiKSB7XG4gICAgdGhpcy5fZGVidWcoJ3NlbmRCeXRlcycpO1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgcGFzcyBhIE5vZGUgQnVmZmVyIG9iamVjdCB0byBXZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5zZW5kQnl0ZXMoKScpO1xuICAgIH1cbiAgICB2YXIgZnJhbWUgPSBuZXcgV2ViU29ja2V0RnJhbWUodGhpcy5tYXNrQnl0ZXMsIHRoaXMuZnJhbWVIZWFkZXIsIHRoaXMuY29uZmlnKTtcbiAgICBmcmFtZS5vcGNvZGUgPSAweDAyOyAvLyBXZWJTb2NrZXRPcGNvZGUuQklOQVJZX0ZSQU1FXG4gICAgZnJhbWUuYmluYXJ5UGF5bG9hZCA9IGRhdGE7XG4gICAgdGhpcy5mcmFnbWVudEFuZFNlbmQoZnJhbWUsIGNiKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLnBpbmcgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdGhpcy5fZGVidWcoJ3BpbmcnKTtcbiAgICB2YXIgZnJhbWUgPSBuZXcgV2ViU29ja2V0RnJhbWUodGhpcy5tYXNrQnl0ZXMsIHRoaXMuZnJhbWVIZWFkZXIsIHRoaXMuY29uZmlnKTtcbiAgICBmcmFtZS5vcGNvZGUgPSAweDA5OyAvLyBXZWJTb2NrZXRPcGNvZGUuUElOR1xuICAgIGZyYW1lLmZpbiA9IHRydWU7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHtcbiAgICAgICAgICAgIGRhdGEgPSBidWZmZXJGcm9tU3RyaW5nKGRhdGEudG9TdHJpbmcoKSwgJ3V0ZjgnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAxMjUpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdXZWJTb2NrZXQ6IERhdGEgZm9yIHBpbmcgaXMgbG9uZ2VyIHRoYW4gMTI1IGJ5dGVzLiAgVHJ1bmNhdGluZy4nKTtcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKDAsMTI0KTtcbiAgICAgICAgfVxuICAgICAgICBmcmFtZS5iaW5hcnlQYXlsb2FkID0gZGF0YTtcbiAgICB9XG4gICAgdGhpcy5zZW5kRnJhbWUoZnJhbWUpO1xufTtcblxuLy8gUG9uZyBmcmFtZXMgaGF2ZSB0byBlY2hvIGJhY2sgdGhlIGNvbnRlbnRzIG9mIHRoZSBkYXRhIHBvcnRpb24gb2YgdGhlXG4vLyBwaW5nIGZyYW1lIGV4YWN0bHksIGJ5dGUgZm9yIGJ5dGUuXG5XZWJTb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZS5wb25nID0gZnVuY3Rpb24oYmluYXJ5UGF5bG9hZCkge1xuICAgIHRoaXMuX2RlYnVnKCdwb25nJyk7XG4gICAgdmFyIGZyYW1lID0gbmV3IFdlYlNvY2tldEZyYW1lKHRoaXMubWFza0J5dGVzLCB0aGlzLmZyYW1lSGVhZGVyLCB0aGlzLmNvbmZpZyk7XG4gICAgZnJhbWUub3Bjb2RlID0gMHgwQTsgLy8gV2ViU29ja2V0T3Bjb2RlLlBPTkdcbiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGJpbmFyeVBheWxvYWQpICYmIGJpbmFyeVBheWxvYWQubGVuZ3RoID4gMTI1KSB7XG4gICAgICAgIHRoaXMuX2RlYnVnKCdXZWJTb2NrZXQ6IERhdGEgZm9yIHBvbmcgaXMgbG9uZ2VyIHRoYW4gMTI1IGJ5dGVzLiAgVHJ1bmNhdGluZy4nKTtcbiAgICAgICAgYmluYXJ5UGF5bG9hZCA9IGJpbmFyeVBheWxvYWQuc2xpY2UoMCwxMjQpO1xuICAgIH1cbiAgICBmcmFtZS5iaW5hcnlQYXlsb2FkID0gYmluYXJ5UGF5bG9hZDtcbiAgICBmcmFtZS5maW4gPSB0cnVlO1xuICAgIHRoaXMuc2VuZEZyYW1lKGZyYW1lKTtcbn07XG5cbldlYlNvY2tldENvbm5lY3Rpb24ucHJvdG90eXBlLmZyYWdtZW50QW5kU2VuZCA9IGZ1bmN0aW9uKGZyYW1lLCBjYikge1xuICAgIHRoaXMuX2RlYnVnKCdmcmFnbWVudEFuZFNlbmQnKTtcbiAgICBpZiAoZnJhbWUub3Bjb2RlID4gMHgwNykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYW5ub3QgZnJhZ21lbnQgY29udHJvbCBmcmFtZXMuJyk7XG4gICAgfVxuXG4gICAgdmFyIHRocmVzaG9sZCA9IHRoaXMuY29uZmlnLmZyYWdtZW50YXRpb25UaHJlc2hvbGQ7XG4gICAgdmFyIGxlbmd0aCA9IGZyYW1lLmJpbmFyeVBheWxvYWQubGVuZ3RoO1xuXG4gICAgLy8gU2VuZCBpbW1lZGlhdGVseSBpZiBmcmFnbWVudGF0aW9uIGlzIGRpc2FibGVkIG9yIHRoZSBtZXNzYWdlIGlzIG5vdFxuICAgIC8vIGxhcmdlciB0aGFuIHRoZSBmcmFnbWVudGF0aW9uIHRocmVzaG9sZC5cbiAgICBpZiAoIXRoaXMuY29uZmlnLmZyYWdtZW50T3V0Z29pbmdNZXNzYWdlcyB8fCAoZnJhbWUuYmluYXJ5UGF5bG9hZCAmJiBsZW5ndGggPD0gdGhyZXNob2xkKSkge1xuICAgICAgICBmcmFtZS5maW4gPSB0cnVlO1xuICAgICAgICB0aGlzLnNlbmRGcmFtZShmcmFtZSwgY2IpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhciBudW1GcmFnbWVudHMgPSBNYXRoLmNlaWwobGVuZ3RoIC8gdGhyZXNob2xkKTtcbiAgICB2YXIgc2VudEZyYWdtZW50cyA9IDA7XG4gICAgdmFyIHNlbnRDYWxsYmFjayA9IGZ1bmN0aW9uIGZyYWdtZW50U2VudENhbGxiYWNrKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFzcyBvbmx5IHRoZSBmaXJzdCBlcnJvclxuICAgICAgICAgICAgICAgIGNiKGVycik7XG4gICAgICAgICAgICAgICAgY2IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICsrc2VudEZyYWdtZW50cztcbiAgICAgICAgaWYgKChzZW50RnJhZ21lbnRzID09PSBudW1GcmFnbWVudHMpICYmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKHZhciBpPTE7IGkgPD0gbnVtRnJhZ21lbnRzOyBpKyspIHtcbiAgICAgICAgdmFyIGN1cnJlbnRGcmFtZSA9IG5ldyBXZWJTb2NrZXRGcmFtZSh0aGlzLm1hc2tCeXRlcywgdGhpcy5mcmFtZUhlYWRlciwgdGhpcy5jb25maWcpO1xuICAgICAgICBcbiAgICAgICAgLy8gY29udGludWF0aW9uIG9wY29kZSBleGNlcHQgZm9yIGZpcnN0IGZyYW1lLlxuICAgICAgICBjdXJyZW50RnJhbWUub3Bjb2RlID0gKGkgPT09IDEpID8gZnJhbWUub3Bjb2RlIDogMHgwMDtcbiAgICAgICAgXG4gICAgICAgIC8vIGZpbiBzZXQgb24gbGFzdCBmcmFtZSBvbmx5XG4gICAgICAgIGN1cnJlbnRGcmFtZS5maW4gPSAoaSA9PT0gbnVtRnJhZ21lbnRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGxlbmd0aCBpcyBsaWtlbHkgdG8gYmUgc2hvcnRlciBvbiB0aGUgbGFzdCBmcmFnbWVudFxuICAgICAgICB2YXIgY3VycmVudExlbmd0aCA9IChpID09PSBudW1GcmFnbWVudHMpID8gbGVuZ3RoIC0gKHRocmVzaG9sZCAqIChpLTEpKSA6IHRocmVzaG9sZDtcbiAgICAgICAgdmFyIHNsaWNlU3RhcnQgPSB0aHJlc2hvbGQgKiAoaS0xKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNsaWNlIHRoZSByaWdodCBwb3J0aW9uIG9mIHRoZSBvcmlnaW5hbCBwYXlsb2FkXG4gICAgICAgIGN1cnJlbnRGcmFtZS5iaW5hcnlQYXlsb2FkID0gZnJhbWUuYmluYXJ5UGF5bG9hZC5zbGljZShzbGljZVN0YXJ0LCBzbGljZVN0YXJ0ICsgY3VycmVudExlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNlbmRGcmFtZShjdXJyZW50RnJhbWUsIHNlbnRDYWxsYmFjayk7XG4gICAgfVxufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuc2VuZENsb3NlRnJhbWUgPSBmdW5jdGlvbihyZWFzb25Db2RlLCBkZXNjcmlwdGlvbiwgY2IpIHtcbiAgICBpZiAodHlwZW9mKHJlYXNvbkNvZGUpICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZWFzb25Db2RlID0gV2ViU29ja2V0Q29ubmVjdGlvbi5DTE9TRV9SRUFTT05fTk9STUFMO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLl9kZWJ1Zygnc2VuZENsb3NlRnJhbWUgc3RhdGU6ICVzLCByZWFzb25Db2RlOiAlZCwgZGVzY3JpcHRpb246ICVzJywgdGhpcy5zdGF0ZSwgcmVhc29uQ29kZSwgZGVzY3JpcHRpb24pO1xuICAgIFxuICAgIGlmICh0aGlzLnN0YXRlICE9PSBTVEFURV9PUEVOICYmIHRoaXMuc3RhdGUgIT09IFNUQVRFX1BFRVJfUkVRVUVTVEVEX0NMT1NFKSB7IHJldHVybjsgfVxuICAgIFxuICAgIHZhciBmcmFtZSA9IG5ldyBXZWJTb2NrZXRGcmFtZSh0aGlzLm1hc2tCeXRlcywgdGhpcy5mcmFtZUhlYWRlciwgdGhpcy5jb25maWcpO1xuICAgIGZyYW1lLmZpbiA9IHRydWU7XG4gICAgZnJhbWUub3Bjb2RlID0gMHgwODsgLy8gV2ViU29ja2V0T3Bjb2RlLkNPTk5FQ1RJT05fQ0xPU0VcbiAgICBmcmFtZS5jbG9zZVN0YXR1cyA9IHJlYXNvbkNvZGU7XG4gICAgaWYgKHR5cGVvZihkZXNjcmlwdGlvbikgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGZyYW1lLmJpbmFyeVBheWxvYWQgPSBidWZmZXJGcm9tU3RyaW5nKGRlc2NyaXB0aW9uLCAndXRmOCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNlbmRGcmFtZShmcmFtZSwgY2IpO1xuICAgIHRoaXMuc29ja2V0LmVuZCgpO1xufTtcblxuV2ViU29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUuc2VuZEZyYW1lID0gZnVuY3Rpb24oZnJhbWUsIGNiKSB7XG4gICAgdGhpcy5fZGVidWcoJ3NlbmRGcmFtZScpO1xuICAgIGZyYW1lLm1hc2sgPSB0aGlzLm1hc2tPdXRnb2luZ1BhY2tldHM7XG4gICAgdmFyIGZsdXNoZWQgPSB0aGlzLnNvY2tldC53cml0ZShmcmFtZS50b0J1ZmZlcigpLCBjYik7XG4gICAgdGhpcy5vdXRwdXRCdWZmZXJGdWxsID0gIWZsdXNoZWQ7XG4gICAgcmV0dXJuIGZsdXNoZWQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldENvbm5lY3Rpb247XG5cblxuXG5mdW5jdGlvbiBpbnN0cnVtZW50U29ja2V0Rm9yRGVidWdnaW5nKGNvbm5lY3Rpb24sIHNvY2tldCkge1xuICAgIC8qIGpzaGludCBsb29wZnVuYzogdHJ1ZSAqL1xuICAgIGlmICghY29ubmVjdGlvbi5fZGVidWcuZW5hYmxlZCkgeyByZXR1cm47IH1cbiAgICBcbiAgICB2YXIgb3JpZ2luYWxTb2NrZXRFbWl0ID0gc29ja2V0LmVtaXQ7XG4gICAgc29ja2V0LmVtaXQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb25uZWN0aW9uLl9kZWJ1ZygnfHx8IFNvY2tldCBFdmVudCAgXFwnJXNcXCcnLCBldmVudCk7XG4gICAgICAgIG9yaWdpbmFsU29ja2V0RW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgXG4gICAgZm9yICh2YXIga2V5IGluIHNvY2tldCkge1xuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mKHNvY2tldFtrZXldKSkgeyBjb250aW51ZTsgfVxuICAgICAgICBpZiAoWydlbWl0J10uaW5kZXhPZihrZXkpICE9PSAtMSkgeyBjb250aW51ZTsgfVxuICAgICAgICAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luYWwgPSBzb2NrZXRba2V5XTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdvbicpIHtcbiAgICAgICAgICAgICAgICBzb2NrZXRba2V5XSA9IGZ1bmN0aW9uIHByb3h5TWV0aG9kX19FdmVudEVtaXR0ZXJfX09uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl9kZWJ1ZygnfHx8IFNvY2tldCBtZXRob2QgY2FsbGVkOiAgJXMgKCVzKScsIGtleSwgYXJndW1lbnRzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb2NrZXRba2V5XSA9IGZ1bmN0aW9uIHByb3h5TWV0aG9kKCkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uX2RlYnVnKCd8fHwgU29ja2V0IG1ldGhvZCBjYWxsZWQ6ICAlcycsIGtleSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KShrZXkpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogRGV0ZWN0IEVsZWN0cm9uIHJlbmRlcmVyIHByb2Nlc3MsIHdoaWNoIGlzIG5vZGUsIGJ1dCB3ZSBzaG91bGRcbiAqIHRyZWF0IGFzIGEgYnJvd3Nlci5cbiAqL1xuXG5pZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vYnJvd3Nlci5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL25vZGUuanMnKTtcbn1cbiIsIlxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG4gKiBpbXBsZW1lbnRhdGlvbnMgb2YgYGRlYnVnKClgLlxuICpcbiAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnWydkZWZhdWx0J10gPSBjcmVhdGVEZWJ1ZztcbmV4cG9ydHMuY29lcmNlID0gY29lcmNlO1xuZXhwb3J0cy5kaXNhYmxlID0gZGlzYWJsZTtcbmV4cG9ydHMuZW5hYmxlID0gZW5hYmxlO1xuZXhwb3J0cy5lbmFibGVkID0gZW5hYmxlZDtcbmV4cG9ydHMuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXG4vKipcbiAqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuICovXG5cbmV4cG9ydHMubmFtZXMgPSBbXTtcbmV4cG9ydHMuc2tpcHMgPSBbXTtcblxuLyoqXG4gKiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG4gKlxuICogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0dGVycyA9IHt9O1xuXG4vKipcbiAqIFByZXZpb3VzIGxvZyB0aW1lc3RhbXAuXG4gKi9cblxudmFyIHByZXZUaW1lO1xuXG4vKipcbiAqIFNlbGVjdCBhIGNvbG9yLlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG4gIHZhciBoYXNoID0gMCwgaTtcblxuICBmb3IgKGkgaW4gbmFtZXNwYWNlKSB7XG4gICAgaGFzaCAgPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gIH1cblxuICByZXR1cm4gZXhwb3J0cy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblxuICBmdW5jdGlvbiBkZWJ1ZygpIHtcbiAgICAvLyBkaXNhYmxlZD9cbiAgICBpZiAoIWRlYnVnLmVuYWJsZWQpIHJldHVybjtcblxuICAgIHZhciBzZWxmID0gZGVidWc7XG5cbiAgICAvLyBzZXQgYGRpZmZgIHRpbWVzdGFtcFxuICAgIHZhciBjdXJyID0gK25ldyBEYXRlKCk7XG4gICAgdmFyIG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcbiAgICBzZWxmLmRpZmYgPSBtcztcbiAgICBzZWxmLnByZXYgPSBwcmV2VGltZTtcbiAgICBzZWxmLmN1cnIgPSBjdXJyO1xuICAgIHByZXZUaW1lID0gY3VycjtcblxuICAgIC8vIHR1cm4gdGhlIGBhcmd1bWVudHNgIGludG8gYSBwcm9wZXIgQXJyYXlcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuXG4gICAgYXJnc1swXSA9IGV4cG9ydHMuY29lcmNlKGFyZ3NbMF0pO1xuXG4gICAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgYXJnc1swXSkge1xuICAgICAgLy8gYW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cbiAgICAgIGFyZ3MudW5zaGlmdCgnJU8nKTtcbiAgICB9XG5cbiAgICAvLyBhcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgYXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIGZ1bmN0aW9uKG1hdGNoLCBmb3JtYXQpIHtcbiAgICAgIC8vIGlmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcbiAgICAgIGlmIChtYXRjaCA9PT0gJyUlJykgcmV0dXJuIG1hdGNoO1xuICAgICAgaW5kZXgrKztcbiAgICAgIHZhciBmb3JtYXR0ZXIgPSBleHBvcnRzLmZvcm1hdHRlcnNbZm9ybWF0XTtcbiAgICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZm9ybWF0dGVyKSB7XG4gICAgICAgIHZhciB2YWwgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgbWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG4gICAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcbiAgICAgICAgYXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBpbmRleC0tO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuXG4gICAgLy8gYXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcbiAgICBleHBvcnRzLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuICAgIHZhciBsb2dGbiA9IGRlYnVnLmxvZyB8fCBleHBvcnRzLmxvZyB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgIGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICB9XG5cbiAgZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICBkZWJ1Zy5lbmFibGVkID0gZXhwb3J0cy5lbmFibGVkKG5hbWVzcGFjZSk7XG4gIGRlYnVnLnVzZUNvbG9ycyA9IGV4cG9ydHMudXNlQ29sb3JzKCk7XG4gIGRlYnVnLmNvbG9yID0gc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblxuICAvLyBlbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMuaW5pdCkge1xuICAgIGV4cG9ydHMuaW5pdChkZWJ1Zyk7XG4gIH1cblxuICByZXR1cm4gZGVidWc7XG59XG5cbi8qKlxuICogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuICogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuICBleHBvcnRzLnNhdmUobmFtZXNwYWNlcyk7XG5cbiAgZXhwb3J0cy5uYW1lcyA9IFtdO1xuICBleHBvcnRzLnNraXBzID0gW107XG5cbiAgdmFyIHNwbGl0ID0gKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJyA/IG5hbWVzcGFjZXMgOiAnJykuc3BsaXQoL1tcXHMsXSsvKTtcbiAgdmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKCFzcGxpdFtpXSkgY29udGludWU7IC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG4gICAgbmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG4gICAgaWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuICAgICAgZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgZXhwb3J0cy5lbmFibGUoJycpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG4gIHZhciBpLCBsZW47XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENvZXJjZSBgdmFsYC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqIEByZXR1cm4ge01peGVkfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gIHJldHVybiB2YWw7XG59XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgQ29weXJpZ2h0IDIwMTAtMjAxNSBCcmlhbiBNY0tlbHZleS5cbiAqXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbnZhciBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBXZWJTb2NrZXRDb25uZWN0aW9uID0gcmVxdWlyZSgnLi9XZWJTb2NrZXRDb25uZWN0aW9uJyk7XG5cbnZhciBoZWFkZXJWYWx1ZVNwbGl0UmVnRXhwID0gLyxcXHMqLztcbnZhciBoZWFkZXJQYXJhbVNwbGl0UmVnRXhwID0gLztcXHMqLztcbnZhciBoZWFkZXJTYW5pdGl6ZVJlZ0V4cCA9IC9bXFxyXFxuXS9nO1xudmFyIHhGb3J3YXJkZWRGb3JTZXBhcmF0b3JSZWdFeHAgPSAvLFxccyovO1xudmFyIHNlcGFyYXRvcnMgPSBbXG4gICAgJygnLCAnKScsICc8JywgJz4nLCAnQCcsXG4gICAgJywnLCAnOycsICc6JywgJ1xcXFwnLCAnXFxcIicsXG4gICAgJy8nLCAnWycsICddJywgJz8nLCAnPScsXG4gICAgJ3snLCAnfScsICcgJywgU3RyaW5nLmZyb21DaGFyQ29kZSg5KVxuXTtcbnZhciBjb250cm9sQ2hhcnMgPSBbU3RyaW5nLmZyb21DaGFyQ29kZSgxMjcpIC8qIERFTCAqL107XG5mb3IgKHZhciBpPTA7IGkgPCAzMTsgaSArKykge1xuICAgIC8qIFVTLUFTQ0lJIENvbnRyb2wgQ2hhcmFjdGVycyAqL1xuICAgIGNvbnRyb2xDaGFycy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkpO1xufVxuXG52YXIgY29va2llTmFtZVZhbGlkYXRlUmVnRXggPSAvKFtcXHgwMC1cXHgyMFxceDIyXFx4MjhcXHgyOVxceDJjXFx4MmZcXHgzYS1cXHgzZlxceDQwXFx4NWItXFx4NWVcXHg3YlxceDdkXFx4N2ZdKS87XG52YXIgY29va2llVmFsdWVWYWxpZGF0ZVJlZ0V4ID0gL1teXFx4MjFcXHgyMy1cXHgyYlxceDJkLVxceDNhXFx4M2MtXFx4NWJcXHg1ZC1cXHg3ZV0vO1xudmFyIGNvb2tpZVZhbHVlRFF1b3RlVmFsaWRhdGVSZWdFeCA9IC9eXCJbXlwiXSpcIiQvO1xudmFyIGNvbnRyb2xDaGFyc0FuZFNlbWljb2xvblJlZ0V4ID0gL1tcXHgwMC1cXHgyMFxceDNiXS9nO1xuXG52YXIgY29va2llU2VwYXJhdG9yUmVnRXggPSAvWzssXSAqLztcblxudmFyIGh0dHBTdGF0dXNEZXNjcmlwdGlvbnMgPSB7XG4gICAgMTAwOiAnQ29udGludWUnLFxuICAgIDEwMTogJ1N3aXRjaGluZyBQcm90b2NvbHMnLFxuICAgIDIwMDogJ09LJyxcbiAgICAyMDE6ICdDcmVhdGVkJyxcbiAgICAyMDM6ICdOb24tQXV0aG9yaXRhdGl2ZSBJbmZvcm1hdGlvbicsXG4gICAgMjA0OiAnTm8gQ29udGVudCcsXG4gICAgMjA1OiAnUmVzZXQgQ29udGVudCcsXG4gICAgMjA2OiAnUGFydGlhbCBDb250ZW50JyxcbiAgICAzMDA6ICdNdWx0aXBsZSBDaG9pY2VzJyxcbiAgICAzMDE6ICdNb3ZlZCBQZXJtYW5lbnRseScsXG4gICAgMzAyOiAnRm91bmQnLFxuICAgIDMwMzogJ1NlZSBPdGhlcicsXG4gICAgMzA0OiAnTm90IE1vZGlmaWVkJyxcbiAgICAzMDU6ICdVc2UgUHJveHknLFxuICAgIDMwNzogJ1RlbXBvcmFyeSBSZWRpcmVjdCcsXG4gICAgNDAwOiAnQmFkIFJlcXVlc3QnLFxuICAgIDQwMTogJ1VuYXV0aG9yaXplZCcsXG4gICAgNDAyOiAnUGF5bWVudCBSZXF1aXJlZCcsXG4gICAgNDAzOiAnRm9yYmlkZGVuJyxcbiAgICA0MDQ6ICdOb3QgRm91bmQnLFxuICAgIDQwNjogJ05vdCBBY2NlcHRhYmxlJyxcbiAgICA0MDc6ICdQcm94eSBBdXRob3JpemF0aW9uIFJlcXVpcmVkJyxcbiAgICA0MDg6ICdSZXF1ZXN0IFRpbWVvdXQnLFxuICAgIDQwOTogJ0NvbmZsaWN0JyxcbiAgICA0MTA6ICdHb25lJyxcbiAgICA0MTE6ICdMZW5ndGggUmVxdWlyZWQnLFxuICAgIDQxMjogJ1ByZWNvbmRpdGlvbiBGYWlsZWQnLFxuICAgIDQxMzogJ1JlcXVlc3QgRW50aXR5IFRvbyBMb25nJyxcbiAgICA0MTQ6ICdSZXF1ZXN0LVVSSSBUb28gTG9uZycsXG4gICAgNDE1OiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsXG4gICAgNDE2OiAnUmVxdWVzdGVkIFJhbmdlIE5vdCBTYXRpc2ZpYWJsZScsXG4gICAgNDE3OiAnRXhwZWN0YXRpb24gRmFpbGVkJyxcbiAgICA0MjY6ICdVcGdyYWRlIFJlcXVpcmVkJyxcbiAgICA1MDA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLFxuICAgIDUwMTogJ05vdCBJbXBsZW1lbnRlZCcsXG4gICAgNTAyOiAnQmFkIEdhdGV3YXknLFxuICAgIDUwMzogJ1NlcnZpY2UgVW5hdmFpbGFibGUnLFxuICAgIDUwNDogJ0dhdGV3YXkgVGltZW91dCcsXG4gICAgNTA1OiAnSFRUUCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWQnXG59O1xuXG5mdW5jdGlvbiBXZWJTb2NrZXRSZXF1ZXN0KHNvY2tldCwgaHR0cFJlcXVlc3QsIHNlcnZlckNvbmZpZykge1xuICAgIC8vIFN1cGVyY2xhc3MgQ29uc3RydWN0b3JcbiAgICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgIHRoaXMuaHR0cFJlcXVlc3QgPSBodHRwUmVxdWVzdDtcbiAgICB0aGlzLnJlc291cmNlID0gaHR0cFJlcXVlc3QudXJsO1xuICAgIHRoaXMucmVtb3RlQWRkcmVzcyA9IHNvY2tldC5yZW1vdGVBZGRyZXNzO1xuICAgIHRoaXMucmVtb3RlQWRkcmVzc2VzID0gW3RoaXMucmVtb3RlQWRkcmVzc107XG4gICAgdGhpcy5zZXJ2ZXJDb25maWcgPSBzZXJ2ZXJDb25maWc7XG4gICAgXG4gICAgLy8gV2F0Y2ggZm9yIHRoZSB1bmRlcmx5aW5nIFRDUCBzb2NrZXQgY2xvc2luZyBiZWZvcmUgd2UgY2FsbCBhY2NlcHRcbiAgICB0aGlzLl9zb2NrZXRJc0Nsb3NpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9zb2NrZXRDbG9zZUhhbmRsZXIgPSB0aGlzLl9oYW5kbGVTb2NrZXRDbG9zZUJlZm9yZUFjY2VwdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc29ja2V0Lm9uKCdlbmQnLCB0aGlzLl9zb2NrZXRDbG9zZUhhbmRsZXIpO1xuICAgIHRoaXMuc29ja2V0Lm9uKCdjbG9zZScsIHRoaXMuX3NvY2tldENsb3NlSGFuZGxlcik7XG4gICAgXG4gICAgdGhpcy5fcmVzb2x2ZWQgPSBmYWxzZTtcbn1cblxudXRpbC5pbmhlcml0cyhXZWJTb2NrZXRSZXF1ZXN0LCBFdmVudEVtaXR0ZXIpO1xuXG5XZWJTb2NrZXRSZXF1ZXN0LnByb3RvdHlwZS5yZWFkSGFuZHNoYWtlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciByZXF1ZXN0ID0gdGhpcy5odHRwUmVxdWVzdDtcblxuICAgIC8vIERlY29kZSBVUkxcbiAgICB0aGlzLnJlc291cmNlVVJMID0gdXJsLnBhcnNlKHRoaXMucmVzb3VyY2UsIHRydWUpO1xuXG4gICAgdGhpcy5ob3N0ID0gcmVxdWVzdC5oZWFkZXJzWydob3N0J107XG4gICAgaWYgKCF0aGlzLmhvc3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgbXVzdCBwcm92aWRlIGEgSG9zdCBoZWFkZXIuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5rZXkgPSByZXF1ZXN0LmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQta2V5J107XG4gICAgaWYgKCF0aGlzLmtleSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBtdXN0IHByb3ZpZGUgYSB2YWx1ZSBmb3IgU2VjLVdlYlNvY2tldC1LZXkuJyk7XG4gICAgfVxuXG4gICAgdGhpcy53ZWJTb2NrZXRWZXJzaW9uID0gcGFyc2VJbnQocmVxdWVzdC5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXZlcnNpb24nXSwgMTApO1xuXG4gICAgaWYgKCF0aGlzLndlYlNvY2tldFZlcnNpb24gfHwgaXNOYU4odGhpcy53ZWJTb2NrZXRWZXJzaW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBtdXN0IHByb3ZpZGUgYSB2YWx1ZSBmb3IgU2VjLVdlYlNvY2tldC1WZXJzaW9uLicpO1xuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy53ZWJTb2NrZXRWZXJzaW9uKSB7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHdlYnNvY2tldCBjbGllbnQgdmVyc2lvbjogJyArIHRoaXMud2ViU29ja2V0VmVyc2lvbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT25seSB2ZXJzaW9ucyA4IGFuZCAxMyBhcmUgc3VwcG9ydGVkLicpO1xuICAgICAgICAgICAgZS5odHRwQ29kZSA9IDQyNjtcbiAgICAgICAgICAgIGUuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICAnU2VjLVdlYlNvY2tldC1WZXJzaW9uJzogJzEzJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2ViU29ja2V0VmVyc2lvbiA9PT0gMTMpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSByZXF1ZXN0LmhlYWRlcnNbJ29yaWdpbiddO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLndlYlNvY2tldFZlcnNpb24gPT09IDgpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSByZXF1ZXN0LmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtb3JpZ2luJ107XG4gICAgfVxuXG4gICAgLy8gUHJvdG9jb2wgaXMgb3B0aW9uYWwuXG4gICAgdmFyIHByb3RvY29sU3RyaW5nID0gcmVxdWVzdC5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXByb3RvY29sJ107XG4gICAgdGhpcy5wcm90b2NvbEZ1bGxDYXNlTWFwID0ge307XG4gICAgdGhpcy5yZXF1ZXN0ZWRQcm90b2NvbHMgPSBbXTtcbiAgICBpZiAocHJvdG9jb2xTdHJpbmcpIHtcbiAgICAgICAgdmFyIHJlcXVlc3RlZFByb3RvY29sc0Z1bGxDYXNlID0gcHJvdG9jb2xTdHJpbmcuc3BsaXQoaGVhZGVyVmFsdWVTcGxpdFJlZ0V4cCk7XG4gICAgICAgIHJlcXVlc3RlZFByb3RvY29sc0Z1bGxDYXNlLmZvckVhY2goZnVuY3Rpb24ocHJvdG9jb2wpIHtcbiAgICAgICAgICAgIHZhciBsY1Byb3RvY29sID0gcHJvdG9jb2wudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHNlbGYucmVxdWVzdGVkUHJvdG9jb2xzLnB1c2gobGNQcm90b2NvbCk7XG4gICAgICAgICAgICBzZWxmLnByb3RvY29sRnVsbENhc2VNYXBbbGNQcm90b2NvbF0gPSBwcm90b2NvbDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNlcnZlckNvbmZpZy5pZ25vcmVYRm9yd2FyZGVkRm9yICYmXG4gICAgICAgIHJlcXVlc3QuaGVhZGVyc1sneC1mb3J3YXJkZWQtZm9yJ10pIHtcbiAgICAgICAgdmFyIGltbWVkaWF0ZVBlZXJJUCA9IHRoaXMucmVtb3RlQWRkcmVzcztcbiAgICAgICAgdGhpcy5yZW1vdGVBZGRyZXNzZXMgPSByZXF1ZXN0LmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddXG4gICAgICAgICAgICAuc3BsaXQoeEZvcndhcmRlZEZvclNlcGFyYXRvclJlZ0V4cCk7XG4gICAgICAgIHRoaXMucmVtb3RlQWRkcmVzc2VzLnB1c2goaW1tZWRpYXRlUGVlcklQKTtcbiAgICAgICAgdGhpcy5yZW1vdGVBZGRyZXNzID0gdGhpcy5yZW1vdGVBZGRyZXNzZXNbMF07XG4gICAgfVxuXG4gICAgLy8gRXh0ZW5zaW9ucyBhcmUgb3B0aW9uYWwuXG4gICAgdmFyIGV4dGVuc2lvbnNTdHJpbmcgPSByZXF1ZXN0LmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtZXh0ZW5zaW9ucyddO1xuICAgIHRoaXMucmVxdWVzdGVkRXh0ZW5zaW9ucyA9IHRoaXMucGFyc2VFeHRlbnNpb25zKGV4dGVuc2lvbnNTdHJpbmcpO1xuXG4gICAgLy8gQ29va2llcyBhcmUgb3B0aW9uYWxcbiAgICB2YXIgY29va2llU3RyaW5nID0gcmVxdWVzdC5oZWFkZXJzWydjb29raWUnXTtcbiAgICB0aGlzLmNvb2tpZXMgPSB0aGlzLnBhcnNlQ29va2llcyhjb29raWVTdHJpbmcpO1xufTtcblxuV2ViU29ja2V0UmVxdWVzdC5wcm90b3R5cGUucGFyc2VFeHRlbnNpb25zID0gZnVuY3Rpb24oZXh0ZW5zaW9uc1N0cmluZykge1xuICAgIGlmICghZXh0ZW5zaW9uc1N0cmluZyB8fCBleHRlbnNpb25zU3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHZhciBleHRlbnNpb25zID0gZXh0ZW5zaW9uc1N0cmluZy50b0xvY2FsZUxvd2VyQ2FzZSgpLnNwbGl0KGhlYWRlclZhbHVlU3BsaXRSZWdFeHApO1xuICAgIGV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24sIGluZGV4LCBhcnJheSkge1xuICAgICAgICB2YXIgcGFyYW1zID0gZXh0ZW5zaW9uLnNwbGl0KGhlYWRlclBhcmFtU3BsaXRSZWdFeHApO1xuICAgICAgICB2YXIgZXh0ZW5zaW9uTmFtZSA9IHBhcmFtc1swXTtcbiAgICAgICAgdmFyIGV4dGVuc2lvblBhcmFtcyA9IHBhcmFtcy5zbGljZSgxKTtcbiAgICAgICAgZXh0ZW5zaW9uUGFyYW1zLmZvckVhY2goZnVuY3Rpb24ocmF3UGFyYW0sIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgdmFyIGFyciA9IHJhd1BhcmFtLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICB2YXIgb2JqID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGFyclswXSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogYXJyWzFdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxLCBvYmopO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgIG5hbWU6IGV4dGVuc2lvbk5hbWUsXG4gICAgICAgICAgICBwYXJhbXM6IGV4dGVuc2lvblBhcmFtc1xuICAgICAgICB9O1xuICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEsIG9iaik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGV4dGVuc2lvbnM7XG59O1xuXG4vLyBUaGlzIGZ1bmN0aW9uIGFkYXB0ZWQgZnJvbSBub2RlLWNvb2tpZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3NodHlsbWFuL25vZGUtY29va2llXG5XZWJTb2NrZXRSZXF1ZXN0LnByb3RvdHlwZS5wYXJzZUNvb2tpZXMgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAvLyBTYW5pdHkgQ2hlY2tcbiAgICBpZiAoIXN0ciB8fCB0eXBlb2Yoc3RyKSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBjb29raWVzID0gW107XG4gICAgdmFyIHBhaXJzID0gc3RyLnNwbGl0KGNvb2tpZVNlcGFyYXRvclJlZ0V4KTtcblxuICAgIHBhaXJzLmZvckVhY2goZnVuY3Rpb24ocGFpcikge1xuICAgICAgICB2YXIgZXFfaWR4ID0gcGFpci5pbmRleE9mKCc9Jyk7XG4gICAgICAgIGlmIChlcV9pZHggPT09IC0xKSB7XG4gICAgICAgICAgICBjb29raWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IHBhaXIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGtleSA9IHBhaXIuc3Vic3RyKDAsIGVxX2lkeCkudHJpbSgpO1xuICAgICAgICB2YXIgdmFsID0gcGFpci5zdWJzdHIoKytlcV9pZHgsIHBhaXIubGVuZ3RoKS50cmltKCk7XG5cbiAgICAgICAgLy8gcXVvdGVkIHZhbHVlc1xuICAgICAgICBpZiAoJ1wiJyA9PT0gdmFsWzBdKSB7XG4gICAgICAgICAgICB2YWwgPSB2YWwuc2xpY2UoMSwgLTEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29va2llcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBkZWNvZGVVUklDb21wb25lbnQodmFsKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb29raWVzO1xufTtcblxuV2ViU29ja2V0UmVxdWVzdC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24oYWNjZXB0ZWRQcm90b2NvbCwgYWxsb3dlZE9yaWdpbiwgY29va2llcykge1xuICAgIHRoaXMuX3ZlcmlmeVJlc29sdXRpb24oKTtcbiAgICBcbiAgICAvLyBUT0RPOiBIYW5kbGUgZXh0ZW5zaW9uc1xuXG4gICAgdmFyIHByb3RvY29sRnVsbENhc2U7XG5cbiAgICBpZiAoYWNjZXB0ZWRQcm90b2NvbCkge1xuICAgICAgICBwcm90b2NvbEZ1bGxDYXNlID0gdGhpcy5wcm90b2NvbEZ1bGxDYXNlTWFwW2FjY2VwdGVkUHJvdG9jb2wudG9Mb2NhbGVMb3dlckNhc2UoKV07XG4gICAgICAgIGlmICh0eXBlb2YocHJvdG9jb2xGdWxsQ2FzZSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwcm90b2NvbEZ1bGxDYXNlID0gYWNjZXB0ZWRQcm90b2NvbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJvdG9jb2xGdWxsQ2FzZSA9IGFjY2VwdGVkUHJvdG9jb2w7XG4gICAgfVxuICAgIHRoaXMucHJvdG9jb2xGdWxsQ2FzZU1hcCA9IG51bGw7XG5cbiAgICAvLyBDcmVhdGUga2V5IHZhbGlkYXRpb24gaGFzaFxuICAgIHZhciBzaGExID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTEnKTtcbiAgICBzaGExLnVwZGF0ZSh0aGlzLmtleSArICcyNThFQUZBNS1FOTE0LTQ3REEtOTVDQS1DNUFCMERDODVCMTEnKTtcbiAgICB2YXIgYWNjZXB0S2V5ID0gc2hhMS5kaWdlc3QoJ2Jhc2U2NCcpO1xuXG4gICAgdmFyIHJlc3BvbnNlID0gJ0hUVFAvMS4xIDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzXFxyXFxuJyArXG4gICAgICAgICAgICAgICAgICAgJ1VwZ3JhZGU6IHdlYnNvY2tldFxcclxcbicgK1xuICAgICAgICAgICAgICAgICAgICdDb25uZWN0aW9uOiBVcGdyYWRlXFxyXFxuJyArXG4gICAgICAgICAgICAgICAgICAgJ1NlYy1XZWJTb2NrZXQtQWNjZXB0OiAnICsgYWNjZXB0S2V5ICsgJ1xcclxcbic7XG5cbiAgICBpZiAocHJvdG9jb2xGdWxsQ2FzZSkge1xuICAgICAgICAvLyB2YWxpZGF0ZSBwcm90b2NvbFxuICAgICAgICBmb3IgKHZhciBpPTA7IGkgPCBwcm90b2NvbEZ1bGxDYXNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBwcm90b2NvbEZ1bGxDYXNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB2YXIgY2hhcmFjdGVyID0gcHJvdG9jb2xGdWxsQ2FzZS5jaGFyQXQoaSk7XG4gICAgICAgICAgICBpZiAoY2hhckNvZGUgPCAweDIxIHx8IGNoYXJDb2RlID4gMHg3RSB8fCBzZXBhcmF0b3JzLmluZGV4T2YoY2hhcmFjdGVyKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCg1MDApO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSWxsZWdhbCBjaGFyYWN0ZXIgXCInICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyYWN0ZXIpICsgJ1wiIGluIHN1YnByb3RvY29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RlZFByb3RvY29scy5pbmRleE9mKGFjY2VwdGVkUHJvdG9jb2wpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3BlY2lmaWVkIHByb3RvY29sIHdhcyBub3QgcmVxdWVzdGVkIGJ5IHRoZSBjbGllbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90b2NvbEZ1bGxDYXNlID0gcHJvdG9jb2xGdWxsQ2FzZS5yZXBsYWNlKGhlYWRlclNhbml0aXplUmVnRXhwLCAnJyk7XG4gICAgICAgIHJlc3BvbnNlICs9ICdTZWMtV2ViU29ja2V0LVByb3RvY29sOiAnICsgcHJvdG9jb2xGdWxsQ2FzZSArICdcXHJcXG4nO1xuICAgIH1cbiAgICB0aGlzLnJlcXVlc3RlZFByb3RvY29scyA9IG51bGw7XG5cbiAgICBpZiAoYWxsb3dlZE9yaWdpbikge1xuICAgICAgICBhbGxvd2VkT3JpZ2luID0gYWxsb3dlZE9yaWdpbi5yZXBsYWNlKGhlYWRlclNhbml0aXplUmVnRXhwLCAnJyk7XG4gICAgICAgIGlmICh0aGlzLndlYlNvY2tldFZlcnNpb24gPT09IDEzKSB7XG4gICAgICAgICAgICByZXNwb25zZSArPSAnT3JpZ2luOiAnICsgYWxsb3dlZE9yaWdpbiArICdcXHJcXG4nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2ViU29ja2V0VmVyc2lvbiA9PT0gOCkge1xuICAgICAgICAgICAgcmVzcG9uc2UgKz0gJ1NlYy1XZWJTb2NrZXQtT3JpZ2luOiAnICsgYWxsb3dlZE9yaWdpbiArICdcXHJcXG4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvb2tpZXMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNvb2tpZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnJlamVjdCg1MDApO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBzdXBwbGllZCBmb3IgXCJjb29raWVzXCIgYXJndW1lbnQgbXVzdCBiZSBhbiBhcnJheS4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2VlbkNvb2tpZXMgPSB7fTtcbiAgICAgICAgY29va2llcy5mb3JFYWNoKGZ1bmN0aW9uKGNvb2tpZSkge1xuICAgICAgICAgICAgaWYgKCFjb29raWUubmFtZSB8fCAhY29va2llLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VhY2ggY29va2llIHRvIHNldCBtdXN0IGF0IGxlYXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBhbmQgXCJ2YWx1ZVwiJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGVyZSBhcmUgbm8gXFxyXFxuIHNlcXVlbmNlcyBpbnNlcnRlZFxuICAgICAgICAgICAgY29va2llLm5hbWUgPSBjb29raWUubmFtZS5yZXBsYWNlKGNvbnRyb2xDaGFyc0FuZFNlbWljb2xvblJlZ0V4LCAnJyk7XG4gICAgICAgICAgICBjb29raWUudmFsdWUgPSBjb29raWUudmFsdWUucmVwbGFjZShjb250cm9sQ2hhcnNBbmRTZW1pY29sb25SZWdFeCwgJycpO1xuXG4gICAgICAgICAgICBpZiAoc2VlbkNvb2tpZXNbY29va2llLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtYXkgbm90IHNwZWNpZnkgdGhlIHNhbWUgY29va2llIG5hbWUgdHdpY2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWVuQ29va2llc1tjb29raWUubmFtZV0gPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyB0b2tlbiAoUkZDIDI2MTYsIFNlY3Rpb24gMi4yKVxuICAgICAgICAgICAgdmFyIGludmFsaWRDaGFyID0gY29va2llLm5hbWUubWF0Y2goY29va2llTmFtZVZhbGlkYXRlUmVnRXgpO1xuICAgICAgICAgICAgaWYgKGludmFsaWRDaGFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgY2hhcmFjdGVyICcgKyBpbnZhbGlkQ2hhclswXSArICcgaW4gY29va2llIG5hbWUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUkZDIDYyNjUsIFNlY3Rpb24gNC4xLjFcbiAgICAgICAgICAgIC8vICpjb29raWUtb2N0ZXQgLyAoIERRVU9URSAqY29va2llLW9jdGV0IERRVU9URSApIHwgJXgyMSAvICV4MjMtMkIgLyAleDJELTNBIC8gJXgzQy01QiAvICV4NUQtN0VcbiAgICAgICAgICAgIGlmIChjb29raWUudmFsdWUubWF0Y2goY29va2llVmFsdWVEUXVvdGVWYWxpZGF0ZVJlZ0V4KSkge1xuICAgICAgICAgICAgICAgIGludmFsaWRDaGFyID0gY29va2llLnZhbHVlLnNsaWNlKDEsIC0xKS5tYXRjaChjb29raWVWYWx1ZVZhbGlkYXRlUmVnRXgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnZhbGlkQ2hhciA9IGNvb2tpZS52YWx1ZS5tYXRjaChjb29raWVWYWx1ZVZhbGlkYXRlUmVnRXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludmFsaWRDaGFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgY2hhcmFjdGVyICcgKyBpbnZhbGlkQ2hhclswXSArICcgaW4gY29va2llIHZhbHVlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb29raWVQYXJ0cyA9IFtjb29raWUubmFtZSArICc9JyArIGNvb2tpZS52YWx1ZV07XG5cbiAgICAgICAgICAgIC8vIFJGQyA2MjY1LCBTZWN0aW9uIDQuMS4xXG4gICAgICAgICAgICAvLyAnUGF0aD0nIHBhdGgtdmFsdWUgfCA8YW55IENIQVIgZXhjZXB0IENUTHMgb3IgJzsnPlxuICAgICAgICAgICAgaWYoY29va2llLnBhdGgpe1xuICAgICAgICAgICAgICAgIGludmFsaWRDaGFyID0gY29va2llLnBhdGgubWF0Y2goY29udHJvbENoYXJzQW5kU2VtaWNvbG9uUmVnRXgpO1xuICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkQ2hhcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCg1MDApO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgY2hhcmFjdGVyICcgKyBpbnZhbGlkQ2hhclswXSArICcgaW4gY29va2llIHBhdGgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29va2llUGFydHMucHVzaCgnUGF0aD0nICsgY29va2llLnBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSRkMgNjI2NSwgU2VjdGlvbiA0LjEuMi4zXG4gICAgICAgICAgICAvLyAnRG9tYWluPScgc3ViZG9tYWluXG4gICAgICAgICAgICBpZiAoY29va2llLmRvbWFpbikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY29va2llLmRvbWFpbikgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRG9tYWluIG11c3QgYmUgc3BlY2lmaWVkIGFuZCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnZhbGlkQ2hhciA9IGNvb2tpZS5kb21haW4ubWF0Y2goY29udHJvbENoYXJzQW5kU2VtaWNvbG9uUmVnRXgpO1xuICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkQ2hhcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCg1MDApO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgY2hhcmFjdGVyICcgKyBpbnZhbGlkQ2hhclswXSArICcgaW4gY29va2llIGRvbWFpbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb29raWVQYXJ0cy5wdXNoKCdEb21haW49JyArIGNvb2tpZS5kb21haW4udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJGQyA2MjY1LCBTZWN0aW9uIDQuMS4xXG4gICAgICAgICAgICAvLydFeHBpcmVzPScgc2FuZS1jb29raWUtZGF0ZSB8IEZvcmNlIERhdGUgb2JqZWN0IHJlcXVpcmVtZW50IGJ5IHVzaW5nIG9ubHkgZXBvY2hcbiAgICAgICAgICAgIGlmIChjb29raWUuZXhwaXJlcykge1xuICAgICAgICAgICAgICAgIGlmICghKGNvb2tpZS5leHBpcmVzIGluc3RhbmNlb2YgRGF0ZSkpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCg1MDApO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIHN1cHBsaWVkIGZvciBjb29raWUgXCJleHBpcmVzXCIgbXVzdCBiZSBhIHZhaWxkIGRhdGUgb2JqZWN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvb2tpZVBhcnRzLnB1c2goJ0V4cGlyZXM9JyArIGNvb2tpZS5leHBpcmVzLnRvR01UU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSRkMgNjI2NSwgU2VjdGlvbiA0LjEuMVxuICAgICAgICAgICAgLy8nTWF4LUFnZT0nIG5vbi16ZXJvLWRpZ2l0ICpESUdJVFxuICAgICAgICAgICAgaWYgKGNvb2tpZS5tYXhhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF4YWdlID0gY29va2llLm1heGFnZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKG1heGFnZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heGFnZSA9IHBhcnNlSW50KG1heGFnZSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4obWF4YWdlKSB8fCBtYXhhZ2UgPD0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBzdXBwbGllZCBmb3IgY29va2llIFwibWF4YWdlXCIgbXVzdCBiZSBhIG5vbi16ZXJvIG51bWJlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXhhZ2UgPSBNYXRoLnJvdW5kKG1heGFnZSk7XG4gICAgICAgICAgICAgICAgY29va2llUGFydHMucHVzaCgnTWF4LUFnZT0nICsgbWF4YWdlLnRvU3RyaW5nKDEwKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJGQyA2MjY1LCBTZWN0aW9uIDQuMS4xXG4gICAgICAgICAgICAvLydTZWN1cmU7J1xuICAgICAgICAgICAgaWYgKGNvb2tpZS5zZWN1cmUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGNvb2tpZS5zZWN1cmUpICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBzdXBwbGllZCBmb3IgY29va2llIFwic2VjdXJlXCIgbXVzdCBiZSBvZiB0eXBlIGJvb2xlYW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29va2llUGFydHMucHVzaCgnU2VjdXJlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJGQyA2MjY1LCBTZWN0aW9uIDQuMS4xXG4gICAgICAgICAgICAvLydIdHRwT25seTsnXG4gICAgICAgICAgICBpZiAoY29va2llLmh0dHBvbmx5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihjb29raWUuaHR0cG9ubHkpICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBzdXBwbGllZCBmb3IgY29va2llIFwiaHR0cG9ubHlcIiBtdXN0IGJlIG9mIHR5cGUgYm9vbGVhbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb29raWVQYXJ0cy5wdXNoKCdIdHRwT25seScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNwb25zZSArPSAoJ1NldC1Db29raWU6ICcgKyBjb29raWVQYXJ0cy5qb2luKCc7JykgKyAnXFxyXFxuJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogaGFuZGxlIG5lZ290aWF0ZWQgZXh0ZW5zaW9uc1xuICAgIC8vIGlmIChuZWdvdGlhdGVkRXh0ZW5zaW9ucykge1xuICAgIC8vICAgICByZXNwb25zZSArPSAnU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zOiAnICsgbmVnb3RpYXRlZEV4dGVuc2lvbnMuam9pbignLCAnKSArICdcXHJcXG4nO1xuICAgIC8vIH1cbiAgICBcbiAgICAvLyBNYXJrIHRoZSByZXF1ZXN0IHJlc29sdmVkIG5vdyBzbyB0aGF0IHRoZSB1c2VyIGNhbid0IGNhbGwgYWNjZXB0IG9yXG4gICAgLy8gcmVqZWN0IGEgc2Vjb25kIHRpbWUuXG4gICAgdGhpcy5fcmVzb2x2ZWQgPSB0cnVlO1xuICAgIHRoaXMuZW1pdCgncmVxdWVzdFJlc29sdmVkJywgdGhpcyk7XG4gICAgXG4gICAgcmVzcG9uc2UgKz0gJ1xcclxcbic7XG5cbiAgICB2YXIgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXRDb25uZWN0aW9uKHRoaXMuc29ja2V0LCBbXSwgYWNjZXB0ZWRQcm90b2NvbCwgZmFsc2UsIHRoaXMuc2VydmVyQ29uZmlnKTtcbiAgICBjb25uZWN0aW9uLndlYlNvY2tldFZlcnNpb24gPSB0aGlzLndlYlNvY2tldFZlcnNpb247XG4gICAgY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzID0gdGhpcy5yZW1vdGVBZGRyZXNzO1xuICAgIGNvbm5lY3Rpb24ucmVtb3RlQWRkcmVzc2VzID0gdGhpcy5yZW1vdGVBZGRyZXNzZXM7XG4gICAgXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIFxuICAgIGlmICh0aGlzLl9zb2NrZXRJc0Nsb3NpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlbiB0aGUgY2xpZW50IGhhbmdzIHVwIGJlZm9yZSB3ZSBnZXQgYSBjaGFuY2UgdG9cbiAgICAgICAgLy8gYWNjZXB0IHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIG91ciBzaWRlIG9mIHRoZSBvcGVuaW5nIGhhbmRzaGFrZS5cbiAgICAgICAgY2xlYW51cEZhaWxlZENvbm5lY3Rpb24oY29ubmVjdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnNvY2tldC53cml0ZShyZXNwb25zZSwgJ2FzY2lpJywgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNsZWFudXBGYWlsZWRDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2VsZi5fcmVtb3ZlU29ja2V0Q2xvc2VMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uX2FkZFNvY2tldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZW1pdCgncmVxdWVzdEFjY2VwdGVkJywgY29ubmVjdGlvbik7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG59O1xuXG5XZWJTb2NrZXRSZXF1ZXN0LnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbihzdGF0dXMsIHJlYXNvbiwgZXh0cmFIZWFkZXJzKSB7XG4gICAgdGhpcy5fdmVyaWZ5UmVzb2x1dGlvbigpO1xuICAgIFxuICAgIC8vIE1hcmsgdGhlIHJlcXVlc3QgcmVzb2x2ZWQgbm93IHNvIHRoYXQgdGhlIHVzZXIgY2FuJ3QgY2FsbCBhY2NlcHQgb3JcbiAgICAvLyByZWplY3QgYSBzZWNvbmQgdGltZS5cbiAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XG4gICAgdGhpcy5lbWl0KCdyZXF1ZXN0UmVzb2x2ZWQnLCB0aGlzKTtcbiAgICBcbiAgICBpZiAodHlwZW9mKHN0YXR1cykgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHN0YXR1cyA9IDQwMztcbiAgICB9XG4gICAgdmFyIHJlc3BvbnNlID0gJ0hUVFAvMS4xICcgKyBzdGF0dXMgKyAnICcgKyBodHRwU3RhdHVzRGVzY3JpcHRpb25zW3N0YXR1c10gKyAnXFxyXFxuJyArXG4gICAgICAgICAgICAgICAgICAgJ0Nvbm5lY3Rpb246IGNsb3NlXFxyXFxuJztcbiAgICBpZiAocmVhc29uKSB7XG4gICAgICAgIHJlYXNvbiA9IHJlYXNvbi5yZXBsYWNlKGhlYWRlclNhbml0aXplUmVnRXhwLCAnJyk7XG4gICAgICAgIHJlc3BvbnNlICs9ICdYLVdlYlNvY2tldC1SZWplY3QtUmVhc29uOiAnICsgcmVhc29uICsgJ1xcclxcbic7XG4gICAgfVxuXG4gICAgaWYgKGV4dHJhSGVhZGVycykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICB2YXIgc2FuaXRpemVkVmFsdWUgPSBleHRyYUhlYWRlcnNba2V5XS50b1N0cmluZygpLnJlcGxhY2UoaGVhZGVyU2FuaXRpemVSZWdFeHAsICcnKTtcbiAgICAgICAgICAgIHZhciBzYW5pdGl6ZWRLZXkgPSBrZXkucmVwbGFjZShoZWFkZXJTYW5pdGl6ZVJlZ0V4cCwgJycpO1xuICAgICAgICAgICAgcmVzcG9uc2UgKz0gKHNhbml0aXplZEtleSArICc6ICcgKyBzYW5pdGl6ZWRWYWx1ZSArICdcXHJcXG4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc3BvbnNlICs9ICdcXHJcXG4nO1xuICAgIHRoaXMuc29ja2V0LmVuZChyZXNwb25zZSwgJ2FzY2lpJyk7XG5cbiAgICB0aGlzLmVtaXQoJ3JlcXVlc3RSZWplY3RlZCcsIHRoaXMpO1xufTtcblxuV2ViU29ja2V0UmVxdWVzdC5wcm90b3R5cGUuX2hhbmRsZVNvY2tldENsb3NlQmVmb3JlQWNjZXB0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fc29ja2V0SXNDbG9zaW5nID0gdHJ1ZTtcbiAgICB0aGlzLl9yZW1vdmVTb2NrZXRDbG9zZUxpc3RlbmVycygpO1xufTtcblxuV2ViU29ja2V0UmVxdWVzdC5wcm90b3R5cGUuX3JlbW92ZVNvY2tldENsb3NlTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIHRoaXMuX3NvY2tldENsb3NlSGFuZGxlcik7XG4gICAgdGhpcy5zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgdGhpcy5fc29ja2V0Q2xvc2VIYW5kbGVyKTtcbn07XG5cbldlYlNvY2tldFJlcXVlc3QucHJvdG90eXBlLl92ZXJpZnlSZXNvbHV0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3Jlc29sdmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0UmVxdWVzdCBtYXkgb25seSBiZSBhY2NlcHRlZCBvciByZWplY3RlZCBvbmUgdGltZS4nKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBjbGVhbnVwRmFpbGVkQ29ubmVjdGlvbihjb25uZWN0aW9uKSB7XG4gICAgLy8gU2luY2Ugd2UgaGF2ZSB0byByZXR1cm4gYSBjb25uZWN0aW9uIG9iamVjdCBldmVuIGlmIHRoZSBzb2NrZXQgaXNcbiAgICAvLyBhbHJlYWR5IGRlYWQgaW4gb3JkZXIgbm90IHRvIGJyZWFrIHRoZSBBUEksIHdlIHNjaGVkdWxlIGEgJ2Nsb3NlJ1xuICAgIC8vIGV2ZW50IG9uIHRoZSBjb25uZWN0aW9uIG9iamVjdCB0byBvY2N1ciBpbW1lZGlhdGVseS5cbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBXZWJTb2NrZXRDb25uZWN0aW9uLkNMT1NFX1JFQVNPTl9BQk5PUk1BTCA9IDEwMDZcbiAgICAgICAgLy8gVGhpcmQgcGFyYW06IFNraXAgc2VuZGluZyB0aGUgY2xvc2UgZnJhbWUgdG8gYSBkZWFkIHNvY2tldFxuICAgICAgICBjb25uZWN0aW9uLmRyb3AoMTAwNiwgJ1RDUCBjb25uZWN0aW9uIGxvc3QgYmVmb3JlIGhhbmRzaGFrZSBjb21wbGV0ZWQuJywgdHJ1ZSk7XG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0UmVxdWVzdDtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNyeXB0b1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ1cmxcIik7IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogIENvcHlyaWdodCAyMDEwLTIwMTUgQnJpYW4gTWNLZWx2ZXkuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG52YXIgYnVmZmVyVXRpbCA9IHJlcXVpcmUoJy4vQnVmZmVyVXRpbCcpLkJ1ZmZlclV0aWw7XG52YXIgYnVmZmVyQWxsb2NVbnNhZmUgPSByZXF1aXJlKCcuL3V0aWxzJykuYnVmZmVyQWxsb2NVbnNhZmU7XG5cbmNvbnN0IERFQ09ERV9IRUFERVIgPSAxO1xuY29uc3QgV0FJVElOR19GT1JfMTZfQklUX0xFTkdUSCA9IDI7XG5jb25zdCBXQUlUSU5HX0ZPUl82NF9CSVRfTEVOR1RIID0gMztcbmNvbnN0IFdBSVRJTkdfRk9SX01BU0tfS0VZID0gNDtcbmNvbnN0IFdBSVRJTkdfRk9SX1BBWUxPQUQgPSA1O1xuY29uc3QgQ09NUExFVEUgPSA2O1xuXG4vLyBXZWJTb2NrZXRDb25uZWN0aW9uIHdpbGwgcGFzcyBzaGFyZWQgYnVmZmVyIG9iamVjdHMgZm9yIG1hc2tCeXRlcyBhbmRcbi8vIGZyYW1lSGVhZGVyIGludG8gdGhlIGNvbnN0cnVjdG9yIHRvIGF2b2lkIHRvbnMgb2Ygc21hbGwgbWVtb3J5IGFsbG9jYXRpb25zXG4vLyBmb3IgZWFjaCBmcmFtZSB3ZSBoYXZlIHRvIHBhcnNlLiAgVGhpcyBpcyBvbmx5IHVzZWQgZm9yIHBhcnNpbmcgZnJhbWVzXG4vLyB3ZSByZWNlaXZlIG9mZiB0aGUgd2lyZS5cbmZ1bmN0aW9uIFdlYlNvY2tldEZyYW1lKG1hc2tCeXRlcywgZnJhbWVIZWFkZXIsIGNvbmZpZykge1xuICAgIHRoaXMubWFza0J5dGVzID0gbWFza0J5dGVzO1xuICAgIHRoaXMuZnJhbWVIZWFkZXIgPSBmcmFtZUhlYWRlcjtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLm1heFJlY2VpdmVkRnJhbWVTaXplID0gY29uZmlnLm1heFJlY2VpdmVkRnJhbWVTaXplO1xuICAgIHRoaXMucHJvdG9jb2xFcnJvciA9IGZhbHNlO1xuICAgIHRoaXMuZnJhbWVUb29MYXJnZSA9IGZhbHNlO1xuICAgIHRoaXMuaW52YWxpZENsb3NlRnJhbWVMZW5ndGggPSBmYWxzZTtcbiAgICB0aGlzLnBhcnNlU3RhdGUgPSBERUNPREVfSEVBREVSO1xuICAgIHRoaXMuY2xvc2VTdGF0dXMgPSAtMTtcbn1cblxuV2ViU29ja2V0RnJhbWUucHJvdG90eXBlLmFkZERhdGEgPSBmdW5jdGlvbihidWZmZXJMaXN0KSB7XG4gICAgaWYgKHRoaXMucGFyc2VTdGF0ZSA9PT0gREVDT0RFX0hFQURFUikge1xuICAgICAgICBpZiAoYnVmZmVyTGlzdC5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgYnVmZmVyTGlzdC5qb2luSW50byh0aGlzLmZyYW1lSGVhZGVyLCAwLCAwLCAyKTtcbiAgICAgICAgICAgIGJ1ZmZlckxpc3QuYWR2YW5jZSgyKTtcbiAgICAgICAgICAgIHZhciBmaXJzdEJ5dGUgPSB0aGlzLmZyYW1lSGVhZGVyWzBdO1xuICAgICAgICAgICAgdmFyIHNlY29uZEJ5dGUgPSB0aGlzLmZyYW1lSGVhZGVyWzFdO1xuXG4gICAgICAgICAgICB0aGlzLmZpbiAgICAgPSBCb29sZWFuKGZpcnN0Qnl0ZSAgJiAweDgwKTtcbiAgICAgICAgICAgIHRoaXMucnN2MSAgICA9IEJvb2xlYW4oZmlyc3RCeXRlICAmIDB4NDApO1xuICAgICAgICAgICAgdGhpcy5yc3YyICAgID0gQm9vbGVhbihmaXJzdEJ5dGUgICYgMHgyMCk7XG4gICAgICAgICAgICB0aGlzLnJzdjMgICAgPSBCb29sZWFuKGZpcnN0Qnl0ZSAgJiAweDEwKTtcbiAgICAgICAgICAgIHRoaXMubWFzayAgICA9IEJvb2xlYW4oc2Vjb25kQnl0ZSAmIDB4ODApO1xuXG4gICAgICAgICAgICB0aGlzLm9wY29kZSAgPSBmaXJzdEJ5dGUgICYgMHgwRjtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gc2Vjb25kQnl0ZSAmIDB4N0Y7XG5cbiAgICAgICAgICAgIC8vIENvbnRyb2wgZnJhbWUgc2FuaXR5IGNoZWNrXG4gICAgICAgICAgICBpZiAodGhpcy5vcGNvZGUgPj0gMHgwOCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IDEyNSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3RvY29sRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BSZWFzb24gPSAnSWxsZWdhbCBjb250cm9sIGZyYW1lIGxvbmdlciB0aGFuIDEyNSBieXRlcy4nO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3RvY29sRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BSZWFzb24gPSAnQ29udHJvbCBmcmFtZXMgbXVzdCBub3QgYmUgZnJhZ21lbnRlZC4nO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMTI2KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVN0YXRlID0gV0FJVElOR19GT1JfMTZfQklUX0xFTkdUSDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGVuZ3RoID09PSAxMjcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlU3RhdGUgPSBXQUlUSU5HX0ZPUl82NF9CSVRfTEVOR1RIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVN0YXRlID0gV0FJVElOR19GT1JfTUFTS19LRVk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMucGFyc2VTdGF0ZSA9PT0gV0FJVElOR19GT1JfMTZfQklUX0xFTkdUSCkge1xuICAgICAgICBpZiAoYnVmZmVyTGlzdC5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgYnVmZmVyTGlzdC5qb2luSW50byh0aGlzLmZyYW1lSGVhZGVyLCAyLCAwLCAyKTtcbiAgICAgICAgICAgIGJ1ZmZlckxpc3QuYWR2YW5jZSgyKTtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5mcmFtZUhlYWRlci5yZWFkVUludDE2QkUoMik7XG4gICAgICAgICAgICB0aGlzLnBhcnNlU3RhdGUgPSBXQUlUSU5HX0ZPUl9NQVNLX0tFWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLnBhcnNlU3RhdGUgPT09IFdBSVRJTkdfRk9SXzY0X0JJVF9MRU5HVEgpIHtcbiAgICAgICAgaWYgKGJ1ZmZlckxpc3QubGVuZ3RoID49IDgpIHtcbiAgICAgICAgICAgIGJ1ZmZlckxpc3Quam9pbkludG8odGhpcy5mcmFtZUhlYWRlciwgMiwgMCwgOCk7XG4gICAgICAgICAgICBidWZmZXJMaXN0LmFkdmFuY2UoOCk7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoUGFpciA9IFtcbiAgICAgICAgICAgICAgdGhpcy5mcmFtZUhlYWRlci5yZWFkVUludDMyQkUoMiksXG4gICAgICAgICAgICAgIHRoaXMuZnJhbWVIZWFkZXIucmVhZFVJbnQzMkJFKDIrNClcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmIChsZW5ndGhQYWlyWzBdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm90b2NvbEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BSZWFzb24gPSAnVW5zdXBwb3J0ZWQgNjQtYml0IGxlbmd0aCBmcmFtZSByZWNlaXZlZCc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aFBhaXJbMV07XG4gICAgICAgICAgICB0aGlzLnBhcnNlU3RhdGUgPSBXQUlUSU5HX0ZPUl9NQVNLX0tFWTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnNlU3RhdGUgPT09IFdBSVRJTkdfRk9SX01BU0tfS0VZKSB7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIGlmIChidWZmZXJMaXN0Lmxlbmd0aCA+PSA0KSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyTGlzdC5qb2luSW50byh0aGlzLm1hc2tCeXRlcywgMCwgMCwgNCk7XG4gICAgICAgICAgICAgICAgYnVmZmVyTGlzdC5hZHZhbmNlKDQpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VTdGF0ZSA9IFdBSVRJTkdfRk9SX1BBWUxPQUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlU3RhdGUgPSBXQUlUSU5HX0ZPUl9QQVlMT0FEO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFyc2VTdGF0ZSA9PT0gV0FJVElOR19GT1JfUEFZTE9BRCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPiB0aGlzLm1heFJlY2VpdmVkRnJhbWVTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lVG9vTGFyZ2UgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kcm9wUmVhc29uID0gJ0ZyYW1lIHNpemUgb2YgJyArIHRoaXMubGVuZ3RoLnRvU3RyaW5nKDEwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGJ5dGVzIGV4Y2VlZHMgbWF4aW11bSBhY2NlcHRlZCBmcmFtZSBzaXplJztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmFyeVBheWxvYWQgPSBidWZmZXJBbGxvY1Vuc2FmZSgwKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTdGF0ZSA9IENPTVBMRVRFO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ1ZmZlckxpc3QubGVuZ3RoID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmFyeVBheWxvYWQgPSBidWZmZXJMaXN0LnRha2UodGhpcy5sZW5ndGgpO1xuICAgICAgICAgICAgYnVmZmVyTGlzdC5hZHZhbmNlKHRoaXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgICAgICBidWZmZXJVdGlsLnVubWFzayh0aGlzLmJpbmFyeVBheWxvYWQsIHRoaXMubWFza0J5dGVzKTtcbiAgICAgICAgICAgICAgICAvLyB4b3IodGhpcy5iaW5hcnlQYXlsb2FkLCB0aGlzLm1hc2tCeXRlcywgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wY29kZSA9PT0gMHgwOCkgeyAvLyBXZWJTb2NrZXRPcGNvZGUuQ09OTkVDVElPTl9DTE9TRVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGxlbmd0aCBmb3IgYSBjbG9zZSBmcmFtZS4gIE11c3QgYmUgemVybyBvciBhdCBsZWFzdCB0d28uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluYXJ5UGF5bG9hZCA9IGJ1ZmZlckFsbG9jVW5zYWZlKDApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRDbG9zZUZyYW1lTGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN0YXR1cyA9IHRoaXMuYmluYXJ5UGF5bG9hZC5yZWFkVUludDE2QkUoMCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluYXJ5UGF5bG9hZCA9IHRoaXMuYmluYXJ5UGF5bG9hZC5zbGljZSgyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGFyc2VTdGF0ZSA9IENPTVBMRVRFO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuV2ViU29ja2V0RnJhbWUucHJvdG90eXBlLnRocm93QXdheVBheWxvYWQgPSBmdW5jdGlvbihidWZmZXJMaXN0KSB7XG4gICAgaWYgKGJ1ZmZlckxpc3QubGVuZ3RoID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIGJ1ZmZlckxpc3QuYWR2YW5jZSh0aGlzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMucGFyc2VTdGF0ZSA9IENPTVBMRVRFO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuV2ViU29ja2V0RnJhbWUucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24obnVsbE1hc2spIHtcbiAgICB2YXIgbWFza0tleTtcbiAgICB2YXIgaGVhZGVyTGVuZ3RoID0gMjtcbiAgICB2YXIgZGF0YTtcbiAgICB2YXIgb3V0cHV0UG9zO1xuICAgIHZhciBmaXJzdEJ5dGUgPSAweDAwO1xuICAgIHZhciBzZWNvbmRCeXRlID0gMHgwMDtcblxuICAgIGlmICh0aGlzLmZpbikge1xuICAgICAgICBmaXJzdEJ5dGUgfD0gMHg4MDtcbiAgICB9XG4gICAgaWYgKHRoaXMucnN2MSkge1xuICAgICAgICBmaXJzdEJ5dGUgfD0gMHg0MDtcbiAgICB9XG4gICAgaWYgKHRoaXMucnN2Mikge1xuICAgICAgICBmaXJzdEJ5dGUgfD0gMHgyMDtcbiAgICB9XG4gICAgaWYgKHRoaXMucnN2Mykge1xuICAgICAgICBmaXJzdEJ5dGUgfD0gMHgxMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubWFzaykge1xuICAgICAgICBzZWNvbmRCeXRlIHw9IDB4ODA7XG4gICAgfVxuXG4gICAgZmlyc3RCeXRlIHw9ICh0aGlzLm9wY29kZSAmIDB4MEYpO1xuXG4gICAgLy8gdGhlIGNsb3NlIGZyYW1lIGlzIGEgc3BlY2lhbCBjYXNlIGJlY2F1c2UgdGhlIGNsb3NlIHJlYXNvbiBpc1xuICAgIC8vIHByZXBlbmRlZCB0byB0aGUgcGF5bG9hZCBkYXRhLlxuICAgIGlmICh0aGlzLm9wY29kZSA9PT0gMHgwOCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDI7XG4gICAgICAgIGlmICh0aGlzLmJpbmFyeVBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoICs9IHRoaXMuYmluYXJ5UGF5bG9hZC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YSA9IGJ1ZmZlckFsbG9jVW5zYWZlKHRoaXMubGVuZ3RoKTtcbiAgICAgICAgZGF0YS53cml0ZVVJbnQxNkJFKHRoaXMuY2xvc2VTdGF0dXMsIDApO1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmFyeVBheWxvYWQuY29weShkYXRhLCAyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmJpbmFyeVBheWxvYWQpIHtcbiAgICAgICAgZGF0YSA9IHRoaXMuYmluYXJ5UGF5bG9hZDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPD0gMTI1KSB7XG4gICAgICAgIC8vIGVuY29kZSB0aGUgbGVuZ3RoIGRpcmVjdGx5IGludG8gdGhlIHR3by1ieXRlIGZyYW1lIGhlYWRlclxuICAgICAgICBzZWNvbmRCeXRlIHw9ICh0aGlzLmxlbmd0aCAmIDB4N0YpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmxlbmd0aCA+IDEyNSAmJiB0aGlzLmxlbmd0aCA8PSAweEZGRkYpIHtcbiAgICAgICAgLy8gVXNlIDE2LWJpdCBsZW5ndGhcbiAgICAgICAgc2Vjb25kQnl0ZSB8PSAxMjY7XG4gICAgICAgIGhlYWRlckxlbmd0aCArPSAyO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmxlbmd0aCA+IDB4RkZGRikge1xuICAgICAgICAvLyBVc2UgNjQtYml0IGxlbmd0aFxuICAgICAgICBzZWNvbmRCeXRlIHw9IDEyNztcbiAgICAgICAgaGVhZGVyTGVuZ3RoICs9IDg7XG4gICAgfVxuXG4gICAgdmFyIG91dHB1dCA9IGJ1ZmZlckFsbG9jVW5zYWZlKHRoaXMubGVuZ3RoICsgaGVhZGVyTGVuZ3RoICsgKHRoaXMubWFzayA/IDQgOiAwKSk7XG5cbiAgICAvLyB3cml0ZSB0aGUgZnJhbWUgaGVhZGVyXG4gICAgb3V0cHV0WzBdID0gZmlyc3RCeXRlO1xuICAgIG91dHB1dFsxXSA9IHNlY29uZEJ5dGU7XG5cbiAgICBvdXRwdXRQb3MgPSAyO1xuXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gMTI1ICYmIHRoaXMubGVuZ3RoIDw9IDB4RkZGRikge1xuICAgICAgICAvLyB3cml0ZSAxNi1iaXQgbGVuZ3RoXG4gICAgICAgIG91dHB1dC53cml0ZVVJbnQxNkJFKHRoaXMubGVuZ3RoLCBvdXRwdXRQb3MpO1xuICAgICAgICBvdXRwdXRQb3MgKz0gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5sZW5ndGggPiAweEZGRkYpIHtcbiAgICAgICAgLy8gd3JpdGUgNjQtYml0IGxlbmd0aFxuICAgICAgICBvdXRwdXQud3JpdGVVSW50MzJCRSgweDAwMDAwMDAwLCBvdXRwdXRQb3MpO1xuICAgICAgICBvdXRwdXQud3JpdGVVSW50MzJCRSh0aGlzLmxlbmd0aCwgb3V0cHV0UG9zICsgNCk7XG4gICAgICAgIG91dHB1dFBvcyArPSA4O1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgbWFza0tleSA9IG51bGxNYXNrID8gMCA6ICgoTWF0aC5yYW5kb20oKSAqIDB4RkZGRkZGRkYpID4+PiAwKTtcbiAgICAgICAgdGhpcy5tYXNrQnl0ZXMud3JpdGVVSW50MzJCRShtYXNrS2V5LCAwKTtcblxuICAgICAgICAvLyB3cml0ZSB0aGUgbWFzayBrZXlcbiAgICAgICAgdGhpcy5tYXNrQnl0ZXMuY29weShvdXRwdXQsIG91dHB1dFBvcyk7XG4gICAgICAgIG91dHB1dFBvcyArPSA0O1xuXG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgYnVmZmVyVXRpbC5tYXNrKGRhdGEsIHRoaXMubWFza0J5dGVzLCBvdXRwdXQsIG91dHB1dFBvcywgdGhpcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGRhdGEpIHtcbiAgICAgICAgZGF0YS5jb3B5KG91dHB1dCwgb3V0cHV0UG9zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xufTtcblxuV2ViU29ja2V0RnJhbWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICdPcGNvZGU6ICcgKyB0aGlzLm9wY29kZSArICcsIGZpbjogJyArIHRoaXMuZmluICsgJywgbGVuZ3RoOiAnICsgdGhpcy5sZW5ndGggKyAnLCBoYXNQYXlsb2FkOiAnICsgQm9vbGVhbih0aGlzLmJpbmFyeVBheWxvYWQpICsgJywgbWFza2VkOiAnICsgdGhpcy5tYXNrO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldEZyYW1lO1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogIENvcHlyaWdodCAyMDEwLTIwMTUgQnJpYW4gTWNLZWx2ZXkuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgZXh0ZW5kID0gdXRpbHMuZXh0ZW5kO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xudmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJyk7XG52YXIgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xudmFyIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xudmFyIFdlYlNvY2tldENvbm5lY3Rpb24gPSByZXF1aXJlKCcuL1dlYlNvY2tldENvbm5lY3Rpb24nKTtcbnZhciBidWZmZXJBbGxvY1Vuc2FmZSA9IHV0aWxzLmJ1ZmZlckFsbG9jVW5zYWZlO1xuXG52YXIgcHJvdG9jb2xTZXBhcmF0b3JzID0gW1xuICAgICcoJywgJyknLCAnPCcsICc+JywgJ0AnLFxuICAgICcsJywgJzsnLCAnOicsICdcXFxcJywgJ1xcXCInLFxuICAgICcvJywgJ1snLCAnXScsICc/JywgJz0nLFxuICAgICd7JywgJ30nLCAnICcsIFN0cmluZy5mcm9tQ2hhckNvZGUoOSlcbl07XG5cbnZhciBleGNsdWRlZFRsc09wdGlvbnMgPSBbJ2hvc3RuYW1lJywncG9ydCcsJ21ldGhvZCcsJ3BhdGgnLCdoZWFkZXJzJ107XG5cbmZ1bmN0aW9uIFdlYlNvY2tldENsaWVudChjb25maWcpIHtcbiAgICAvLyBTdXBlcmNsYXNzIENvbnN0cnVjdG9yXG4gICAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZXh0ZW5zaW9uc1xuXG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgIC8vIDFNaUIgbWF4IGZyYW1lIHNpemUuXG4gICAgICAgIG1heFJlY2VpdmVkRnJhbWVTaXplOiAweDEwMDAwMCxcblxuICAgICAgICAvLyA4TWlCIG1heCBtZXNzYWdlIHNpemUsIG9ubHkgYXBwbGljYWJsZSBpZlxuICAgICAgICAvLyBhc3NlbWJsZUZyYWdtZW50cyBpcyB0cnVlXG4gICAgICAgIG1heFJlY2VpdmVkTWVzc2FnZVNpemU6IDB4ODAwMDAwLFxuXG4gICAgICAgIC8vIE91dGdvaW5nIG1lc3NhZ2VzIGxhcmdlciB0aGFuIGZyYWdtZW50YXRpb25UaHJlc2hvbGQgd2lsbCBiZVxuICAgICAgICAvLyBzcGxpdCBpbnRvIG11bHRpcGxlIGZyYWdtZW50cy5cbiAgICAgICAgZnJhZ21lbnRPdXRnb2luZ01lc3NhZ2VzOiB0cnVlLFxuXG4gICAgICAgIC8vIE91dGdvaW5nIGZyYW1lcyBhcmUgZnJhZ21lbnRlZCBpZiB0aGV5IGV4Y2VlZCB0aGlzIHRocmVzaG9sZC5cbiAgICAgICAgLy8gRGVmYXVsdCBpcyAxNktpQlxuICAgICAgICBmcmFnbWVudGF0aW9uVGhyZXNob2xkOiAweDQwMDAsXG5cbiAgICAgICAgLy8gV2hpY2ggdmVyc2lvbiBvZiB0aGUgcHJvdG9jb2wgdG8gdXNlIGZvciB0aGlzIHNlc3Npb24uICBUaGlzXG4gICAgICAgIC8vIG9wdGlvbiB3aWxsIGJlIHJlbW92ZWQgb25jZSB0aGUgcHJvdG9jb2wgaXMgZmluYWxpemVkIGJ5IHRoZSBJRVRGXG4gICAgICAgIC8vIEl0IGlzIG9ubHkgYXZhaWxhYmxlIHRvIGVhc2UgdGhlIHRyYW5zaXRpb24gdGhyb3VnaCB0aGVcbiAgICAgICAgLy8gaW50ZXJtZWRpYXRlIGRyYWZ0IHByb3RvY29sIHZlcnNpb25zLlxuICAgICAgICAvLyBBdCBwcmVzZW50LCBpdCBvbmx5IGFmZmVjdHMgdGhlIG5hbWUgb2YgdGhlIE9yaWdpbiBoZWFkZXIuXG4gICAgICAgIHdlYlNvY2tldFZlcnNpb246IDEzLFxuXG4gICAgICAgIC8vIElmIHRydWUsIGZyYWdtZW50ZWQgbWVzc2FnZXMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGFzc2VtYmxlZFxuICAgICAgICAvLyBhbmQgdGhlIGZ1bGwgbWVzc2FnZSB3aWxsIGJlIGVtaXR0ZWQgdmlhIGEgJ21lc3NhZ2UnIGV2ZW50LlxuICAgICAgICAvLyBJZiBmYWxzZSwgZWFjaCBmcmFtZSB3aWxsIGJlIGVtaXR0ZWQgdmlhIGEgJ2ZyYW1lJyBldmVudCBhbmRcbiAgICAgICAgLy8gdGhlIGFwcGxpY2F0aW9uIHdpbGwgYmUgcmVzcG9uc2libGUgZm9yIGFnZ3JlZ2F0aW5nIG11bHRpcGxlXG4gICAgICAgIC8vIGZyYWdtZW50ZWQgZnJhbWVzLiAgU2luZ2xlLWZyYW1lIG1lc3NhZ2VzIHdpbGwgZW1pdCBhICdtZXNzYWdlJ1xuICAgICAgICAvLyBldmVudCBpbiBhZGRpdGlvbiB0byB0aGUgJ2ZyYW1lJyBldmVudC5cbiAgICAgICAgLy8gTW9zdCB1c2VycyB3aWxsIHdhbnQgdG8gbGVhdmUgdGhpcyBzZXQgdG8gJ3RydWUnXG4gICAgICAgIGFzc2VtYmxlRnJhZ21lbnRzOiB0cnVlLFxuXG4gICAgICAgIC8vIFRoZSBOYWdsZSBBbGdvcml0aG0gbWFrZXMgbW9yZSBlZmZpY2llbnQgdXNlIG9mIG5ldHdvcmsgcmVzb3VyY2VzXG4gICAgICAgIC8vIGJ5IGludHJvZHVjaW5nIGEgc21hbGwgZGVsYXkgYmVmb3JlIHNlbmRpbmcgc21hbGwgcGFja2V0cyBzbyB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG1lc3NhZ2VzIGNhbiBiZSBiYXRjaGVkIHRvZ2V0aGVyIGJlZm9yZSBnb2luZyBvbnRvIHRoZVxuICAgICAgICAvLyB3aXJlLiAgVGhpcyBob3dldmVyIGNvbWVzIGF0IHRoZSBjb3N0IG9mIGxhdGVuY3ksIHNvIHRoZSBkZWZhdWx0XG4gICAgICAgIC8vIGlzIHRvIGRpc2FibGUgaXQuICBJZiB5b3UgZG9uJ3QgbmVlZCBsb3cgbGF0ZW5jeSBhbmQgYXJlIHN0cmVhbWluZ1xuICAgICAgICAvLyBsb3RzIG9mIHNtYWxsIG1lc3NhZ2VzLCB5b3UgY2FuIGNoYW5nZSB0aGlzIHRvICdmYWxzZSdcbiAgICAgICAgZGlzYWJsZU5hZ2xlQWxnb3JpdGhtOiB0cnVlLFxuXG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYWZ0ZXIgc2VuZGluZyBhIGNsb3NlIGZyYW1lXG4gICAgICAgIC8vIGZvciBhbiBhY2tub3dsZWRnZW1lbnQgdG8gY29tZSBiYWNrIGJlZm9yZSBnaXZpbmcgdXAgYW5kIGp1c3RcbiAgICAgICAgLy8gY2xvc2luZyB0aGUgc29ja2V0LlxuICAgICAgICBjbG9zZVRpbWVvdXQ6IDUwMDAsXG5cbiAgICAgICAgLy8gT3B0aW9ucyB0byBwYXNzIHRvIGh0dHBzLmNvbm5lY3QgaWYgY29ubmVjdGluZyB2aWEgVExTXG4gICAgICAgIHRsc09wdGlvbnM6IHt9XG4gICAgfTtcblxuICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgdmFyIHRsc09wdGlvbnM7XG4gICAgICAgIGlmIChjb25maWcudGxzT3B0aW9ucykge1xuICAgICAgICAgIHRsc09wdGlvbnMgPSBjb25maWcudGxzT3B0aW9ucztcbiAgICAgICAgICBkZWxldGUgY29uZmlnLnRsc09wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdGxzT3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGV4dGVuZCh0aGlzLmNvbmZpZywgY29uZmlnKTtcbiAgICAgICAgZXh0ZW5kKHRoaXMuY29uZmlnLnRsc09wdGlvbnMsIHRsc09wdGlvbnMpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcSA9IG51bGw7XG4gICAgXG4gICAgc3dpdGNoICh0aGlzLmNvbmZpZy53ZWJTb2NrZXRWZXJzaW9uKSB7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1ZXN0ZWQgd2ViU29ja2V0VmVyc2lvbiBpcyBub3Qgc3VwcG9ydGVkLiBBbGxvd2VkIHZhbHVlcyBhcmUgOCBhbmQgMTMuJyk7XG4gICAgfVxufVxuXG51dGlsLmluaGVyaXRzKFdlYlNvY2tldENsaWVudCwgRXZlbnRFbWl0dGVyKTtcblxuV2ViU29ja2V0Q2xpZW50LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24ocmVxdWVzdFVybCwgcHJvdG9jb2xzLCBvcmlnaW4sIGhlYWRlcnMsIGV4dHJhUmVxdWVzdE9wdGlvbnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgaWYgKHR5cGVvZihwcm90b2NvbHMpID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAocHJvdG9jb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHByb3RvY29scyA9IFtwcm90b2NvbHNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJvdG9jb2xzID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEocHJvdG9jb2xzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgIHByb3RvY29scyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLnByb3RvY29scyA9IHByb3RvY29scztcbiAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcblxuICAgIGlmICh0eXBlb2YocmVxdWVzdFVybCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsLnBhcnNlKHJlcXVlc3RVcmwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy51cmwgPSByZXF1ZXN0VXJsOyAvLyBpbiBjYXNlIGFuIGFscmVhZHkgcGFyc2VkIHVybCBpcyBwYXNzZWQgaW4uXG4gICAgfVxuICAgIGlmICghdGhpcy51cmwucHJvdG9jb2wpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBzcGVjaWZ5IGEgZnVsbCBXZWJTb2NrZXQgVVJMLCBpbmNsdWRpbmcgcHJvdG9jb2wuJyk7XG4gICAgfVxuICAgIGlmICghdGhpcy51cmwuaG9zdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IHNwZWNpZnkgYSBmdWxsIFdlYlNvY2tldCBVUkwsIGluY2x1ZGluZyBob3N0bmFtZS4gUmVsYXRpdmUgVVJMcyBhcmUgbm90IHN1cHBvcnRlZC4nKTtcbiAgICB9XG5cbiAgICB0aGlzLnNlY3VyZSA9ICh0aGlzLnVybC5wcm90b2NvbCA9PT0gJ3dzczonKTtcblxuICAgIC8vIHZhbGlkYXRlIHByb3RvY29sIGNoYXJhY3RlcnM6XG4gICAgdGhpcy5wcm90b2NvbHMuZm9yRWFjaChmdW5jdGlvbihwcm90b2NvbCkge1xuICAgICAgICBmb3IgKHZhciBpPTA7IGkgPCBwcm90b2NvbC5sZW5ndGg7IGkgKyspIHtcbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IHByb3RvY29sLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB2YXIgY2hhcmFjdGVyID0gcHJvdG9jb2wuY2hhckF0KGkpO1xuICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgMHgwMDIxIHx8IGNoYXJDb2RlID4gMHgwMDdFIHx8IHByb3RvY29sU2VwYXJhdG9ycy5pbmRleE9mKGNoYXJhY3RlcikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm90b2NvbCBsaXN0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVyIFwiJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpICsgJ1wiJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBkZWZhdWx0UG9ydHMgPSB7XG4gICAgICAgICd3czonOiAnODAnLFxuICAgICAgICAnd3NzOic6ICc0NDMnXG4gICAgfTtcblxuICAgIGlmICghdGhpcy51cmwucG9ydCkge1xuICAgICAgICB0aGlzLnVybC5wb3J0ID0gZGVmYXVsdFBvcnRzW3RoaXMudXJsLnByb3RvY29sXTtcbiAgICB9XG5cbiAgICB2YXIgbm9uY2UgPSBidWZmZXJBbGxvY1Vuc2FmZSgxNik7XG4gICAgZm9yICh2YXIgaT0wOyBpIDwgMTY7IGkrKykge1xuICAgICAgICBub25jZVtpXSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSoweEZGKTtcbiAgICB9XG4gICAgdGhpcy5iYXNlNjRub25jZSA9IG5vbmNlLnRvU3RyaW5nKCdiYXNlNjQnKTtcblxuICAgIHZhciBob3N0SGVhZGVyVmFsdWUgPSB0aGlzLnVybC5ob3N0bmFtZTtcbiAgICBpZiAoKHRoaXMudXJsLnByb3RvY29sID09PSAnd3M6JyAmJiB0aGlzLnVybC5wb3J0ICE9PSAnODAnKSB8fFxuICAgICAgICAodGhpcy51cmwucHJvdG9jb2wgPT09ICd3c3M6JyAmJiB0aGlzLnVybC5wb3J0ICE9PSAnNDQzJykpICB7XG4gICAgICAgIGhvc3RIZWFkZXJWYWx1ZSArPSAoJzonICsgdGhpcy51cmwucG9ydCk7XG4gICAgfVxuXG4gICAgdmFyIHJlcUhlYWRlcnMgPSB7fTtcbiAgICBpZiAodGhpcy5zZWN1cmUgJiYgdGhpcy5jb25maWcudGxzT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGVhZGVycycpKSB7XG4gICAgICAvLyBBbGxvdyBmb3IgYWRkaXRpb25hbCBoZWFkZXJzIHRvIGJlIHByb3ZpZGVkIHdoZW4gY29ubmVjdGluZyB2aWEgSFRUUFNcbiAgICAgIGV4dGVuZChyZXFIZWFkZXJzLCB0aGlzLmNvbmZpZy50bHNPcHRpb25zLmhlYWRlcnMpO1xuICAgIH1cbiAgICBpZiAoaGVhZGVycykge1xuICAgICAgLy8gRXhwbGljaXRseSBwcm92aWRlZCBoZWFkZXJzIHRha2UgcHJpb3JpdHkgb3ZlciBhbnkgZnJvbSB0bHNPcHRpb25zXG4gICAgICBleHRlbmQocmVxSGVhZGVycywgaGVhZGVycyk7XG4gICAgfVxuICAgIGV4dGVuZChyZXFIZWFkZXJzLCB7XG4gICAgICAgICdVcGdyYWRlJzogJ3dlYnNvY2tldCcsXG4gICAgICAgICdDb25uZWN0aW9uJzogJ1VwZ3JhZGUnLFxuICAgICAgICAnU2VjLVdlYlNvY2tldC1WZXJzaW9uJzogdGhpcy5jb25maWcud2ViU29ja2V0VmVyc2lvbi50b1N0cmluZygxMCksXG4gICAgICAgICdTZWMtV2ViU29ja2V0LUtleSc6IHRoaXMuYmFzZTY0bm9uY2UsXG4gICAgICAgICdIb3N0JzogcmVxSGVhZGVycy5Ib3N0IHx8IGhvc3RIZWFkZXJWYWx1ZVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMucHJvdG9jb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVxSGVhZGVyc1snU2VjLVdlYlNvY2tldC1Qcm90b2NvbCddID0gdGhpcy5wcm90b2NvbHMuam9pbignLCAnKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3JpZ2luKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy53ZWJTb2NrZXRWZXJzaW9uID09PSAxMykge1xuICAgICAgICAgICAgcmVxSGVhZGVyc1snT3JpZ2luJ10gPSB0aGlzLm9yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbmZpZy53ZWJTb2NrZXRWZXJzaW9uID09PSA4KSB7XG4gICAgICAgICAgICByZXFIZWFkZXJzWydTZWMtV2ViU29ja2V0LU9yaWdpbiddID0gdGhpcy5vcmlnaW47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZXh0ZW5zaW9uc1xuXG4gICAgdmFyIHBhdGhBbmRRdWVyeTtcbiAgICAvLyBFbnN1cmUgaXQgYmVnaW5zIHdpdGggJy8nLlxuICAgIGlmICh0aGlzLnVybC5wYXRobmFtZSkge1xuICAgICAgICBwYXRoQW5kUXVlcnkgPSB0aGlzLnVybC5wYXRoO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLnVybC5wYXRoKSB7XG4gICAgICAgIHBhdGhBbmRRdWVyeSA9ICcvJyArIHRoaXMudXJsLnBhdGg7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXRoQW5kUXVlcnkgPSAnLyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdEVycm9yKGVycm9yKSB7XG4gICAgICAgIHNlbGYuX3JlcSA9IG51bGw7XG4gICAgICAgIHNlbGYuZW1pdCgnY29ubmVjdEZhaWxlZCcsIGVycm9yKTtcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgIGFnZW50OiBmYWxzZVxuICAgIH07XG4gICAgaWYgKGV4dHJhUmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKHJlcXVlc3RPcHRpb25zLCBleHRyYVJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLy8gVGhlc2Ugb3B0aW9ucyBhcmUgYWx3YXlzIG92ZXJyaWRkZW4gYnkgdGhlIGxpYnJhcnkuICBUaGUgdXNlciBpcyBub3RcbiAgICAvLyBhbGxvd2VkIHRvIHNwZWNpZnkgdGhlc2UgZGlyZWN0bHkuXG4gICAgZXh0ZW5kKHJlcXVlc3RPcHRpb25zLCB7XG4gICAgICAgIGhvc3RuYW1lOiB0aGlzLnVybC5ob3N0bmFtZSxcbiAgICAgICAgcG9ydDogdGhpcy51cmwucG9ydCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgcGF0aDogcGF0aEFuZFF1ZXJ5LFxuICAgICAgICBoZWFkZXJzOiByZXFIZWFkZXJzXG4gICAgfSk7XG4gICAgaWYgKHRoaXMuc2VjdXJlKSB7XG4gICAgICAgIHZhciB0bHNPcHRpb25zID0gdGhpcy5jb25maWcudGxzT3B0aW9ucztcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRsc09wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0bHNPcHRpb25zLmhhc093blByb3BlcnR5KGtleSkgJiYgZXhjbHVkZWRUbHNPcHRpb25zLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0T3B0aW9uc1trZXldID0gdGxzT3B0aW9uc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlcSA9IHRoaXMuX3JlcSA9ICh0aGlzLnNlY3VyZSA/IGh0dHBzIDogaHR0cCkucmVxdWVzdChyZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmVxLm9uKCd1cGdyYWRlJywgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdFVwZ3JhZGUocmVzcG9uc2UsIHNvY2tldCwgaGVhZCkge1xuICAgICAgICBzZWxmLl9yZXEgPSBudWxsO1xuICAgICAgICByZXEucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgaGFuZGxlUmVxdWVzdEVycm9yKTtcbiAgICAgICAgc2VsZi5zb2NrZXQgPSBzb2NrZXQ7XG4gICAgICAgIHNlbGYucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgc2VsZi5maXJzdERhdGFDaHVuayA9IGhlYWQ7XG4gICAgICAgIHNlbGYudmFsaWRhdGVIYW5kc2hha2UoKTtcbiAgICB9KTtcbiAgICByZXEub24oJ2Vycm9yJywgaGFuZGxlUmVxdWVzdEVycm9yKTtcblxuICAgIHJlcS5vbigncmVzcG9uc2UnLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBzZWxmLl9yZXEgPSBudWxsO1xuICAgICAgICBpZiAodXRpbHMuZXZlbnRFbWl0dGVyTGlzdGVuZXJDb3VudChzZWxmLCAnaHR0cFJlc3BvbnNlJykgPiAwKSB7XG4gICAgICAgICAgICBzZWxmLmVtaXQoJ2h0dHBSZXNwb25zZScsIHJlc3BvbnNlLCBzZWxmKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zb2NrZXQpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zb2NrZXQuZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRHVtcFBhcnRzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBoZWFkZXJOYW1lIGluIHJlc3BvbnNlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJEdW1wUGFydHMucHVzaChoZWFkZXJOYW1lICsgJzogJyArIHJlc3BvbnNlLmhlYWRlcnNbaGVhZGVyTmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5mYWlsSGFuZHNoYWtlKFxuICAgICAgICAgICAgICAgICdTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggYSBub24tMTAxIHN0YXR1czogJyArXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzQ29kZSArICcgJyArIHJlc3BvbnNlLnN0YXR1c01lc3NhZ2UgK1xuICAgICAgICAgICAgICAgICdcXG5SZXNwb25zZSBIZWFkZXJzIEZvbGxvdzpcXG4nICtcbiAgICAgICAgICAgICAgICBoZWFkZXJEdW1wUGFydHMuam9pbignXFxuJykgKyAnXFxuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJlcS5lbmQoKTtcbn07XG5cbldlYlNvY2tldENsaWVudC5wcm90b3R5cGUudmFsaWRhdGVIYW5kc2hha2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaGVhZGVycyA9IHRoaXMucmVzcG9uc2UuaGVhZGVycztcblxuICAgIGlmICh0aGlzLnByb3RvY29scy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBoZWFkZXJzWydzZWMtd2Vic29ja2V0LXByb3RvY29sJ107XG4gICAgICAgIGlmICh0aGlzLnByb3RvY29sKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm90b2NvbHMuaW5kZXhPZih0aGlzLnByb3RvY29sKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZhaWxIYW5kc2hha2UoJ1NlcnZlciBkaWQgbm90IHJlc3BvbmQgd2l0aCBhIHJlcXVlc3RlZCBwcm90b2NvbC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZhaWxIYW5kc2hha2UoJ0V4cGVjdGVkIGEgU2VjLVdlYlNvY2tldC1Qcm90b2NvbCBoZWFkZXIuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIShoZWFkZXJzWydjb25uZWN0aW9uJ10gJiYgaGVhZGVyc1snY29ubmVjdGlvbiddLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09ICd1cGdyYWRlJykpIHtcbiAgICAgICAgdGhpcy5mYWlsSGFuZHNoYWtlKCdFeHBlY3RlZCBhIENvbm5lY3Rpb246IFVwZ3JhZGUgaGVhZGVyIGZyb20gdGhlIHNlcnZlcicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCEoaGVhZGVyc1sndXBncmFkZSddICYmIGhlYWRlcnNbJ3VwZ3JhZGUnXS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnd2Vic29ja2V0JykpIHtcbiAgICAgICAgdGhpcy5mYWlsSGFuZHNoYWtlKCdFeHBlY3RlZCBhbiBVcGdyYWRlOiB3ZWJzb2NrZXQgaGVhZGVyIGZyb20gdGhlIHNlcnZlcicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNoYTEgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpO1xuICAgIHNoYTEudXBkYXRlKHRoaXMuYmFzZTY0bm9uY2UgKyAnMjU4RUFGQTUtRTkxNC00N0RBLTk1Q0EtQzVBQjBEQzg1QjExJyk7XG4gICAgdmFyIGV4cGVjdGVkS2V5ID0gc2hhMS5kaWdlc3QoJ2Jhc2U2NCcpO1xuXG4gICAgaWYgKCFoZWFkZXJzWydzZWMtd2Vic29ja2V0LWFjY2VwdCddKSB7XG4gICAgICAgIHRoaXMuZmFpbEhhbmRzaGFrZSgnRXhwZWN0ZWQgU2VjLVdlYlNvY2tldC1BY2NlcHQgaGVhZGVyIGZyb20gc2VydmVyJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaGVhZGVyc1snc2VjLXdlYnNvY2tldC1hY2NlcHQnXSAhPT0gZXhwZWN0ZWRLZXkpIHtcbiAgICAgICAgdGhpcy5mYWlsSGFuZHNoYWtlKCdTZWMtV2ViU29ja2V0LUFjY2VwdCBoZWFkZXIgZnJvbSBzZXJ2ZXIgZGlkblxcJ3QgbWF0Y2ggZXhwZWN0ZWQgdmFsdWUgb2YgJyArIGV4cGVjdGVkS2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFN1cHBvcnQgZXh0ZW5zaW9uc1xuXG4gICAgdGhpcy5zdWNjZWVkSGFuZHNoYWtlKCk7XG59O1xuXG5XZWJTb2NrZXRDbGllbnQucHJvdG90eXBlLmZhaWxIYW5kc2hha2UgPSBmdW5jdGlvbihlcnJvckRlc2NyaXB0aW9uKSB7XG4gICAgaWYgKHRoaXMuc29ja2V0ICYmIHRoaXMuc29ja2V0LndyaXRhYmxlKSB7XG4gICAgICAgIHRoaXMuc29ja2V0LmVuZCgpO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RGYWlsZWQnLCBuZXcgRXJyb3IoZXJyb3JEZXNjcmlwdGlvbikpO1xufTtcblxuV2ViU29ja2V0Q2xpZW50LnByb3RvdHlwZS5zdWNjZWVkSGFuZHNoYWtlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0Q29ubmVjdGlvbih0aGlzLnNvY2tldCwgW10sIHRoaXMucHJvdG9jb2wsIHRydWUsIHRoaXMuY29uZmlnKTtcblxuICAgIGNvbm5lY3Rpb24ud2ViU29ja2V0VmVyc2lvbiA9IHRoaXMuY29uZmlnLndlYlNvY2tldFZlcnNpb247XG4gICAgY29ubmVjdGlvbi5fYWRkU29ja2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuZW1pdCgnY29ubmVjdCcsIGNvbm5lY3Rpb24pO1xuICAgIGlmICh0aGlzLmZpcnN0RGF0YUNodW5rLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29ubmVjdGlvbi5oYW5kbGVTb2NrZXREYXRhKHRoaXMuZmlyc3REYXRhQ2h1bmspO1xuICAgIH1cbiAgICB0aGlzLmZpcnN0RGF0YUNodW5rID0gbnVsbDtcbn07XG5cbldlYlNvY2tldENsaWVudC5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fcmVxKSB7XG4gICAgICAgIHRoaXMuX3JlcS5hYm9ydCgpO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0Q2xpZW50O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaHR0cHNcIik7IiwiZGVjbGFyZSBnbG9iYWwge1xyXG5cdGludGVyZmFjZSBBcnJheTxUPiB7XHJcblx0XHRyZW1vdmUoZWxlbTogVCk6IEFycmF5PFQ+O1xyXG5cdH1cclxufVxyXG5cclxuaWYgKEFycmF5LnByb3RvdHlwZS5yZW1vdmUpIHtcclxuXHRBcnJheS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb248VD4odGhpczogVFtdLCBlbGVtOiBUKTogVFtdIHtcclxuXHRcdHJldHVybiB0aGlzLmZpbHRlcihlID0+IGUgIT09IGVsZW0pO1xyXG5cdH1cclxufVxyXG5cclxuaW1wb3J0IHtJU2Vzc2lvbkRhdGEgYXMgSVNlc3Npb25EYXRhLCBJU2Vzc2lvbkRhdGFDb25zdHJ1Y3RvciBhcyBJU2Vzc2lvbkRhdGFDb25zdHJ1Y3Rvcn0gZnJvbSAnLi9TZXNzaW9uRGF0YUludGVyZmFjZSc7XHJcblxyXG50eXBlIEZvckVhY2hQbGF5ZXJDYWxsYmFjayA9IChwbGF5ZXJJRCA6IG51bWJlcikgPT4gdm9pZDtcclxuY2xhc3MgU2Vzc2lvbiB7XHJcblx0cHJpdmF0ZSBpZCA6IG51bWJlcjtcclxuXHRwcml2YXRlIGN1cnJlbnRTZXNzaW9uRGF0YSA6IElTZXNzaW9uRGF0YTtcclxuXHRwcml2YXRlIGNvbm5lY3RlZFBsYXllcklEcyA6IG51bWJlcltdID0gW107XHJcblx0Z2V0IEN1cnJlbnRQbGF5ZXJDb3VudCgpIHsgcmV0dXJuIHRoaXMuY29ubmVjdGVkUGxheWVySURzLmxlbmd0aDsgfTtcclxuXHJcblx0Y29uc3RydWN0b3Ioc2Vzc2lvblR5cGUgOiBJU2Vzc2lvbkRhdGFDb25zdHJ1Y3RvciwgSUQgOiBudW1iZXIsIHNlc3Npb25DcmVhdGlvbkFyZ3VtZW50cyA6IGFueSlcclxuXHR7XHJcblx0XHR0aGlzLmlkID0gSUQ7XHJcblx0XHR0aGlzLmN1cnJlbnRTZXNzaW9uRGF0YSA9IG5ldyBzZXNzaW9uVHlwZShzZXNzaW9uQ3JlYXRpb25Bcmd1bWVudHMpO1xyXG5cdH1cclxuXHJcblx0SGFzUGxheWVySW5TZXNzaW9uKHBsYXllcklEIDogbnVtYmVyKSA6IGJvb2xlYW5cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5jb25uZWN0ZWRQbGF5ZXJJRHMuaW5kZXhPZihwbGF5ZXJJRCkgPiAtMTtcclxuXHR9XHJcblxyXG5cdEFkZFBsYXllckJ5SUQocGxheWVySUQgOiBudW1iZXIpIDogYm9vbGVhblxyXG5cdHtcclxuXHRcdGlmICh0aGlzLkhhc1BsYXllckluU2Vzc2lvbihwbGF5ZXJJRCkpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSBQbGF5ZXIgJHtwbGF5ZXJJRH0gaXMgYWxyZWFkeSBwYXJ0IG9mIHNlc3Npb24gJHt0aGlzLmlkfSAoY3VycmVudCBwbGF5ZXJzOiAke3RoaXMuY29ubmVjdGVkUGxheWVySURzLmpvaW4oJywgJyl9KWApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLmNvbm5lY3RlZFBsYXllcklEcy5wdXNoKHBsYXllcklEKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0UmVtb3ZlUGxheWVyQnlJRChwbGF5ZXJJRCA6IG51bWJlcikgOiBib29sZWFuXHJcblx0e1xyXG5cdFx0aWYgKCF0aGlzLkhhc1BsYXllckluU2Vzc2lvbihwbGF5ZXJJRCkpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSBQbGF5ZXIgJHtwbGF5ZXJJRH0gaXMgbm90IHBhcnQgb2Ygc2Vzc2lvbiAke3RoaXMuaWR9IChjdXJyZW50IHBsYXllcnM6ICR7dGhpcy5jb25uZWN0ZWRQbGF5ZXJJRHMuam9pbignLCAnKX0pYCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHRoaXMuY29ubmVjdGVkUGxheWVySURzLnNwbGljZSh0aGlzLmNvbm5lY3RlZFBsYXllcklEcy5pbmRleE9mKHBsYXllcklEKSwgMSk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdFVwZGF0ZShwbGF5ZXJJRCA6IG51bWJlciwgc2Vzc2lvblVwZGF0ZUFyZ3VtZW50cyA6IGFueSkgOiBib29sZWFuXHJcblx0e1xyXG5cdFx0aWYgKCF0aGlzLkhhc1BsYXllckluU2Vzc2lvbihwbGF5ZXJJRCkpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSBQbGF5ZXIgJHtwbGF5ZXJJRH0gaXMgbm90IHBhcnQgb2Ygc2Vzc2lvbiAke3RoaXMuaWR9IGFuZCB0aGVyZWZvcmUgY2FuJ3QgdXBkYXRlIHRoZSBzZXNzaW9uIChjdXJyZW50IHBsYXllcnM6ICR7dGhpcy5jb25uZWN0ZWRQbGF5ZXJJRHMuam9pbignLCAnKX0pYCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHRoaXMuY3VycmVudFNlc3Npb25EYXRhLlVwZGF0ZShzZXNzaW9uVXBkYXRlQXJndW1lbnRzKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0R2V0RGF0YSgpIDogYW55XHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFNlc3Npb25EYXRhIGFzIGFueTtcclxuXHR9XHJcblxyXG5cdEZvckVhY2hQbGF5ZXIoY2FsbGJhY2sgOiBGb3JFYWNoUGxheWVyQ2FsbGJhY2spXHJcblx0e1xyXG5cdFx0dGhpcy5jb25uZWN0ZWRQbGF5ZXJJRHMuZm9yRWFjaChjYWxsYmFjayk7XHJcblx0fVxyXG59O1xyXG5cclxuaW1wb3J0ICogYXMgaHR0cCBmcm9tICdodHRwJztcclxuaW1wb3J0ICogYXMgd3MgZnJvbSAnd2Vic29ja2V0JztcclxuXHJcbi8vQHRzLWlnbm9yZVxyXG5pbXBvcnQgaHR0cFNodXRkb3duIGZyb20gJ2h0dHAtc2h1dGRvd24nO1xyXG5cclxudHlwZSBjb21tYW5kU2lnbmF0dXJlID0gKHBsYXllcklEIDogbnVtYmVyLCBqc29uTWVzc2FnZSA6IGFueSkgPT4gYW55O1xyXG5leHBvcnQgY2xhc3MgU2Vzc2lvblNlcnZlclxyXG57XHJcblx0cHJpdmF0ZSBjb21tYW5kcyA6IHtbbmFtZSA6IHN0cmluZ106IGNvbW1hbmRTaWduYXR1cmV9ID0ge307XHJcblxyXG5cdHByaXZhdGUgbmV4dFNlc3Npb25JRCA6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBzZXNzaW9ucyA6IHtbSUQgOiBudW1iZXJdOiBTZXNzaW9ufSA9IHt9O1xyXG5cclxuXHRwcml2YXRlIG5leHRQbGF5ZXJJRCA6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBwbGF5ZXIgOiB7W0lEIDogbnVtYmVyXTogd3MuY29ubmVjdGlvbn0gPSB7fTtcclxuXHJcblx0cHJpdmF0ZSBzZXNzaW9uVHlwZSA6IElTZXNzaW9uRGF0YUNvbnN0cnVjdG9yO1xyXG5cdHByaXZhdGUgcG9ydCA6IG51bWJlciA9IC0xO1xyXG5cclxuXHRwcml2YXRlIGh0dHBTZXJ2ZXIgOiBhbnk7XHJcblx0cHJpdmF0ZSB3c1NlcnZlciA6IHdzLnNlcnZlcjtcclxuXHJcblx0cHJpdmF0ZSB2YWxpZGF0ZVNlc3Npb25JRChwbGF5ZXJJRCA6IG51bWJlciwgc2Vzc2lvbklEIDogYW55LCByZXF1ZXN0IDogc3RyaW5nKVxyXG5cdHtcclxuXHRcdGlmICh0eXBlb2Ygc2Vzc2lvbklEICE9IFwibnVtYmVyXCIpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSAke3JlcXVlc3R9IHJlcXVpcmVzIGEgJ3Nlc3Npb25JRCctcGFyYW1ldGVyIGFzIG51bWJlciEgKHN1cHBsaWVkOiAke3Nlc3Npb25JRH0gWyR7dHlwZW9mIHNlc3Npb25JRH1dKWApO1xyXG5cdFx0XHR0aGlzLnNlbmRNZXNzYWdlVG9QbGF5ZXIocGxheWVySUQsIEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0XHRcImNvbW1hbmRcIjogcmVxdWVzdCxcclxuXHRcdFx0XHRcInNlc3Npb25JRFwiOiAtMVxyXG5cdFx0XHR9KSk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy5zZXNzaW9uc1tzZXNzaW9uSURdKVxyXG5cdFx0e1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBbU2Vzc2lvblNlcnZlcl0gQXR0ZW1waW5nIHRvIHJ1biAke3JlcXVlc3R9IG9uIHNlc3Npb24gJyR7c2Vzc2lvbklEfScgd2lsbCBmYWlsLCBhcyB0aGUgc2Vzc2lvbiBkb2Vzbid0IGV4aXN0YCk7XHJcblx0XHRcdHRoaXMuc2VuZE1lc3NhZ2VUb1BsYXllcihwbGF5ZXJJRCwgSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFwiY29tbWFuZFwiOiByZXF1ZXN0LFxyXG5cdFx0XHRcdFwic2Vzc2lvbklEXCI6IC0yXHJcblx0XHRcdH0pKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNldHVwQ29tbWFuZHMoKVxyXG5cdHtcclxuXHRcdHRoaXMuY29tbWFuZHNbXCJjcmVhdGVTZXNzaW9uXCJdID0gKHBsYXllcklEIDogbnVtYmVyLCBqc29uTWVzc2FnZSA6IGFueSkgPT5cclxuXHRcdHtcclxuXHRcdFx0Y29uc3QgbmV3U2Vzc2lvbklEID0gdGhpcy5nZW5lcmF0ZVNlc3Npb25JRCgpO1xyXG5cdFx0XHR0aGlzLnNlc3Npb25zW25ld1Nlc3Npb25JRF0gPSBuZXcgU2Vzc2lvbih0aGlzLnNlc3Npb25UeXBlLCBuZXdTZXNzaW9uSUQsIGpzb25NZXNzYWdlLnBhcmFtZXRlcnMpO1xyXG5cdFx0XHRpZiAoIXRoaXMuc2Vzc2lvbnNbbmV3U2Vzc2lvbklEXS5BZGRQbGF5ZXJCeUlEKHBsYXllcklEKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSBVbmFibGUgdG8gYWRkIHBsYXllciAke3BsYXllcklEfSB0byBuZXdseSBjcmVhdGVkIHNlc3Npb24gJHtuZXdTZXNzaW9uSUR9YCk7XHJcblx0XHRcdFx0dGhpcy5zZW5kTWVzc2FnZVRvUGxheWVyKHBsYXllcklELCBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdFx0XHRcImNvbW1hbmRcIjogXCJzZXNzaW9uSm9pblwiLFxyXG5cdFx0XHRcdFx0XCJzZXNzaW9uSURcIjogLTEsXHJcblx0XHRcdFx0XHRcInNlc3Npb25cIjoge31cclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhgW1Nlc3Npb25TZXJ2ZXJdIENyZWF0ZWQgbmV3IHNlc3Npb24gd2l0aCBJRCAke25ld1Nlc3Npb25JRH1gKTtcclxuXHJcblx0XHRcdHRoaXMuc2VuZE1lc3NhZ2VUb1BsYXllcihwbGF5ZXJJRCwgSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFwiY29tbWFuZFwiOiBcInNlc3Npb25Kb2luXCIsXHJcblx0XHRcdFx0XCJzZXNzaW9uSURcIjogbmV3U2Vzc2lvbklELFxyXG5cdFx0XHRcdFwic2Vzc2lvblwiOiB0aGlzLnNlc3Npb25zW25ld1Nlc3Npb25JRF0uR2V0RGF0YSgpXHJcblx0XHRcdH0pKTtcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5jb21tYW5kc1tcInVwZGF0ZVNlc3Npb25cIl0gPSAocGxheWVySUQgOiBudW1iZXIsIGpzb25NZXNzYWdlIDogYW55KSA9PlxyXG5cdFx0e1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgW1Nlc3Npb25TZXJ2ZXJdIFBsYXllciAke3BsYXllcklEfSBhdHRlbXB0aW5nIHRvIHVwZGF0ZSBzZXNzaW9uICR7anNvbk1lc3NhZ2Uuc2Vzc2lvbklEfWApO1xyXG5cdFx0XHRpZiAoIXRoaXMudmFsaWRhdGVTZXNzaW9uSUQocGxheWVySUQsIGpzb25NZXNzYWdlLnNlc3Npb25JRCwgXCJzZXNzaW9uVXBkYXRlXCIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIXRoaXMuc2Vzc2lvbnNbanNvbk1lc3NhZ2Uuc2Vzc2lvbklEXS5VcGRhdGUocGxheWVySUQsIGpzb25NZXNzYWdlLnBhcmFtZXRlcnMpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5zZW5kTWVzc2FnZVRvUGxheWVyKHBsYXllcklELCBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdFx0XHRcImNvbW1hbmRcIjogXCJzZXNzaW9uVXBkYXRlXCIsXHJcblx0XHRcdFx0XHRcInNlc3Npb25JRFwiOiAtM1xyXG5cdFx0XHRcdH0pKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5zZXNzaW9uc1tqc29uTWVzc2FnZS5zZXNzaW9uSURdLkZvckVhY2hQbGF5ZXIoKChwbGF5ZXJJRCA6IG51bWJlcikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuc2VuZE1lc3NhZ2VUb1BsYXllcihwbGF5ZXJJRCwgSlNPTi5zdHJpbmdpZnkoe1wiY29tbWFuZFwiOiBcInNlc3Npb25VcGRhdGVcIiwgXCJzZXNzaW9uSURcIjoganNvbk1lc3NhZ2Uuc2Vzc2lvbklELCBcInNlc3Npb25cIjogdGhpcy5zZXNzaW9uc1tqc29uTWVzc2FnZS5zZXNzaW9uSURdLkdldERhdGEoKX0pKTtcclxuXHRcdFx0fSkuYmluZCh0aGlzKSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuY29tbWFuZHNbXCJqb2luU2Vzc2lvblwiXSA9IChwbGF5ZXJJRCA6IG51bWJlciwganNvbk1lc3NhZ2UgOiBhbnkpID0+XHJcblx0XHR7XHJcblx0XHRcdGlmIChqc29uTWVzc2FnZS5zZXNzaW9uSUQgIT0gLTEgJiYgIXRoaXMudmFsaWRhdGVTZXNzaW9uSUQocGxheWVySUQsIGpzb25NZXNzYWdlLnNlc3Npb25JRCwgXCJzZXNzaW9uSm9pblwiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcmVxdWVzdGluZyBhIGpvaW4gdG8gc2Vzc2lvbiBJRCAtMSB3aWxsIGpvaW4gdGhlIGxhdGVzdCBzZXNzaW9uXHJcblx0XHRcdGlmIChqc29uTWVzc2FnZS5zZXNzaW9uSUQgPT0gLTEpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRqc29uTWVzc2FnZS5zZXNzaW9uSUQgPSB0aGlzLm5leHRTZXNzaW9uSUQgLSAxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIXRoaXMudmFsaWRhdGVTZXNzaW9uSUQocGxheWVySUQsIGpzb25NZXNzYWdlLnNlc3Npb25JRCwgXCJzZXNzaW9uSm9pblwiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCF0aGlzLnNlc3Npb25zW2pzb25NZXNzYWdlLnNlc3Npb25JRF0uQWRkUGxheWVyQnlJRChwbGF5ZXJJRCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLnNlbmRNZXNzYWdlVG9QbGF5ZXIocGxheWVySUQsIEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0XHRcdFwiY29tbWFuZFwiOiBcInNlc3Npb25Kb2luXCIsXHJcblx0XHRcdFx0XHRcInNlc3Npb25JRFwiOiAtM1xyXG5cdFx0XHRcdH0pKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuc2VuZE1lc3NhZ2VUb1BsYXllcihwbGF5ZXJJRCwgSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdFwiY29tbWFuZFwiOiBcInNlc3Npb25Kb2luXCIsXHJcblx0XHRcdFx0XCJzZXNzaW9uSURcIjoganNvbk1lc3NhZ2Uuc2Vzc2lvbklELFxyXG5cdFx0XHRcdFwic2Vzc2lvblwiOiB0aGlzLnNlc3Npb25zW2pzb25NZXNzYWdlLnNlc3Npb25JRF0uR2V0RGF0YSgpXHJcblx0XHRcdH0pKTtcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5jb21tYW5kc1tcImxlYXZlU2Vzc2lvblwiXSA9IChwbGF5ZXJJRCA6IG51bWJlciwganNvbk1lc3NhZ2UgOiBhbnkpID0+XHJcblx0XHR7XHJcblx0XHRcdGlmICghdGhpcy52YWxpZGF0ZVNlc3Npb25JRChwbGF5ZXJJRCwganNvbk1lc3NhZ2Uuc2Vzc2lvbklELCBcInNlc3Npb25MZWF2ZVwiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCF0aGlzLnNlc3Npb25zW2pzb25NZXNzYWdlLnNlc3Npb25JRF0uUmVtb3ZlUGxheWVyQnlJRChwbGF5ZXJJRCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLnNlbmRNZXNzYWdlVG9QbGF5ZXIocGxheWVySUQsIEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0XHRcdFwiY29tbWFuZFwiOiBcInNlc3Npb25MZWF2ZVwiLFxyXG5cdFx0XHRcdFx0XCJzZXNzaW9uSURcIjogLTNcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhgW1Nlc3Npb25TZXJ2ZXJdIFBsYXllcnMgbGVmdCBpbiBzZXNzaW9uICR7anNvbk1lc3NhZ2Uuc2Vzc2lvbklEfTogJHt0aGlzLnNlc3Npb25zW2pzb25NZXNzYWdlLnNlc3Npb25JRF0uQ3VycmVudFBsYXllckNvdW50fWApO1xyXG5cdFx0XHRpZiAoIXRoaXMuc2Vzc2lvbnNbanNvbk1lc3NhZ2Uuc2Vzc2lvbklEXS5DdXJyZW50UGxheWVyQ291bnQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhgW1Nlc3Npb25TZXJ2ZXJdIFNlc3Npb24gJHtqc29uTWVzc2FnZS5zZXNzaW9uSUR9IGhhcyBubyBwbGF5ZXJzIGxlZnQ7IGRpc2NhcmRpbmcgaXRgKTtcclxuXHRcdFx0XHRkZWxldGUgdGhpcy5zZXNzaW9uc1tqc29uTWVzc2FnZS5zZXNzaW9uSURdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnNlbmRNZXNzYWdlVG9QbGF5ZXIocGxheWVySUQsIEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0XHRcImNvbW1hbmRcIjogXCJzZXNzaW9uTGVhdmVcIixcclxuXHRcdFx0XHRcInNlc3Npb25JRFwiOiBqc29uTWVzc2FnZS5zZXNzaW9uSURcclxuXHRcdFx0fSkpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2VuZXJhdGVQbGF5ZXJNZXNzYWdlSGFuZGxlcihwbGF5ZXJJRCA6IG51bWJlcilcclxuXHR7XHJcblx0XHRyZXR1cm4gKG1lc3NhZ2UgOiB3cy5JTWVzc2FnZSkgPT4ge1xyXG5cdFx0XHRpZiAobWVzc2FnZS50eXBlID09PSAndXRmOCcpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0cnlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjb25zdCBqc29uTWVzc2FnZSA9IEpTT04ucGFyc2UobWVzc2FnZS51dGY4RGF0YSBhcyBzdHJpbmcpO1xyXG5cdFx0XHRcdFx0dGhpcy5oYW5kbGVNZXNzYWdlKHBsYXllcklELCBqc29uTWVzc2FnZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhdGNoKGUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y29uc29sZS5ncm91cChcIkludmFsaWQgSlNPTiBzdHJpbmcgcmVjZWl2ZWQhXCIpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihtZXNzYWdlKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmdyb3VwRW5kKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZW5lcmF0ZVBsYXllckNsb3NlSGFuZGxlcihwbGF5ZXJJRCA6IG51bWJlcilcclxuXHR7XHJcblx0XHRyZXR1cm4gKHJlYXNvbkNvZGUgOiBudW1iZXIsIGRlc2NyaXB0aW9uIDogc3RyaW5nKSA9PiB7XHJcblx0XHRcdHRoaXMucmVtb3ZlUGxheWVyKHBsYXllcklEKTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZVBsYXllcihwbGF5ZXJJRCA6IG51bWJlcilcclxuXHR7XHJcblx0XHRjb25zb2xlLmxvZyhgW1Nlc3Npb25TZXJ2ZXJdIENvbm5lY3Rpb24gZnJvbSBwbGF5ZXIgJHtwbGF5ZXJJRH0gY2xvc2VkLi4uYCk7XHJcblx0XHRmb3IgKGNvbnN0IHNlc3Npb25JRCBpbiB0aGlzLnNlc3Npb25zKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmNvbW1hbmRzLmxlYXZlU2Vzc2lvbi5hcHBseSh0aGlzLCBbcGxheWVySUQsIHtcInNlc3Npb25JRFwiOiBwYXJzZUludChzZXNzaW9uSUQpfV0pO1xyXG5cdFx0fVxyXG5cdFx0ZGVsZXRlIHRoaXMucGxheWVyW3BsYXllcklEXTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaGFuZGxlTmV3UGxheWVyKHJlcXVlc3QgOiB3cy5yZXF1ZXN0KVxyXG5cdHtcclxuXHRcdGNvbnN0IGNvbm5lY3Rpb24gOiB3cy5jb25uZWN0aW9uID0gcmVxdWVzdC5hY2NlcHQodW5kZWZpbmVkLCByZXF1ZXN0Lm9yaWdpbik7XHJcblx0XHRcclxuXHRcdGNvbnN0IHBsYXllcklEIDogbnVtYmVyID0gdGhpcy5nZW5lcmF0ZVBsYXllcklEKCk7XHJcblx0XHR0aGlzLnBsYXllcltwbGF5ZXJJRF0gPSBjb25uZWN0aW9uO1xyXG5cclxuXHRcdHRoaXMucGxheWVyW3BsYXllcklEXS5vbignbWVzc2FnZScsIHRoaXMuZ2VuZXJhdGVQbGF5ZXJNZXNzYWdlSGFuZGxlcihwbGF5ZXJJRCkpO1xyXG5cclxuXHRcdHRoaXMucGxheWVyW3BsYXllcklEXS5vbignY2xvc2UnLCB0aGlzLmdlbmVyYXRlUGxheWVyQ2xvc2VIYW5kbGVyKHBsYXllcklEKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKHNlc3Npb25UeXBlIDogSVNlc3Npb25EYXRhQ29uc3RydWN0b3IsIHBvcnQgOiBudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5wb3J0ID0gcG9ydDtcclxuXHJcblx0XHR0aGlzLnNlc3Npb25UeXBlID0gc2Vzc2lvblR5cGU7XHJcblxyXG5cdFx0dGhpcy5odHRwU2VydmVyID0gaHR0cFNodXRkb3duKGh0dHAuY3JlYXRlU2VydmVyKCgpID0+IHt9KSk7XHJcblxyXG5cdFx0dGhpcy53c1NlcnZlciA9IG5ldyB3cy5zZXJ2ZXIoeyBodHRwU2VydmVyOiB0aGlzLmh0dHBTZXJ2ZXIgfSk7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgQ3JlYXRlKHNlc3Npb25UeXBlIDogSVNlc3Npb25EYXRhQ29uc3RydWN0b3IsIHBvcnQgOiBudW1iZXIpIDogUHJvbWlzZTxTZXNzaW9uU2VydmVyPlxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxTZXNzaW9uU2VydmVyPigocmVzb2x2ZSwgcmVqZWN0KT0+XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IG5ld1NlcnZlciA6IFNlc3Npb25TZXJ2ZXIgPSBuZXcgU2Vzc2lvblNlcnZlcihzZXNzaW9uVHlwZSwgcG9ydCk7XHJcblxyXG5cdFx0XHRuZXdTZXJ2ZXIuc2V0dXBDb21tYW5kcygpO1xyXG5cclxuXHRcdFx0bmV3U2VydmVyLndzU2VydmVyLm9uKCdyZXF1ZXN0JywgbmV3U2VydmVyLmhhbmRsZU5ld1BsYXllci5iaW5kKG5ld1NlcnZlcikpO1xyXG5cclxuXHRcdFx0bmV3U2VydmVyLmh0dHBTZXJ2ZXIub24oJ2xpc3RlbmluZycsICgpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhgW1Nlc3Npb25TZXJ2ZXJdIExpc3RlbmluZyBvbiBwb3J0ICR7bmV3U2VydmVyLnBvcnR9Li4uYCk7XHJcblx0XHRcdFx0cmVzb2x2ZShuZXdTZXJ2ZXIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdG5ld1NlcnZlci53c1NlcnZlci5vbignZXJyb3InLCAoKSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y29uc29sZS5ncm91cChgW1Nlc3Npb25TZXJ2ZXJdIEVycm9yIGluaXRpYWxpemluZyBzZXJ2ZXIhYCk7XHJcblx0XHRcdFx0cmVqZWN0KCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bmV3U2VydmVyLmh0dHBTZXJ2ZXIubGlzdGVuKG5ld1NlcnZlci5wb3J0KTtcclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHRTaHV0ZG93bigpIDogUHJvbWlzZTx2b2lkPlxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdHRoaXMuaHR0cFNlcnZlci5zaHV0ZG93bigoKT0+e1xyXG5cdFx0XHRcdHJlc29sdmUoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdFJ1bm5pbmcoKSA6IGJvb2xlYW5cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5odHRwU2VydmVyLnNodXRkb3duKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdlbmVyYXRlUGxheWVySUQoKVxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLm5leHRQbGF5ZXJJRCsrO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZW5lcmF0ZVNlc3Npb25JRCgpXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMubmV4dFNlc3Npb25JRCsrO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVNZXNzYWdlKHBsYXllcklEIDogbnVtYmVyLCBqc29uTWVzc2FnZSA6IGFueSlcclxuXHR7XHJcblx0XHRpZiAoanNvbk1lc3NhZ2UuY29tbWFuZClcclxuXHRcdHtcclxuXHRcdFx0aWYgKHR5cGVvZiB0aGlzLmNvbW1hbmRzW2pzb25NZXNzYWdlLmNvbW1hbmRdID09IFwiZnVuY3Rpb25cIilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuY29tbWFuZHNbanNvbk1lc3NhZ2UuY29tbWFuZF0uYXBwbHkodGhpcywgW3BsYXllcklELCBqc29uTWVzc2FnZV0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSBubyBjb21tYW5kIGNhbGxlZCBcIiR7anNvbk1lc3NhZ2UuY29tbWFuZH1cIiBhdmFpbGFibGVgKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNlbmRNZXNzYWdlVG9QbGF5ZXIocGxheWVySUQgOiBudW1iZXIsIG1lc3NhZ2UgOiBzdHJpbmcpXHJcblx0e1xyXG5cdFx0aWYgKCF0aGlzLnBsYXllcltwbGF5ZXJJRF0pXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYFtTZXNzaW9uU2VydmVyXSBObyBwbGF5ZXIgd2l0aCBJRCAke3BsYXllcklEfSBpcyBjb25uZWN0ZWQhYCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnBsYXllcltwbGF5ZXJJRF0uc2VuZChtZXNzYWdlKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3dlYnNvY2tldCcpOyIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgICdzZXJ2ZXInICAgICAgIDogcmVxdWlyZSgnLi9XZWJTb2NrZXRTZXJ2ZXInKSxcbiAgICAnY2xpZW50JyAgICAgICA6IHJlcXVpcmUoJy4vV2ViU29ja2V0Q2xpZW50JyksXG4gICAgJ3JvdXRlcicgICAgICAgOiByZXF1aXJlKCcuL1dlYlNvY2tldFJvdXRlcicpLFxuICAgICdmcmFtZScgICAgICAgIDogcmVxdWlyZSgnLi9XZWJTb2NrZXRGcmFtZScpLFxuICAgICdyZXF1ZXN0JyAgICAgIDogcmVxdWlyZSgnLi9XZWJTb2NrZXRSZXF1ZXN0JyksXG4gICAgJ2Nvbm5lY3Rpb24nICAgOiByZXF1aXJlKCcuL1dlYlNvY2tldENvbm5lY3Rpb24nKSxcbiAgICAndzNjd2Vic29ja2V0JyA6IHJlcXVpcmUoJy4vVzNDV2ViU29ja2V0JyksXG4gICAgJ2RlcHJlY2F0aW9uJyAgOiByZXF1aXJlKCcuL0RlcHJlY2F0aW9uJyksXG4gICAgJ3ZlcnNpb24nICAgICAgOiByZXF1aXJlKCcuL3ZlcnNpb24nKVxufTtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICBDb3B5cmlnaHQgMjAxMC0yMDE1IEJyaWFuIE1jS2VsdmV5LlxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4vdXRpbHMnKS5leHRlbmQ7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3dlYnNvY2tldDpzZXJ2ZXInKTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG52YXIgV2ViU29ja2V0UmVxdWVzdCA9IHJlcXVpcmUoJy4vV2ViU29ja2V0UmVxdWVzdCcpO1xuXG52YXIgV2ViU29ja2V0U2VydmVyID0gZnVuY3Rpb24gV2ViU29ja2V0U2VydmVyKGNvbmZpZykge1xuICAgIC8vIFN1cGVyY2xhc3MgQ29uc3RydWN0b3JcbiAgICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMuX2hhbmRsZXJzID0ge1xuICAgICAgICB1cGdyYWRlOiB0aGlzLmhhbmRsZVVwZ3JhZGUuYmluZCh0aGlzKSxcbiAgICAgICAgcmVxdWVzdEFjY2VwdGVkOiB0aGlzLmhhbmRsZVJlcXVlc3RBY2NlcHRlZC5iaW5kKHRoaXMpLFxuICAgICAgICByZXF1ZXN0UmVzb2x2ZWQ6IHRoaXMuaGFuZGxlUmVxdWVzdFJlc29sdmVkLmJpbmQodGhpcylcbiAgICB9O1xuICAgIHRoaXMuY29ubmVjdGlvbnMgPSBbXTtcbiAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cyA9IFtdO1xuICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgdGhpcy5tb3VudChjb25maWcpO1xuICAgIH1cbn07XG5cbnV0aWwuaW5oZXJpdHMoV2ViU29ja2V0U2VydmVyLCBFdmVudEVtaXR0ZXIpO1xuXG5XZWJTb2NrZXRTZXJ2ZXIucHJvdG90eXBlLm1vdW50ID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgIC8vIFRoZSBodHRwIHNlcnZlciBpbnN0YW5jZSB0byBhdHRhY2ggdG8uICBSZXF1aXJlZC5cbiAgICAgICAgaHR0cFNlcnZlcjogbnVsbCxcblxuICAgICAgICAvLyA2NEtpQiBtYXggZnJhbWUgc2l6ZS5cbiAgICAgICAgbWF4UmVjZWl2ZWRGcmFtZVNpemU6IDB4MTAwMDAsXG5cbiAgICAgICAgLy8gMU1pQiBtYXggbWVzc2FnZSBzaXplLCBvbmx5IGFwcGxpY2FibGUgaWZcbiAgICAgICAgLy8gYXNzZW1ibGVGcmFnbWVudHMgaXMgdHJ1ZVxuICAgICAgICBtYXhSZWNlaXZlZE1lc3NhZ2VTaXplOiAweDEwMDAwMCxcblxuICAgICAgICAvLyBPdXRnb2luZyBtZXNzYWdlcyBsYXJnZXIgdGhhbiBmcmFnbWVudGF0aW9uVGhyZXNob2xkIHdpbGwgYmVcbiAgICAgICAgLy8gc3BsaXQgaW50byBtdWx0aXBsZSBmcmFnbWVudHMuXG4gICAgICAgIGZyYWdtZW50T3V0Z29pbmdNZXNzYWdlczogdHJ1ZSxcblxuICAgICAgICAvLyBPdXRnb2luZyBmcmFtZXMgYXJlIGZyYWdtZW50ZWQgaWYgdGhleSBleGNlZWQgdGhpcyB0aHJlc2hvbGQuXG4gICAgICAgIC8vIERlZmF1bHQgaXMgMTZLaUJcbiAgICAgICAgZnJhZ21lbnRhdGlvblRocmVzaG9sZDogMHg0MDAwLFxuXG4gICAgICAgIC8vIElmIHRydWUsIHRoZSBzZXJ2ZXIgd2lsbCBhdXRvbWF0aWNhbGx5IHNlbmQgYSBwaW5nIHRvIGFsbFxuICAgICAgICAvLyBjbGllbnRzIGV2ZXJ5ICdrZWVwYWxpdmVJbnRlcnZhbCcgbWlsbGlzZWNvbmRzLiAgVGhlIHRpbWVyIGlzXG4gICAgICAgIC8vIHJlc2V0IG9uIGFueSByZWNlaXZlZCBkYXRhIGZyb20gdGhlIGNsaWVudC5cbiAgICAgICAga2VlcGFsaXZlOiB0cnVlLFxuXG4gICAgICAgIC8vIFRoZSBpbnRlcnZhbCB0byBzZW5kIGtlZXBhbGl2ZSBwaW5ncyB0byBjb25uZWN0ZWQgY2xpZW50cyBpZiB0aGVcbiAgICAgICAgLy8gY29ubmVjdGlvbiBpcyBpZGxlLiAgQW55IHJlY2VpdmVkIGRhdGEgd2lsbCByZXNldCB0aGUgY291bnRlci5cbiAgICAgICAga2VlcGFsaXZlSW50ZXJ2YWw6IDIwMDAwLFxuXG4gICAgICAgIC8vIElmIHRydWUsIHRoZSBzZXJ2ZXIgd2lsbCBjb25zaWRlciBhbnkgY29ubmVjdGlvbiB0aGF0IGhhcyBub3RcbiAgICAgICAgLy8gcmVjZWl2ZWQgYW55IGRhdGEgd2l0aGluIHRoZSBhbW91bnQgb2YgdGltZSBzcGVjaWZpZWQgYnlcbiAgICAgICAgLy8gJ2tlZXBhbGl2ZUdyYWNlUGVyaW9kJyBhZnRlciBhIGtlZXBhbGl2ZSBwaW5nIGhhcyBiZWVuIHNlbnQgdG9cbiAgICAgICAgLy8gYmUgZGVhZCwgYW5kIHdpbGwgZHJvcCB0aGUgY29ubmVjdGlvbi5cbiAgICAgICAgLy8gSWdub3JlZCBpZiBrZWVwYWxpdmUgaXMgZmFsc2UuXG4gICAgICAgIGRyb3BDb25uZWN0aW9uT25LZWVwYWxpdmVUaW1lb3V0OiB0cnVlLFxuXG4gICAgICAgIC8vIFRoZSBhbW91bnQgb2YgdGltZSB0byB3YWl0IGFmdGVyIHNlbmRpbmcgYSBrZWVwYWxpdmUgcGluZyBiZWZvcmVcbiAgICAgICAgLy8gY2xvc2luZyB0aGUgY29ubmVjdGlvbiBpZiB0aGUgY29ubmVjdGVkIHBlZXIgZG9lcyBub3QgcmVzcG9uZC5cbiAgICAgICAgLy8gSWdub3JlZCBpZiBrZWVwYWxpdmUgaXMgZmFsc2UuXG4gICAgICAgIGtlZXBhbGl2ZUdyYWNlUGVyaW9kOiAxMDAwMCxcblxuICAgICAgICAvLyBXaGV0aGVyIHRvIHVzZSBuYXRpdmUgVENQIGtlZXAtYWxpdmUgaW5zdGVhZCBvZiBXZWJTb2NrZXRzIHBpbmdcbiAgICAgICAgLy8gYW5kIHBvbmcgcGFja2V0cy4gIE5hdGl2ZSBUQ1Aga2VlcC1hbGl2ZSBzZW5kcyBzbWFsbGVyIHBhY2tldHNcbiAgICAgICAgLy8gb24gdGhlIHdpcmUgYW5kIHNvIHVzZXMgYmFuZHdpZHRoIG1vcmUgZWZmaWNpZW50bHkuICBUaGlzIG1heVxuICAgICAgICAvLyBiZSBtb3JlIGltcG9ydGFudCB3aGVuIHRhbGtpbmcgdG8gbW9iaWxlIGRldmljZXMuXG4gICAgICAgIC8vIElmIHRoaXMgdmFsdWUgaXMgc2V0IHRvIHRydWUsIHRoZW4gdGhlc2UgdmFsdWVzIHdpbGwgYmUgaWdub3JlZDpcbiAgICAgICAgLy8gICBrZWVwYWxpdmVHcmFjZVBlcmlvZFxuICAgICAgICAvLyAgIGRyb3BDb25uZWN0aW9uT25LZWVwYWxpdmVUaW1lb3V0XG4gICAgICAgIHVzZU5hdGl2ZUtlZXBhbGl2ZTogZmFsc2UsXG5cbiAgICAgICAgLy8gSWYgdHJ1ZSwgZnJhZ21lbnRlZCBtZXNzYWdlcyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgYXNzZW1ibGVkXG4gICAgICAgIC8vIGFuZCB0aGUgZnVsbCBtZXNzYWdlIHdpbGwgYmUgZW1pdHRlZCB2aWEgYSAnbWVzc2FnZScgZXZlbnQuXG4gICAgICAgIC8vIElmIGZhbHNlLCBlYWNoIGZyYW1lIHdpbGwgYmUgZW1pdHRlZCB2aWEgYSAnZnJhbWUnIGV2ZW50IGFuZFxuICAgICAgICAvLyB0aGUgYXBwbGljYXRpb24gd2lsbCBiZSByZXNwb25zaWJsZSBmb3IgYWdncmVnYXRpbmcgbXVsdGlwbGVcbiAgICAgICAgLy8gZnJhZ21lbnRlZCBmcmFtZXMuICBTaW5nbGUtZnJhbWUgbWVzc2FnZXMgd2lsbCBlbWl0IGEgJ21lc3NhZ2UnXG4gICAgICAgIC8vIGV2ZW50IGluIGFkZGl0aW9uIHRvIHRoZSAnZnJhbWUnIGV2ZW50LlxuICAgICAgICAvLyBNb3N0IHVzZXJzIHdpbGwgd2FudCB0byBsZWF2ZSB0aGlzIHNldCB0byAndHJ1ZSdcbiAgICAgICAgYXNzZW1ibGVGcmFnbWVudHM6IHRydWUsXG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyB0cnVlLCB3ZWJzb2NrZXQgY29ubmVjdGlvbnMgd2lsbCBiZSBhY2NlcHRlZFxuICAgICAgICAvLyByZWdhcmRsZXNzIG9mIHRoZSBwYXRoIGFuZCBwcm90b2NvbCBzcGVjaWZpZWQgYnkgdGhlIGNsaWVudC5cbiAgICAgICAgLy8gVGhlIHByb3RvY29sIGFjY2VwdGVkIHdpbGwgYmUgdGhlIGZpcnN0IHRoYXQgd2FzIHJlcXVlc3RlZFxuICAgICAgICAvLyBieSB0aGUgY2xpZW50LiAgQ2xpZW50cyBmcm9tIGFueSBvcmlnaW4gd2lsbCBiZSBhY2NlcHRlZC5cbiAgICAgICAgLy8gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZSBzaW1wbGVzdCBvZiBjYXNlcy4gIFlvdSBzaG91bGRcbiAgICAgICAgLy8gcHJvYmFibHkgbGVhdmUgdGhpcyBzZXQgdG8gJ2ZhbHNlJyBhbmQgaW5zcGVjdCB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBvYmplY3QgdG8gbWFrZSBzdXJlIGl0J3MgYWNjZXB0YWJsZSBiZWZvcmUgYWNjZXB0aW5nIGl0LlxuICAgICAgICBhdXRvQWNjZXB0Q29ubmVjdGlvbnM6IGZhbHNlLFxuXG4gICAgICAgIC8vIFdoZXRoZXIgb3Igbm90IHRoZSBYLUZvcndhcmRlZC1Gb3IgaGVhZGVyIHNob3VsZCBiZSByZXNwZWN0ZWQuXG4gICAgICAgIC8vIEl0J3MgaW1wb3J0YW50IHRvIHNldCB0aGlzIHRvICd0cnVlJyB3aGVuIGFjY2VwdGluZyBjb25uZWN0aW9uc1xuICAgICAgICAvLyBmcm9tIHVudHJ1c3RlZCBjbGllbnRzLCBhcyBhIG1hbGljaW91cyBjbGllbnQgY291bGQgc3Bvb2YgaXRzXG4gICAgICAgIC8vIElQIGFkZHJlc3MgYnkgc2ltcGx5IHNldHRpbmcgdGhpcyBoZWFkZXIuICBJdCdzIG1lYW50IHRvIGJlIGFkZGVkXG4gICAgICAgIC8vIGJ5IGEgdHJ1c3RlZCBwcm94eSBvciBvdGhlciBpbnRlcm1lZGlhcnkgd2l0aGluIHlvdXIgb3duXG4gICAgICAgIC8vIGluZnJhc3RydWN0dXJlLlxuICAgICAgICAvLyBTZWU6ICBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1gtRm9yd2FyZGVkLUZvclxuICAgICAgICBpZ25vcmVYRm9yd2FyZGVkRm9yOiBmYWxzZSxcblxuICAgICAgICAvLyBUaGUgTmFnbGUgQWxnb3JpdGhtIG1ha2VzIG1vcmUgZWZmaWNpZW50IHVzZSBvZiBuZXR3b3JrIHJlc291cmNlc1xuICAgICAgICAvLyBieSBpbnRyb2R1Y2luZyBhIHNtYWxsIGRlbGF5IGJlZm9yZSBzZW5kaW5nIHNtYWxsIHBhY2tldHMgc28gdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtZXNzYWdlcyBjYW4gYmUgYmF0Y2hlZCB0b2dldGhlciBiZWZvcmUgZ29pbmcgb250byB0aGVcbiAgICAgICAgLy8gd2lyZS4gIFRoaXMgaG93ZXZlciBjb21lcyBhdCB0aGUgY29zdCBvZiBsYXRlbmN5LCBzbyB0aGUgZGVmYXVsdFxuICAgICAgICAvLyBpcyB0byBkaXNhYmxlIGl0LiAgSWYgeW91IGRvbid0IG5lZWQgbG93IGxhdGVuY3kgYW5kIGFyZSBzdHJlYW1pbmdcbiAgICAgICAgLy8gbG90cyBvZiBzbWFsbCBtZXNzYWdlcywgeW91IGNhbiBjaGFuZ2UgdGhpcyB0byAnZmFsc2UnXG4gICAgICAgIGRpc2FibGVOYWdsZUFsZ29yaXRobTogdHJ1ZSxcblxuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGFmdGVyIHNlbmRpbmcgYSBjbG9zZSBmcmFtZVxuICAgICAgICAvLyBmb3IgYW4gYWNrbm93bGVkZ2VtZW50IHRvIGNvbWUgYmFjayBiZWZvcmUgZ2l2aW5nIHVwIGFuZCBqdXN0XG4gICAgICAgIC8vIGNsb3NpbmcgdGhlIHNvY2tldC5cbiAgICAgICAgY2xvc2VUaW1lb3V0OiA1MDAwXG4gICAgfTtcbiAgICBleHRlbmQodGhpcy5jb25maWcsIGNvbmZpZyk7XG5cbiAgICBpZiAodGhpcy5jb25maWcuaHR0cFNlcnZlcikge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5jb25maWcuaHR0cFNlcnZlcikpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmh0dHBTZXJ2ZXIgPSBbdGhpcy5jb25maWcuaHR0cFNlcnZlcl07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVwZ3JhZGVIYW5kbGVyID0gdGhpcy5faGFuZGxlcnMudXBncmFkZTtcbiAgICAgICAgdGhpcy5jb25maWcuaHR0cFNlcnZlci5mb3JFYWNoKGZ1bmN0aW9uKGh0dHBTZXJ2ZXIpIHtcbiAgICAgICAgICAgIGh0dHBTZXJ2ZXIub24oJ3VwZ3JhZGUnLCB1cGdyYWRlSGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBzcGVjaWZ5IGFuIGh0dHBTZXJ2ZXIgb24gd2hpY2ggdG8gbW91bnQgdGhlIFdlYlNvY2tldCBzZXJ2ZXIuJyk7XG4gICAgfVxufTtcblxuV2ViU29ja2V0U2VydmVyLnByb3RvdHlwZS51bm1vdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVwZ3JhZGVIYW5kbGVyID0gdGhpcy5faGFuZGxlcnMudXBncmFkZTtcbiAgICB0aGlzLmNvbmZpZy5odHRwU2VydmVyLmZvckVhY2goZnVuY3Rpb24oaHR0cFNlcnZlcikge1xuICAgICAgICBodHRwU2VydmVyLnJlbW92ZUxpc3RlbmVyKCd1cGdyYWRlJywgdXBncmFkZUhhbmRsZXIpO1xuICAgIH0pO1xufTtcblxuV2ViU29ja2V0U2VydmVyLnByb3RvdHlwZS5jbG9zZUFsbENvbm5lY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb25uZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24ocmVxdWVzdCkge1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJlcXVlc3QucmVqZWN0KDUwMyk7IC8vIEhUVFAgNTAzIFNlcnZpY2UgVW5hdmFpbGFibGVcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5XZWJTb2NrZXRTZXJ2ZXIucHJvdG90eXBlLmJyb2FkY2FzdCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSB7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0Qnl0ZXMoZGF0YSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZihkYXRhLnRvU3RyaW5nKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmJyb2FkY2FzdFVURihkYXRhKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRTZXJ2ZXIucHJvdG90eXBlLmJyb2FkY2FzdFVURiA9IGZ1bmN0aW9uKHV0ZkRhdGEpIHtcbiAgICB0aGlzLmNvbm5lY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oY29ubmVjdGlvbikge1xuICAgICAgICBjb25uZWN0aW9uLnNlbmRVVEYodXRmRGF0YSk7XG4gICAgfSk7XG59O1xuXG5XZWJTb2NrZXRTZXJ2ZXIucHJvdG90eXBlLmJyb2FkY2FzdEJ5dGVzID0gZnVuY3Rpb24oYmluYXJ5RGF0YSkge1xuICAgIHRoaXMuY29ubmVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihjb25uZWN0aW9uKSB7XG4gICAgICAgIGNvbm5lY3Rpb24uc2VuZEJ5dGVzKGJpbmFyeURhdGEpO1xuICAgIH0pO1xufTtcblxuV2ViU29ja2V0U2VydmVyLnByb3RvdHlwZS5zaHV0RG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudW5tb3VudCgpO1xuICAgIHRoaXMuY2xvc2VBbGxDb25uZWN0aW9ucygpO1xufTtcblxuV2ViU29ja2V0U2VydmVyLnByb3RvdHlwZS5oYW5kbGVVcGdyYWRlID0gZnVuY3Rpb24ocmVxdWVzdCwgc29ja2V0KSB7XG4gICAgdmFyIHdzUmVxdWVzdCA9IG5ldyBXZWJTb2NrZXRSZXF1ZXN0KHNvY2tldCwgcmVxdWVzdCwgdGhpcy5jb25maWcpO1xuICAgIHRyeSB7XG4gICAgICAgIHdzUmVxdWVzdC5yZWFkSGFuZHNoYWtlKCk7XG4gICAgfVxuICAgIGNhdGNoKGUpIHtcbiAgICAgICAgd3NSZXF1ZXN0LnJlamVjdChcbiAgICAgICAgICAgIGUuaHR0cENvZGUgPyBlLmh0dHBDb2RlIDogNDAwLFxuICAgICAgICAgICAgZS5tZXNzYWdlLFxuICAgICAgICAgICAgZS5oZWFkZXJzXG4gICAgICAgICk7XG4gICAgICAgIGRlYnVnKCdJbnZhbGlkIGhhbmRzaGFrZTogJXMnLCBlLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLnB1c2god3NSZXF1ZXN0KTtcblxuICAgIHdzUmVxdWVzdC5vbmNlKCdyZXF1ZXN0QWNjZXB0ZWQnLCB0aGlzLl9oYW5kbGVycy5yZXF1ZXN0QWNjZXB0ZWQpO1xuICAgIHdzUmVxdWVzdC5vbmNlKCdyZXF1ZXN0UmVzb2x2ZWQnLCB0aGlzLl9oYW5kbGVycy5yZXF1ZXN0UmVzb2x2ZWQpO1xuXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5hdXRvQWNjZXB0Q29ubmVjdGlvbnMgJiYgdXRpbHMuZXZlbnRFbWl0dGVyTGlzdGVuZXJDb3VudCh0aGlzLCAncmVxdWVzdCcpID4gMCkge1xuICAgICAgICB0aGlzLmVtaXQoJ3JlcXVlc3QnLCB3c1JlcXVlc3QpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmNvbmZpZy5hdXRvQWNjZXB0Q29ubmVjdGlvbnMpIHtcbiAgICAgICAgd3NSZXF1ZXN0LmFjY2VwdCh3c1JlcXVlc3QucmVxdWVzdGVkUHJvdG9jb2xzWzBdLCB3c1JlcXVlc3Qub3JpZ2luKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdzUmVxdWVzdC5yZWplY3QoNDA0LCAnTm8gaGFuZGxlciBpcyBjb25maWd1cmVkIHRvIGFjY2VwdCB0aGUgY29ubmVjdGlvbi4nKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRTZXJ2ZXIucHJvdG90eXBlLmhhbmRsZVJlcXVlc3RBY2NlcHRlZCA9IGZ1bmN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgY29ubmVjdGlvbi5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uKGNsb3NlUmVhc29uLCBkZXNjcmlwdGlvbikge1xuICAgICAgICBzZWxmLmhhbmRsZUNvbm5lY3Rpb25DbG9zZShjb25uZWN0aW9uLCBjbG9zZVJlYXNvbiwgZGVzY3JpcHRpb24pO1xuICAgIH0pO1xuICAgIHRoaXMuY29ubmVjdGlvbnMucHVzaChjb25uZWN0aW9uKTtcbiAgICB0aGlzLmVtaXQoJ2Nvbm5lY3QnLCBjb25uZWN0aW9uKTtcbn07XG5cbldlYlNvY2tldFNlcnZlci5wcm90b3R5cGUuaGFuZGxlQ29ubmVjdGlvbkNsb3NlID0gZnVuY3Rpb24oY29ubmVjdGlvbiwgY2xvc2VSZWFzb24sIGRlc2NyaXB0aW9uKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5jb25uZWN0aW9ucy5pbmRleE9mKGNvbm5lY3Rpb24pO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgY29ubmVjdGlvbiwgY2xvc2VSZWFzb24sIGRlc2NyaXB0aW9uKTtcbn07XG5cbldlYlNvY2tldFNlcnZlci5wcm90b3R5cGUuaGFuZGxlUmVxdWVzdFJlc29sdmVkID0gZnVuY3Rpb24ocmVxdWVzdCkge1xuICAgIHZhciBpbmRleCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YocmVxdWVzdCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkgeyB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoaW5kZXgsIDEpOyB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldFNlcnZlcjtcbiIsIi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICpcbiAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2RlYnVnJyk7XG5leHBvcnRzLmxvZyA9IGxvZztcbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIGNocm9tZVxuICAgICAgICAgICAgICAgJiYgJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIGNocm9tZS5zdG9yYWdlXG4gICAgICAgICAgICAgICAgICA/IGNocm9tZS5zdG9yYWdlLmxvY2FsXG4gICAgICAgICAgICAgICAgICA6IGxvY2Fsc3RvcmFnZSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcbiAgJ2xpZ2h0c2VhZ3JlZW4nLFxuICAnZm9yZXN0Z3JlZW4nLFxuICAnZ29sZGVucm9kJyxcbiAgJ2RvZGdlcmJsdWUnLFxuICAnZGFya29yY2hpZCcsXG4gICdjcmltc29uJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG4gIC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcbiAgLy8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2VcbiAgLy8gZXhwbGljaXRseVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgd2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gaXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcbiAgLy8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcbiAgcmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG4gICAgLy8gaXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG4gICAgLy8gaXMgZmlyZWZveCA+PSB2MzE/XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG4gICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzEpIHx8XG4gICAgLy8gZG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuICAgICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmV4cG9ydHMuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24odikge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVyci5tZXNzYWdlO1xuICB9XG59O1xuXG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG4gIHZhciB1c2VDb2xvcnMgPSB0aGlzLnVzZUNvbG9ycztcblxuICBhcmdzWzBdID0gKHVzZUNvbG9ycyA/ICclYycgOiAnJylcbiAgICArIHRoaXMubmFtZXNwYWNlXG4gICAgKyAodXNlQ29sb3JzID8gJyAlYycgOiAnICcpXG4gICAgKyBhcmdzWzBdXG4gICAgKyAodXNlQ29sb3JzID8gJyVjICcgOiAnICcpXG4gICAgKyAnKycgKyBleHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cbiAgaWYgKCF1c2VDb2xvcnMpIHJldHVybjtcblxuICB2YXIgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG4gIGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpXG5cbiAgLy8gdGhlIGZpbmFsIFwiJWNcIiBpcyBzb21ld2hhdCB0cmlja3ksIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb3RoZXJcbiAgLy8gYXJndW1lbnRzIHBhc3NlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSAlYywgc28gd2UgbmVlZCB0b1xuICAvLyBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGluZGV4IHRvIGluc2VydCB0aGUgQ1NTIGludG9cbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGxhc3RDID0gMDtcbiAgYXJnc1swXS5yZXBsYWNlKC8lW2EtekEtWiVdL2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgaWYgKCclJScgPT09IG1hdGNoKSByZXR1cm47XG4gICAgaW5kZXgrKztcbiAgICBpZiAoJyVjJyA9PT0gbWF0Y2gpIHtcbiAgICAgIC8vIHdlIG9ubHkgYXJlIGludGVyZXN0ZWQgaW4gdGhlICpsYXN0KiAlY1xuICAgICAgLy8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcbiAgICAgIGxhc3RDID0gaW5kZXg7XG4gICAgfVxuICB9KTtcblxuICBhcmdzLnNwbGljZShsYXN0QywgMCwgYyk7XG59XG5cbi8qKlxuICogSW52b2tlcyBgY29uc29sZS5sb2coKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmxvZ2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gbG9nKCkge1xuICAvLyB0aGlzIGhhY2tlcnkgaXMgcmVxdWlyZWQgZm9yIElFOC85LCB3aGVyZVxuICAvLyB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbiBkb2Vzbid0IGhhdmUgJ2FwcGx5J1xuICByZXR1cm4gJ29iamVjdCcgPT09IHR5cGVvZiBjb25zb2xlXG4gICAgJiYgY29uc29sZS5sb2dcbiAgICAmJiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSwgYXJndW1lbnRzKTtcbn1cblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG4gIHRyeSB7XG4gICAgaWYgKG51bGwgPT0gbmFtZXNwYWNlcykge1xuICAgICAgZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4cG9ydHMuc3RvcmFnZS5kZWJ1ZyA9IG5hbWVzcGFjZXM7XG4gICAgfVxuICB9IGNhdGNoKGUpIHt9XG59XG5cbi8qKlxuICogTG9hZCBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9hZCgpIHtcbiAgdmFyIHI7XG4gIHRyeSB7XG4gICAgciA9IGV4cG9ydHMuc3RvcmFnZS5kZWJ1ZztcbiAgfSBjYXRjaChlKSB7fVxuXG4gIC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcbiAgaWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG4gICAgciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuICB9XG5cbiAgcmV0dXJuIHI7XG59XG5cbi8qKlxuICogRW5hYmxlIG5hbWVzcGFjZXMgbGlzdGVkIGluIGBsb2NhbFN0b3JhZ2UuZGVidWdgIGluaXRpYWxseS5cbiAqL1xuXG5leHBvcnRzLmVuYWJsZShsb2FkKCkpO1xuXG4vKipcbiAqIExvY2Fsc3RvcmFnZSBhdHRlbXB0cyB0byByZXR1cm4gdGhlIGxvY2Fsc3RvcmFnZS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNhZmFyaSB0aHJvd3NcbiAqIHdoZW4gYSB1c2VyIGRpc2FibGVzIGNvb2tpZXMvbG9jYWxzdG9yYWdlXG4gKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICpcbiAqIEByZXR1cm4ge0xvY2FsU3RvcmFnZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgfSBjYXRjaCAoZSkge31cbn1cbiIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzTmFOKHZhbCkgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigoPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIGlmIChtcyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtcyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICByZXR1cm4gcGx1cmFsKG1zLCBkLCAnZGF5JykgfHxcbiAgICBwbHVyYWwobXMsIGgsICdob3VyJykgfHxcbiAgICBwbHVyYWwobXMsIG0sICdtaW51dGUnKSB8fFxuICAgIHBsdXJhbChtcywgcywgJ3NlY29uZCcpIHx8XG4gICAgbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG4sIG5hbWUpIHtcbiAgaWYgKG1zIDwgbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobXMgPCBuICogMS41KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IobXMgLyBuKSArICcgJyArIG5hbWU7XG4gIH1cbiAgcmV0dXJuIE1hdGguY2VpbChtcyAvIG4pICsgJyAnICsgbmFtZSArICdzJztcbn1cbiIsIi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgdHR5ID0gcmVxdWlyZSgndHR5Jyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBOb2RlLmpzIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqXG4gKiBFeHBvc2UgYGRlYnVnKClgIGFzIHRoZSBtb2R1bGUuXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xuZXhwb3J0cy5pbml0ID0gaW5pdDtcbmV4cG9ydHMubG9nID0gbG9nO1xuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gWzYsIDIsIDMsIDQsIDUsIDFdO1xuXG4vKipcbiAqIEJ1aWxkIHVwIHRoZSBkZWZhdWx0IGBpbnNwZWN0T3B0c2Agb2JqZWN0IGZyb20gdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqXG4gKiAgICQgREVCVUdfQ09MT1JTPW5vIERFQlVHX0RFUFRIPTEwIERFQlVHX1NIT1dfSElEREVOPWVuYWJsZWQgbm9kZSBzY3JpcHQuanNcbiAqL1xuXG5leHBvcnRzLmluc3BlY3RPcHRzID0gT2JqZWN0LmtleXMocHJvY2Vzcy5lbnYpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiAvXmRlYnVnXy9pLnRlc3Qoa2V5KTtcbn0pLnJlZHVjZShmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgLy8gY2FtZWwtY2FzZVxuICB2YXIgcHJvcCA9IGtleVxuICAgIC5zdWJzdHJpbmcoNilcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9fKFthLXpdKS9nLCBmdW5jdGlvbiAoXywgaykgeyByZXR1cm4gay50b1VwcGVyQ2FzZSgpIH0pO1xuXG4gIC8vIGNvZXJjZSBzdHJpbmcgdmFsdWUgaW50byBKUyB2YWx1ZVxuICB2YXIgdmFsID0gcHJvY2Vzcy5lbnZba2V5XTtcbiAgaWYgKC9eKHllc3xvbnx0cnVlfGVuYWJsZWQpJC9pLnRlc3QodmFsKSkgdmFsID0gdHJ1ZTtcbiAgZWxzZSBpZiAoL14obm98b2ZmfGZhbHNlfGRpc2FibGVkKSQvaS50ZXN0KHZhbCkpIHZhbCA9IGZhbHNlO1xuICBlbHNlIGlmICh2YWwgPT09ICdudWxsJykgdmFsID0gbnVsbDtcbiAgZWxzZSB2YWwgPSBOdW1iZXIodmFsKTtcblxuICBvYmpbcHJvcF0gPSB2YWw7XG4gIHJldHVybiBvYmo7XG59LCB7fSk7XG5cbi8qKlxuICogVGhlIGZpbGUgZGVzY3JpcHRvciB0byB3cml0ZSB0aGUgYGRlYnVnKClgIGNhbGxzIHRvLlxuICogU2V0IHRoZSBgREVCVUdfRkRgIGVudiB2YXJpYWJsZSB0byBvdmVycmlkZSB3aXRoIGFub3RoZXIgdmFsdWUuIGkuZS46XG4gKlxuICogICAkIERFQlVHX0ZEPTMgbm9kZSBzY3JpcHQuanMgMz5kZWJ1Zy5sb2dcbiAqL1xuXG52YXIgZmQgPSBwYXJzZUludChwcm9jZXNzLmVudi5ERUJVR19GRCwgMTApIHx8IDI7XG5cbmlmICgxICE9PSBmZCAmJiAyICE9PSBmZCkge1xuICB1dGlsLmRlcHJlY2F0ZShmdW5jdGlvbigpe30sICdleGNlcHQgZm9yIHN0ZGVycigyKSBhbmQgc3Rkb3V0KDEpLCBhbnkgb3RoZXIgdXNhZ2Ugb2YgREVCVUdfRkQgaXMgZGVwcmVjYXRlZC4gT3ZlcnJpZGUgZGVidWcubG9nIGlmIHlvdSB3YW50IHRvIHVzZSBhIGRpZmZlcmVudCBsb2cgZnVuY3Rpb24gKGh0dHBzOi8vZ2l0LmlvL2RlYnVnX2ZkKScpKClcbn1cblxudmFyIHN0cmVhbSA9IDEgPT09IGZkID8gcHJvY2Vzcy5zdGRvdXQgOlxuICAgICAgICAgICAgIDIgPT09IGZkID8gcHJvY2Vzcy5zdGRlcnIgOlxuICAgICAgICAgICAgIGNyZWF0ZVdyaXRhYmxlU3RkaW9TdHJlYW0oZmQpO1xuXG4vKipcbiAqIElzIHN0ZG91dCBhIFRUWT8gQ29sb3JlZCBvdXRwdXQgaXMgZW5hYmxlZCB3aGVuIGB0cnVlYC5cbiAqL1xuXG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG4gIHJldHVybiAnY29sb3JzJyBpbiBleHBvcnRzLmluc3BlY3RPcHRzXG4gICAgPyBCb29sZWFuKGV4cG9ydHMuaW5zcGVjdE9wdHMuY29sb3JzKVxuICAgIDogdHR5LmlzYXR0eShmZCk7XG59XG5cbi8qKlxuICogTWFwICVvIHRvIGB1dGlsLmluc3BlY3QoKWAsIGFsbCBvbiBhIHNpbmdsZSBsaW5lLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0dGVycy5vID0gZnVuY3Rpb24odikge1xuICB0aGlzLmluc3BlY3RPcHRzLmNvbG9ycyA9IHRoaXMudXNlQ29sb3JzO1xuICByZXR1cm4gdXRpbC5pbnNwZWN0KHYsIHRoaXMuaW5zcGVjdE9wdHMpXG4gICAgLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gc3RyLnRyaW0oKVxuICAgIH0pLmpvaW4oJyAnKTtcbn07XG5cbi8qKlxuICogTWFwICVvIHRvIGB1dGlsLmluc3BlY3QoKWAsIGFsbG93aW5nIG11bHRpcGxlIGxpbmVzIGlmIG5lZWRlZC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdHRlcnMuTyA9IGZ1bmN0aW9uKHYpIHtcbiAgdGhpcy5pbnNwZWN0T3B0cy5jb2xvcnMgPSB0aGlzLnVzZUNvbG9ycztcbiAgcmV0dXJuIHV0aWwuaW5zcGVjdCh2LCB0aGlzLmluc3BlY3RPcHRzKTtcbn07XG5cbi8qKlxuICogQWRkcyBBTlNJIGNvbG9yIGVzY2FwZSBjb2RlcyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lc3BhY2U7XG4gIHZhciB1c2VDb2xvcnMgPSB0aGlzLnVzZUNvbG9ycztcblxuICBpZiAodXNlQ29sb3JzKSB7XG4gICAgdmFyIGMgPSB0aGlzLmNvbG9yO1xuICAgIHZhciBwcmVmaXggPSAnICBcXHUwMDFiWzMnICsgYyArICc7MW0nICsgbmFtZSArICcgJyArICdcXHUwMDFiWzBtJztcblxuICAgIGFyZ3NbMF0gPSBwcmVmaXggKyBhcmdzWzBdLnNwbGl0KCdcXG4nKS5qb2luKCdcXG4nICsgcHJlZml4KTtcbiAgICBhcmdzLnB1c2goJ1xcdTAwMWJbMycgKyBjICsgJ20rJyArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKSArICdcXHUwMDFiWzBtJyk7XG4gIH0gZWxzZSB7XG4gICAgYXJnc1swXSA9IG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKVxuICAgICAgKyAnICcgKyBuYW1lICsgJyAnICsgYXJnc1swXTtcbiAgfVxufVxuXG4vKipcbiAqIEludm9rZXMgYHV0aWwuZm9ybWF0KClgIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMgYW5kIHdyaXRlcyB0byBgc3RyZWFtYC5cbiAqL1xuXG5mdW5jdGlvbiBsb2coKSB7XG4gIHJldHVybiBzdHJlYW0ud3JpdGUodXRpbC5mb3JtYXQuYXBwbHkodXRpbCwgYXJndW1lbnRzKSArICdcXG4nKTtcbn1cblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG4gIGlmIChudWxsID09IG5hbWVzcGFjZXMpIHtcbiAgICAvLyBJZiB5b3Ugc2V0IGEgcHJvY2Vzcy5lbnYgZmllbGQgdG8gbnVsbCBvciB1bmRlZmluZWQsIGl0IGdldHMgY2FzdCB0byB0aGVcbiAgICAvLyBzdHJpbmcgJ251bGwnIG9yICd1bmRlZmluZWQnLiBKdXN0IGRlbGV0ZSBpbnN0ZWFkLlxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5ERUJVRztcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5ERUJVRyA9IG5hbWVzcGFjZXM7XG4gIH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2FkKCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuREVCVUc7XG59XG5cbi8qKlxuICogQ29waWVkIGZyb20gYG5vZGUvc3JjL25vZGUuanNgLlxuICpcbiAqIFhYWDogSXQncyBsYW1lIHRoYXQgbm9kZSBkb2Vzbid0IGV4cG9zZSB0aGlzIEFQSSBvdXQtb2YtdGhlLWJveC4gSXQgYWxzb1xuICogcmVsaWVzIG9uIHRoZSB1bmRvY3VtZW50ZWQgYHR0eV93cmFwLmd1ZXNzSGFuZGxlVHlwZSgpYCB3aGljaCBpcyBhbHNvIGxhbWUuXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlV3JpdGFibGVTdGRpb1N0cmVhbSAoZmQpIHtcbiAgdmFyIHN0cmVhbTtcbiAgdmFyIHR0eV93cmFwID0gcHJvY2Vzcy5iaW5kaW5nKCd0dHlfd3JhcCcpO1xuXG4gIC8vIE5vdGUgc3RyZWFtLl90eXBlIGlzIHVzZWQgZm9yIHRlc3QtbW9kdWxlLWxvYWQtbGlzdC5qc1xuXG4gIHN3aXRjaCAodHR5X3dyYXAuZ3Vlc3NIYW5kbGVUeXBlKGZkKSkge1xuICAgIGNhc2UgJ1RUWSc6XG4gICAgICBzdHJlYW0gPSBuZXcgdHR5LldyaXRlU3RyZWFtKGZkKTtcbiAgICAgIHN0cmVhbS5fdHlwZSA9ICd0dHknO1xuXG4gICAgICAvLyBIYWNrIHRvIGhhdmUgc3RyZWFtIG5vdCBrZWVwIHRoZSBldmVudCBsb29wIGFsaXZlLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcyNlxuICAgICAgaWYgKHN0cmVhbS5faGFuZGxlICYmIHN0cmVhbS5faGFuZGxlLnVucmVmKSB7XG4gICAgICAgIHN0cmVhbS5faGFuZGxlLnVucmVmKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ0ZJTEUnOlxuICAgICAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbiAgICAgIHN0cmVhbSA9IG5ldyBmcy5TeW5jV3JpdGVTdHJlYW0oZmQsIHsgYXV0b0Nsb3NlOiBmYWxzZSB9KTtcbiAgICAgIHN0cmVhbS5fdHlwZSA9ICdmcyc7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ1BJUEUnOlxuICAgIGNhc2UgJ1RDUCc6XG4gICAgICB2YXIgbmV0ID0gcmVxdWlyZSgnbmV0Jyk7XG4gICAgICBzdHJlYW0gPSBuZXcgbmV0LlNvY2tldCh7XG4gICAgICAgIGZkOiBmZCxcbiAgICAgICAgcmVhZGFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEZJWE1FIFNob3VsZCBwcm9iYWJseSBoYXZlIGFuIG9wdGlvbiBpbiBuZXQuU29ja2V0IHRvIGNyZWF0ZSBhXG4gICAgICAvLyBzdHJlYW0gZnJvbSBhbiBleGlzdGluZyBmZCB3aGljaCBpcyB3cml0YWJsZSBvbmx5LiBCdXQgZm9yIG5vd1xuICAgICAgLy8gd2UnbGwganVzdCBhZGQgdGhpcyBoYWNrIGFuZCBzZXQgdGhlIGByZWFkYWJsZWAgbWVtYmVyIHRvIGZhbHNlLlxuICAgICAgLy8gVGVzdDogLi9ub2RlIHRlc3QvZml4dHVyZXMvZWNoby5qcyA8IC9ldGMvcGFzc3dkXG4gICAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZWFkID0gbnVsbDtcbiAgICAgIHN0cmVhbS5fdHlwZSA9ICdwaXBlJztcblxuICAgICAgLy8gRklYTUUgSGFjayB0byBoYXZlIHN0cmVhbSBub3Qga2VlcCB0aGUgZXZlbnQgbG9vcCBhbGl2ZS5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MjZcbiAgICAgIGlmIChzdHJlYW0uX2hhbmRsZSAmJiBzdHJlYW0uX2hhbmRsZS51bnJlZikge1xuICAgICAgICBzdHJlYW0uX2hhbmRsZS51bnJlZigpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gUHJvYmFibHkgYW4gZXJyb3Igb24gaW4gdXZfZ3Vlc3NfaGFuZGxlKClcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW1wbGVtZW50IG1lLiBVbmtub3duIHN0cmVhbSBmaWxlIHR5cGUhJyk7XG4gIH1cblxuICAvLyBGb3Igc3VwcG9ydGluZyBsZWdhY3kgQVBJIHdlIHB1dCB0aGUgRkQgaGVyZS5cbiAgc3RyZWFtLmZkID0gZmQ7XG5cbiAgc3RyZWFtLl9pc1N0ZGlvID0gdHJ1ZTtcblxuICByZXR1cm4gc3RyZWFtO1xufVxuXG4vKipcbiAqIEluaXQgbG9naWMgZm9yIGBkZWJ1Z2AgaW5zdGFuY2VzLlxuICpcbiAqIENyZWF0ZSBhIG5ldyBgaW5zcGVjdE9wdHNgIG9iamVjdCBpbiBjYXNlIGB1c2VDb2xvcnNgIGlzIHNldFxuICogZGlmZmVyZW50bHkgZm9yIGEgcGFydGljdWxhciBgZGVidWdgIGluc3RhbmNlLlxuICovXG5cbmZ1bmN0aW9uIGluaXQgKGRlYnVnKSB7XG4gIGRlYnVnLmluc3BlY3RPcHRzID0ge307XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhleHBvcnRzLmluc3BlY3RPcHRzKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgZGVidWcuaW5zcGVjdE9wdHNba2V5c1tpXV0gPSBleHBvcnRzLmluc3BlY3RPcHRzW2tleXNbaV1dO1xuICB9XG59XG5cbi8qKlxuICogRW5hYmxlIG5hbWVzcGFjZXMgbGlzdGVkIGluIGBwcm9jZXNzLmVudi5ERUJVR2AgaW5pdGlhbGx5LlxuICovXG5cbmV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ0dHlcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZnNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibmV0XCIpOyIsIi8qIVxuICogQ29waWVkIGZyb206XG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudHJ5IHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9idWlsZC9SZWxlYXNlL2J1ZmZlcnV0aWwnKTtcbn0gY2F0Y2ggKGUpIHsgdHJ5IHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9idWlsZC9kZWZhdWx0L2J1ZmZlcnV0aWwnKTtcbn0gY2F0Y2ggKGUpIHsgdHJ5IHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL0J1ZmZlclV0aWwuZmFsbGJhY2snKTtcbn0gY2F0Y2ggKGUpIHtcbiAgY29uc29sZS5lcnJvcignYnVmZmVydXRpbC5ub2RlIHNlZW1zIHRvIG5vdCBoYXZlIGJlZW4gYnVpbHQuIFJ1biBucG0gaW5zdGFsbC4nKTtcbiAgdGhyb3cgZTtcbn19fVxuIiwiLyohXG4gKiBDb3BpZWQgZnJvbTpcbiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudFxuICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKiBqc2hpbnQgLVcwODYgKi9cblxubW9kdWxlLmV4cG9ydHMuQnVmZmVyVXRpbCA9IHtcbiAgbWVyZ2U6IGZ1bmN0aW9uKG1lcmdlZEJ1ZmZlciwgYnVmZmVycykge1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVycy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgIHZhciBidWYgPSBidWZmZXJzW2ldO1xuICAgICAgYnVmLmNvcHkobWVyZ2VkQnVmZmVyLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IGJ1Zi5sZW5ndGg7XG4gICAgfVxuICB9LFxuICBtYXNrOiBmdW5jdGlvbihzb3VyY2UsIG1hc2ssIG91dHB1dCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICB2YXIgbWFza051bSA9IG1hc2sucmVhZFVJbnQzMkxFKDApO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKDsgaSA8IGxlbmd0aCAtIDM7IGkgKz0gNCkge1xuICAgICAgdmFyIG51bSA9IG1hc2tOdW0gXiBzb3VyY2UucmVhZFVJbnQzMkxFKGkpO1xuICAgICAgaWYgKG51bSA8IDApIHsgbnVtID0gNDI5NDk2NzI5NiArIG51bTsgfVxuICAgICAgb3V0cHV0LndyaXRlVUludDMyTEUobnVtLCBvZmZzZXQgKyBpKTtcbiAgICB9XG4gICAgc3dpdGNoIChsZW5ndGggJSA0KSB7XG4gICAgICBjYXNlIDM6IG91dHB1dFtvZmZzZXQgKyBpICsgMl0gPSBzb3VyY2VbaSArIDJdIF4gbWFza1syXTtcbiAgICAgIGNhc2UgMjogb3V0cHV0W29mZnNldCArIGkgKyAxXSA9IHNvdXJjZVtpICsgMV0gXiBtYXNrWzFdO1xuICAgICAgY2FzZSAxOiBvdXRwdXRbb2Zmc2V0ICsgaV0gPSBzb3VyY2VbaV0gXiBtYXNrWzBdO1xuICAgICAgY2FzZSAwOlxuICAgIH1cbiAgfSxcbiAgdW5tYXNrOiBmdW5jdGlvbihkYXRhLCBtYXNrKSB7XG4gICAgdmFyIG1hc2tOdW0gPSBtYXNrLnJlYWRVSW50MzJMRSgwKTtcbiAgICB2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbGVuZ3RoIC0gMzsgaSArPSA0KSB7XG4gICAgICB2YXIgbnVtID0gbWFza051bSBeIGRhdGEucmVhZFVJbnQzMkxFKGkpO1xuICAgICAgaWYgKG51bSA8IDApIHsgbnVtID0gNDI5NDk2NzI5NiArIG51bTsgfVxuICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKG51bSwgaSk7XG4gICAgfVxuICAgIHN3aXRjaCAobGVuZ3RoICUgNCkge1xuICAgICAgY2FzZSAzOiBkYXRhW2kgKyAyXSA9IGRhdGFbaSArIDJdIF4gbWFza1syXTtcbiAgICAgIGNhc2UgMjogZGF0YVtpICsgMV0gPSBkYXRhW2kgKyAxXSBeIG1hc2tbMV07XG4gICAgICBjYXNlIDE6IGRhdGFbaV0gPSBkYXRhW2ldIF4gbWFza1swXTtcbiAgICAgIGNhc2UgMDpcbiAgICB9XG4gIH1cbn07XG5cbi8qIGpzaGludCArVzA4NiAqLyIsIi8vIFRoaXMgZmlsZSB3YXMgY29waWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3N1YnN0YWNrL25vZGUtYnVmZmVybGlzdFxuLy8gYW5kIG1vZGlmaWVkIHRvIGJlIGFibGUgdG8gY29weSBieXRlcyBmcm9tIHRoZSBidWZmZXJsaXN0IGRpcmVjdGx5IGludG9cbi8vIGEgcHJlLWV4aXN0aW5nIGZpeGVkLXNpemUgYnVmZmVyIHdpdGhvdXQgYW4gYWRkaXRpb25hbCBtZW1vcnkgYWxsb2NhdGlvbi5cblxuLy8gYnVmZmVybGlzdC5qc1xuLy8gVHJlYXQgYSBsaW5rZWQgbGlzdCBvZiBidWZmZXJzIGFzIGEgc2luZ2xlIHZhcmlhYmxlLXNpemUgYnVmZmVyLlxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG52YXIgYnVmZmVyQWxsb2NVbnNhZmUgPSByZXF1aXJlKCcuLi9saWIvdXRpbHMnKS5idWZmZXJBbGxvY1Vuc2FmZTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdWZmZXJMaXN0O1xubW9kdWxlLmV4cG9ydHMuQnVmZmVyTGlzdCA9IEJ1ZmZlckxpc3Q7IC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG5cbmZ1bmN0aW9uIEJ1ZmZlckxpc3Qob3B0cykge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXJMaXN0KSkgcmV0dXJuIG5ldyBCdWZmZXJMaXN0KG9wdHMpO1xuICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBcbiAgICBpZiAodHlwZW9mKG9wdHMpID09ICd1bmRlZmluZWQnKSBvcHRzID0ge307XG4gICAgXG4gICAgLy8gZGVmYXVsdCBlbmNvZGluZyB0byB1c2UgZm9yIHRha2UoKS4gTGVhdmluZyBhcyAndW5kZWZpbmVkJ1xuICAgIC8vIG1ha2VzIHRha2UoKSByZXR1cm4gYSBCdWZmZXIgaW5zdGVhZC5cbiAgICBzZWxmLmVuY29kaW5nID0gb3B0cy5lbmNvZGluZztcbiAgICBcbiAgICB2YXIgaGVhZCA9IHsgbmV4dCA6IG51bGwsIGJ1ZmZlciA6IG51bGwgfTtcbiAgICB2YXIgbGFzdCA9IHsgbmV4dCA6IG51bGwsIGJ1ZmZlciA6IG51bGwgfTtcbiAgICBcbiAgICAvLyBsZW5ndGggY2FuIGdldCBuZWdhdGl2ZSB3aGVuIGFkdmFuY2VkIHBhc3QgdGhlIGVuZFxuICAgIC8vIGFuZCB0aGlzIGlzIHRoZSBkZXNpcmVkIGJlaGF2aW9yXG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgc2VsZi5fX2RlZmluZUdldHRlcl9fKCdsZW5ndGgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfSk7XG4gICAgXG4gICAgLy8ga2VlcCBhbiBvZmZzZXQgb2YgdGhlIGhlYWQgdG8gZGVjaWRlIHdoZW4gdG8gaGVhZCA9IGhlYWQubmV4dFxuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIFxuICAgIC8vIFdyaXRlIHRvIHRoZSBidWZmZXJsaXN0LiBFbWl0cyAnd3JpdGUnLiBBbHdheXMgcmV0dXJucyB0cnVlLlxuICAgIHNlbGYud3JpdGUgPSBmdW5jdGlvbiAoYnVmKSB7XG4gICAgICAgIGlmICghaGVhZC5idWZmZXIpIHtcbiAgICAgICAgICAgIGhlYWQuYnVmZmVyID0gYnVmO1xuICAgICAgICAgICAgbGFzdCA9IGhlYWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsYXN0Lm5leHQgPSB7IG5leHQgOiBudWxsLCBidWZmZXIgOiBidWYgfTtcbiAgICAgICAgICAgIGxhc3QgPSBsYXN0Lm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGVuZ3RoICs9IGJ1Zi5sZW5ndGg7XG4gICAgICAgIHNlbGYuZW1pdCgnd3JpdGUnLCBidWYpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFxuICAgIHNlbGYuZW5kID0gZnVuY3Rpb24gKGJ1Zikge1xuICAgICAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHNlbGYud3JpdGUoYnVmKTtcbiAgICB9O1xuICAgIFxuICAgIC8vIFB1c2ggYnVmZmVycyB0byB0aGUgZW5kIG9mIHRoZSBsaW5rZWQgbGlzdC4gKGRlcHJlY2F0ZWQpXG4gICAgLy8gUmV0dXJuIHRoaXMgKHNlbGYpLlxuICAgIHNlbGYucHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXS5jb25jYXQuYXBwbHkoW10sIGFyZ3VtZW50cyk7XG4gICAgICAgIGFyZ3MuZm9yRWFjaChzZWxmLndyaXRlKTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcbiAgICBcbiAgICAvLyBGb3IgZWFjaCBidWZmZXIsIHBlcmZvcm0gc29tZSBhY3Rpb24uXG4gICAgLy8gSWYgZm4ncyByZXN1bHQgaXMgYSB0cnVlIHZhbHVlLCBjdXQgb3V0IGVhcmx5LlxuICAgIC8vIFJldHVybnMgdGhpcyAoc2VsZikuXG4gICAgc2VsZi5mb3JFYWNoID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmICghaGVhZC5idWZmZXIpIHJldHVybiBidWZmZXJBbGxvY1Vuc2FmZSgwKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoZWFkLmJ1ZmZlci5sZW5ndGggLSBvZmZzZXQgPD0gMCkgcmV0dXJuIHNlbGY7XG4gICAgICAgIHZhciBmaXJzdEJ1ZiA9IGhlYWQuYnVmZmVyLnNsaWNlKG9mZnNldCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgYiA9IHsgYnVmZmVyIDogZmlyc3RCdWYsIG5leHQgOiBoZWFkLm5leHQgfTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChiICYmIGIuYnVmZmVyKSB7XG4gICAgICAgICAgICB2YXIgciA9IGZuKGIuYnVmZmVyKTtcbiAgICAgICAgICAgIGlmIChyKSBicmVhaztcbiAgICAgICAgICAgIGIgPSBiLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH07XG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgc2luZ2xlIEJ1ZmZlciBvdXQgb2YgYWxsIHRoZSBjaHVua3Mgb3Igc29tZSBzdWJzZXQgc3BlY2lmaWVkIGJ5XG4gICAgLy8gc3RhcnQgYW5kIG9uZS1wYXN0IHRoZSBlbmQgKGxpa2Ugc2xpY2UpIGluIGJ5dGVzLlxuICAgIHNlbGYuam9pbiA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgICAgIGlmICghaGVhZC5idWZmZXIpIHJldHVybiBidWZmZXJBbGxvY1Vuc2FmZSgwKTtcbiAgICAgICAgaWYgKHN0YXJ0ID09IHVuZGVmaW5lZCkgc3RhcnQgPSAwO1xuICAgICAgICBpZiAoZW5kID09IHVuZGVmaW5lZCkgZW5kID0gc2VsZi5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICB2YXIgYmlnID0gYnVmZmVyQWxsb2NVbnNhZmUoZW5kIC0gc3RhcnQpO1xuICAgICAgICB2YXIgaXggPSAwO1xuICAgICAgICBzZWxmLmZvckVhY2goZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICAgICAgaWYgKHN0YXJ0IDwgKGl4ICsgYnVmZmVyLmxlbmd0aCkgJiYgaXggPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAvLyBhdCBsZWFzdCBwYXJ0aWFsbHkgY29udGFpbmVkIGluIHRoZSByYW5nZVxuICAgICAgICAgICAgICAgIGJ1ZmZlci5jb3B5KFxuICAgICAgICAgICAgICAgICAgICBiaWcsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIGl4IC0gc3RhcnQpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgwLCBzdGFydCAtIGl4KSxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oYnVmZmVyLmxlbmd0aCwgZW5kIC0gaXgpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl4ICs9IGJ1ZmZlci5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoaXggPiBlbmQpIHJldHVybiB0cnVlOyAvLyBzdG9wIHByb2Nlc3NpbmcgcGFzdCBlbmRcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYmlnO1xuICAgIH07XG4gICAgXG4gICAgc2VsZi5qb2luSW50byA9IGZ1bmN0aW9uICh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0LCBzb3VyY2VTdGFydCwgc291cmNlRW5kKSB7XG4gICAgICAgIGlmICghaGVhZC5idWZmZXIpIHJldHVybiBuZXcgYnVmZmVyQWxsb2NVbnNhZmUoMCk7XG4gICAgICAgIGlmIChzb3VyY2VTdGFydCA9PSB1bmRlZmluZWQpIHNvdXJjZVN0YXJ0ID0gMDtcbiAgICAgICAgaWYgKHNvdXJjZUVuZCA9PSB1bmRlZmluZWQpIHNvdXJjZUVuZCA9IHNlbGYubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgdmFyIGJpZyA9IHRhcmdldEJ1ZmZlcjtcbiAgICAgICAgaWYgKGJpZy5sZW5ndGggLSB0YXJnZXRTdGFydCA8IHNvdXJjZUVuZCAtIHNvdXJjZVN0YXJ0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnN1ZmZpY2llbnQgc3BhY2UgYXZhaWxhYmxlIGluIHRhcmdldCBCdWZmZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpeCA9IDA7XG4gICAgICAgIHNlbGYuZm9yRWFjaChmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlU3RhcnQgPCAoaXggKyBidWZmZXIubGVuZ3RoKSAmJiBpeCA8IHNvdXJjZUVuZCkge1xuICAgICAgICAgICAgICAgIC8vIGF0IGxlYXN0IHBhcnRpYWxseSBjb250YWluZWQgaW4gdGhlIHJhbmdlXG4gICAgICAgICAgICAgICAgYnVmZmVyLmNvcHkoXG4gICAgICAgICAgICAgICAgICAgIGJpZyxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGFyZ2V0U3RhcnQsIHRhcmdldFN0YXJ0ICsgaXggLSBzb3VyY2VTdGFydCksXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIHNvdXJjZVN0YXJ0IC0gaXgpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihidWZmZXIubGVuZ3RoLCBzb3VyY2VFbmQgLSBpeClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXggKz0gYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChpeCA+IHNvdXJjZUVuZCkgcmV0dXJuIHRydWU7IC8vIHN0b3AgcHJvY2Vzc2luZyBwYXN0IGVuZFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBiaWc7XG4gICAgfTtcbiAgICBcbiAgICAvLyBBZHZhbmNlIHRoZSBidWZmZXIgc3RyZWFtIGJ5IG4gYnl0ZXMuXG4gICAgLy8gSWYgbiB0aGUgYWdncmVnYXRlIGFkdmFuY2Ugb2Zmc2V0IHBhc3NlcyB0aGUgZW5kIG9mIHRoZSBidWZmZXIgbGlzdCxcbiAgICAvLyBvcGVyYXRpb25zIHN1Y2ggYXMgLnRha2UoKSB3aWxsIHJldHVybiBlbXB0eSBzdHJpbmdzIHVudGlsIGVub3VnaCBkYXRhIGlzXG4gICAgLy8gcHVzaGVkLlxuICAgIC8vIFJldHVybnMgdGhpcyAoc2VsZikuXG4gICAgc2VsZi5hZHZhbmNlID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgb2Zmc2V0ICs9IG47XG4gICAgICAgIGxlbmd0aCAtPSBuO1xuICAgICAgICB3aGlsZSAoaGVhZC5idWZmZXIgJiYgb2Zmc2V0ID49IGhlYWQuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgb2Zmc2V0IC09IGhlYWQuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkLm5leHRcbiAgICAgICAgICAgICAgICA/IGhlYWQubmV4dFxuICAgICAgICAgICAgICAgIDogeyBidWZmZXIgOiBudWxsLCBuZXh0IDogbnVsbCB9XG4gICAgICAgICAgICA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlYWQuYnVmZmVyID09PSBudWxsKSBsYXN0ID0geyBuZXh0IDogbnVsbCwgYnVmZmVyIDogbnVsbCB9O1xuICAgICAgICBzZWxmLmVtaXQoJ2FkdmFuY2UnLCBuKTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcbiAgICBcbiAgICAvLyBUYWtlIG4gYnl0ZXMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGJ1ZmZlcnMuXG4gICAgLy8gUmV0dXJucyBhIHN0cmluZy5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbGVzcyB0aGFuIG4gYnl0ZXMgaW4gYWxsIHRoZSBidWZmZXJzIG9yIG4gaXMgdW5kZWZpbmVkLFxuICAgIC8vIHJldHVybnMgdGhlIGVudGlyZSBjb25jYXRlbmF0ZWQgYnVmZmVyIHN0cmluZy5cbiAgICBzZWxmLnRha2UgPSBmdW5jdGlvbiAobiwgZW5jb2RpbmcpIHtcbiAgICAgICAgaWYgKG4gPT0gdW5kZWZpbmVkKSBuID0gc2VsZi5sZW5ndGg7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZW5jb2RpbmcgPSBuO1xuICAgICAgICAgICAgbiA9IHNlbGYubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiID0gaGVhZDtcbiAgICAgICAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzZWxmLmVuY29kaW5nO1xuICAgICAgICBpZiAoZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHZhciBhY2MgPSAnJztcbiAgICAgICAgICAgIHNlbGYuZm9yRWFjaChmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4gPD0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgYWNjICs9IGJ1ZmZlci50b1N0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmcsIDAsIE1hdGgubWluKG4sYnVmZmVyLmxlbmd0aClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG4gLT0gYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIG5vICdlbmNvZGluZycgaXMgc3BlY2lmaWVkLCB0aGVuIHJldHVybiBhIEJ1ZmZlci5cbiAgICAgICAgICAgIHJldHVybiBzZWxmLmpvaW4oMCwgbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFRoZSBlbnRpcmUgY29uY2F0ZW5hdGVkIGJ1ZmZlciBhcyBhIHN0cmluZy5cbiAgICBzZWxmLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZi50YWtlKCdiaW5hcnknKTtcbiAgICB9O1xufVxucmVxdWlyZSgndXRpbCcpLmluaGVyaXRzKEJ1ZmZlckxpc3QsIEV2ZW50RW1pdHRlcik7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJidWZmZXJcIik7IiwiLyohXG4gKiBVVEYtOCBWYWxpZGF0aW9uIENvZGUgb3JpZ2luYWxseSBmcm9tOlxuICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50XG4gKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnRyeSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9idWlsZC9SZWxlYXNlL3ZhbGlkYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHsgdHJ5IHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL2J1aWxkL2RlZmF1bHQvdmFsaWRhdGlvbicpO1xufSBjYXRjaCAoZSkgeyB0cnkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9WYWxpZGF0aW9uLmZhbGxiYWNrJyk7XG59IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcigndmFsaWRhdGlvbi5ub2RlIHNlZW1zIG5vdCB0byBoYXZlIGJlZW4gYnVpbHQuIFJ1biBucG0gaW5zdGFsbC4nKTtcbiAgICB0aHJvdyBlO1xufX19XG4iLCIvKiFcbiAqIFVURi04IFZhbGlkYXRpb24gRmFsbGJhY2sgQ29kZSBvcmlnaW5hbGx5IGZyb206XG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuVmFsaWRhdGlvbiA9IHtcbiAgaXNWYWxpZFVURjg6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogIENvcHlyaWdodCAyMDEwLTIwMTUgQnJpYW4gTWNLZWx2ZXkuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnLi91dGlscycpLmV4dGVuZDtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBXZWJTb2NrZXRSb3V0ZXJSZXF1ZXN0ID0gcmVxdWlyZSgnLi9XZWJTb2NrZXRSb3V0ZXJSZXF1ZXN0Jyk7XG5cbmZ1bmN0aW9uIFdlYlNvY2tldFJvdXRlcihjb25maWcpIHtcbiAgICAvLyBTdXBlcmNsYXNzIENvbnN0cnVjdG9yXG4gICAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgLy8gVGhlIFdlYlNvY2tldFNlcnZlciBpbnN0YW5jZSB0byBhdHRhY2ggdG8uXG4gICAgICAgIHNlcnZlcjogbnVsbFxuICAgIH07XG4gICAgaWYgKGNvbmZpZykge1xuICAgICAgICBleHRlbmQodGhpcy5jb25maWcsIGNvbmZpZyk7XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcblxuICAgIHRoaXMuX3JlcXVlc3RIYW5kbGVyID0gdGhpcy5oYW5kbGVSZXF1ZXN0LmJpbmQodGhpcyk7XG4gICAgaWYgKHRoaXMuY29uZmlnLnNlcnZlcikge1xuICAgICAgICB0aGlzLmF0dGFjaFNlcnZlcih0aGlzLmNvbmZpZy5zZXJ2ZXIpO1xuICAgIH1cbn1cblxudXRpbC5pbmhlcml0cyhXZWJTb2NrZXRSb3V0ZXIsIEV2ZW50RW1pdHRlcik7XG5cbldlYlNvY2tldFJvdXRlci5wcm90b3R5cGUuYXR0YWNoU2VydmVyID0gZnVuY3Rpb24oc2VydmVyKSB7XG4gICAgaWYgKHNlcnZlcikge1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICAgICAgdGhpcy5zZXJ2ZXIub24oJ3JlcXVlc3QnLCB0aGlzLl9yZXF1ZXN0SGFuZGxlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IHNwZWNpZnkgYSBXZWJTb2NrZXRTZXJ2ZXIgaW5zdGFuY2UgdG8gYXR0YWNoIHRvLicpO1xuICAgIH1cbn07XG5cbldlYlNvY2tldFJvdXRlci5wcm90b3R5cGUuZGV0YWNoU2VydmVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuc2VydmVyKSB7XG4gICAgICAgIHRoaXMuc2VydmVyLnJlbW92ZUxpc3RlbmVyKCdyZXF1ZXN0JywgdGhpcy5fcmVxdWVzdEhhbmRsZXIpO1xuICAgICAgICB0aGlzLnNlcnZlciA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBkZXRhY2ggZnJvbSBzZXJ2ZXI6IG5vdCBhdHRhY2hlZC4nKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRSb3V0ZXIucHJvdG90eXBlLm1vdW50ID0gZnVuY3Rpb24ocGF0aCwgcHJvdG9jb2wsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3Qgc3BlY2lmeSBhIHBhdGggZm9yIHRoaXMgaGFuZGxlci4nKTtcbiAgICB9XG4gICAgaWYgKCFwcm90b2NvbCkge1xuICAgICAgICBwcm90b2NvbCA9ICdfX19fbm9fcHJvdG9jb2xfX19fJztcbiAgICB9XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IHNwZWNpZnkgYSBjYWxsYmFjayBmb3IgdGhpcyBoYW5kbGVyLicpO1xuICAgIH1cblxuICAgIHBhdGggPSB0aGlzLnBhdGhUb1JlZ0V4cChwYXRoKTtcbiAgICBpZiAoIShwYXRoIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhdGggbXVzdCBiZSBzcGVjaWZpZWQgYXMgZWl0aGVyIGEgc3RyaW5nIG9yIGEgUmVnRXhwLicpO1xuICAgIH1cbiAgICB2YXIgcGF0aFN0cmluZyA9IHBhdGgudG9TdHJpbmcoKTtcblxuICAgIC8vIG5vcm1hbGl6ZSBwcm90b2NvbCB0byBsb3dlci1jYXNlXG4gICAgcHJvdG9jb2wgPSBwcm90b2NvbC50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHRoaXMuZmluZEhhbmRsZXJJbmRleChwYXRoU3RyaW5nLCBwcm90b2NvbCkgIT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG1heSBvbmx5IG1vdW50IG9uZSBoYW5kbGVyIHBlciBwYXRoL3Byb3RvY29sIGNvbWJpbmF0aW9uLicpO1xuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgICAgICdwYXRoJzogcGF0aCxcbiAgICAgICAgJ3BhdGhTdHJpbmcnOiBwYXRoU3RyaW5nLFxuICAgICAgICAncHJvdG9jb2wnOiBwcm90b2NvbCxcbiAgICAgICAgJ2NhbGxiYWNrJzogY2FsbGJhY2tcbiAgICB9KTtcbn07XG5XZWJTb2NrZXRSb3V0ZXIucHJvdG90eXBlLnVubW91bnQgPSBmdW5jdGlvbihwYXRoLCBwcm90b2NvbCkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuZmluZEhhbmRsZXJJbmRleCh0aGlzLnBhdGhUb1JlZ0V4cChwYXRoKS50b1N0cmluZygpLCBwcm90b2NvbCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIGEgcm91dGUgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBwYXRoIGFuZCBwcm90b2NvbC4nKTtcbiAgICB9XG59O1xuXG5XZWJTb2NrZXRSb3V0ZXIucHJvdG90eXBlLmZpbmRIYW5kbGVySW5kZXggPSBmdW5jdGlvbihwYXRoU3RyaW5nLCBwcm90b2NvbCkge1xuICAgIHByb3RvY29sID0gcHJvdG9jb2wudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICBmb3IgKHZhciBpPTAsIGxlbj10aGlzLmhhbmRsZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5oYW5kbGVyc1tpXTtcbiAgICAgICAgaWYgKGhhbmRsZXIucGF0aFN0cmluZyA9PT0gcGF0aFN0cmluZyAmJiBoYW5kbGVyLnByb3RvY29sID09PSBwcm90b2NvbCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufTtcblxuV2ViU29ja2V0Um91dGVyLnByb3RvdHlwZS5wYXRoVG9SZWdFeHAgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKHR5cGVvZihwYXRoKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHBhdGggPT09ICcqJykge1xuICAgICAgICAgICAgcGF0aCA9IC9eLiokLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCAnXFxcXCQmJyk7XG4gICAgICAgICAgICBwYXRoID0gbmV3IFJlZ0V4cCgnXicgKyBwYXRoICsgJyQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn07XG5cbldlYlNvY2tldFJvdXRlci5wcm90b3R5cGUuaGFuZGxlUmVxdWVzdCA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiAgICB2YXIgcmVxdWVzdGVkUHJvdG9jb2xzID0gcmVxdWVzdC5yZXF1ZXN0ZWRQcm90b2NvbHM7XG4gICAgaWYgKHJlcXVlc3RlZFByb3RvY29scy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVxdWVzdGVkUHJvdG9jb2xzID0gWydfX19fbm9fcHJvdG9jb2xfX19fJ107XG4gICAgfVxuXG4gICAgLy8gRmluZCBhIGhhbmRsZXIgd2l0aCB0aGUgZmlyc3QgcmVxdWVzdGVkIHByb3RvY29sIGZpcnN0XG4gICAgZm9yICh2YXIgaT0wOyBpIDwgcmVxdWVzdGVkUHJvdG9jb2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ZWRQcm90b2NvbCA9IHJlcXVlc3RlZFByb3RvY29sc1tpXS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuXG4gICAgICAgIC8vIGZpbmQgdGhlIGZpcnN0IGhhbmRsZXIgdGhhdCBjYW4gcHJvY2VzcyB0aGlzIHJlcXVlc3RcbiAgICAgICAgZm9yICh2YXIgaj0wLCBsZW49dGhpcy5oYW5kbGVycy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzW2pdO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXIucGF0aC50ZXN0KHJlcXVlc3QucmVzb3VyY2VVUkwucGF0aG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RlZFByb3RvY29sID09PSBoYW5kbGVyLnByb3RvY29sIHx8XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIucHJvdG9jb2wgPT09ICcqJylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3V0ZXJSZXF1ZXN0ID0gbmV3IFdlYlNvY2tldFJvdXRlclJlcXVlc3QocmVxdWVzdCwgcmVxdWVzdGVkUHJvdG9jb2wpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGxiYWNrKHJvdXRlclJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgZ2V0IGhlcmUgd2Ugd2VyZSB1bmFibGUgdG8gZmluZCBhIHN1aXRhYmxlIGhhbmRsZXIuXG4gICAgcmVxdWVzdC5yZWplY3QoNDA0LCAnTm8gaGFuZGxlciBpcyBhdmFpbGFibGUgZm9yIHRoZSBnaXZlbiByZXF1ZXN0LicpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRSb3V0ZXI7XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgQ29weXJpZ2h0IDIwMTAtMjAxNSBCcmlhbiBNY0tlbHZleS5cbiAqXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxuZnVuY3Rpb24gV2ViU29ja2V0Um91dGVyUmVxdWVzdCh3ZWJTb2NrZXRSZXF1ZXN0LCByZXNvbHZlZFByb3RvY29sKSB7XG4gICAgLy8gU3VwZXJjbGFzcyBDb25zdHJ1Y3RvclxuICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy53ZWJTb2NrZXRSZXF1ZXN0ID0gd2ViU29ja2V0UmVxdWVzdDtcbiAgICBpZiAocmVzb2x2ZWRQcm90b2NvbCA9PT0gJ19fX19ub19wcm90b2NvbF9fX18nKSB7XG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHJlc29sdmVkUHJvdG9jb2w7XG4gICAgfVxuICAgIHRoaXMub3JpZ2luID0gd2ViU29ja2V0UmVxdWVzdC5vcmlnaW47XG4gICAgdGhpcy5yZXNvdXJjZSA9IHdlYlNvY2tldFJlcXVlc3QucmVzb3VyY2U7XG4gICAgdGhpcy5yZXNvdXJjZVVSTCA9IHdlYlNvY2tldFJlcXVlc3QucmVzb3VyY2VVUkw7XG4gICAgdGhpcy5odHRwUmVxdWVzdCA9IHdlYlNvY2tldFJlcXVlc3QuaHR0cFJlcXVlc3Q7XG4gICAgdGhpcy5yZW1vdGVBZGRyZXNzID0gd2ViU29ja2V0UmVxdWVzdC5yZW1vdGVBZGRyZXNzO1xuICAgIHRoaXMud2ViU29ja2V0VmVyc2lvbiA9IHdlYlNvY2tldFJlcXVlc3Qud2ViU29ja2V0VmVyc2lvbjtcbiAgICB0aGlzLnJlcXVlc3RlZEV4dGVuc2lvbnMgPSB3ZWJTb2NrZXRSZXF1ZXN0LnJlcXVlc3RlZEV4dGVuc2lvbnM7XG4gICAgdGhpcy5jb29raWVzID0gd2ViU29ja2V0UmVxdWVzdC5jb29raWVzO1xufVxuXG51dGlsLmluaGVyaXRzKFdlYlNvY2tldFJvdXRlclJlcXVlc3QsIEV2ZW50RW1pdHRlcik7XG5cbldlYlNvY2tldFJvdXRlclJlcXVlc3QucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uKG9yaWdpbiwgY29va2llcykge1xuICAgIHZhciBjb25uZWN0aW9uID0gdGhpcy53ZWJTb2NrZXRSZXF1ZXN0LmFjY2VwdCh0aGlzLnByb3RvY29sLCBvcmlnaW4sIGNvb2tpZXMpO1xuICAgIHRoaXMuZW1pdCgncmVxdWVzdEFjY2VwdGVkJywgY29ubmVjdGlvbik7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG59O1xuXG5XZWJTb2NrZXRSb3V0ZXJSZXF1ZXN0LnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbihzdGF0dXMsIHJlYXNvbiwgZXh0cmFIZWFkZXJzKSB7XG4gICAgdGhpcy53ZWJTb2NrZXRSZXF1ZXN0LnJlamVjdChzdGF0dXMsIHJlYXNvbiwgZXh0cmFIZWFkZXJzKTtcbiAgICB0aGlzLmVtaXQoJ3JlcXVlc3RSZWplY3RlZCcsIHRoaXMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRSb3V0ZXJSZXF1ZXN0O1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogIENvcHlyaWdodCAyMDEwLTIwMTUgQnJpYW4gTWNLZWx2ZXkuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG52YXIgV2ViU29ja2V0Q2xpZW50ID0gcmVxdWlyZSgnLi9XZWJTb2NrZXRDbGllbnQnKTtcbnZhciB0b0J1ZmZlciA9IHJlcXVpcmUoJ3R5cGVkYXJyYXktdG8tYnVmZmVyJyk7XG52YXIgeWFldGkgPSByZXF1aXJlKCd5YWV0aScpO1xuXG5cbmNvbnN0IENPTk5FQ1RJTkcgPSAwO1xuY29uc3QgT1BFTiA9IDE7XG5jb25zdCBDTE9TSU5HID0gMjtcbmNvbnN0IENMT1NFRCA9IDM7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBXM0NXZWJTb2NrZXQ7XG5cblxuZnVuY3Rpb24gVzNDV2ViU29ja2V0KHVybCwgcHJvdG9jb2xzLCBvcmlnaW4sIGhlYWRlcnMsIHJlcXVlc3RPcHRpb25zLCBjbGllbnRDb25maWcpIHtcbiAgICAvLyBNYWtlIHRoaXMgYW4gRXZlbnRUYXJnZXQuXG4gICAgeWFldGkuRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8vIFNhbml0aXplIGNsaWVudENvbmZpZy5cbiAgICBjbGllbnRDb25maWcgPSBjbGllbnRDb25maWcgfHwge307XG4gICAgY2xpZW50Q29uZmlnLmFzc2VtYmxlRnJhZ21lbnRzID0gdHJ1ZTsgIC8vIFJlcXVpcmVkIGluIHRoZSBXM0MgQVBJLlxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBDT05ORUNUSU5HO1xuICAgIHRoaXMuX3Byb3RvY29sID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2V4dGVuc2lvbnMgPSAnJztcbiAgICB0aGlzLl9idWZmZXJlZEFtb3VudCA9IDA7ICAvLyBIYWNrLCBhbHdheXMgMC5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJzsgIC8vIFRPRE86IFNob3VsZCBiZSAnYmxvYicgYnkgZGVmYXVsdCwgYnV0IE5vZGUgaGFzIG5vIEJsb2IuXG5cbiAgICAvLyBUaGUgV2ViU29ja2V0Q29ubmVjdGlvbiBpbnN0YW5jZS5cbiAgICB0aGlzLl9jb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gV2ViU29ja2V0Q2xpZW50IGluc3RhbmNlLlxuICAgIHRoaXMuX2NsaWVudCA9IG5ldyBXZWJTb2NrZXRDbGllbnQoY2xpZW50Q29uZmlnKTtcblxuICAgIHRoaXMuX2NsaWVudC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgb25Db25uZWN0LmNhbGwoc2VsZiwgY29ubmVjdGlvbik7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jbGllbnQub24oJ2Nvbm5lY3RGYWlsZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgb25Db25uZWN0RmFpbGVkLmNhbGwoc2VsZik7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jbGllbnQuY29ubmVjdCh1cmwsIHByb3RvY29scywgb3JpZ2luLCBoZWFkZXJzLCByZXF1ZXN0T3B0aW9ucyk7XG59XG5cblxuLy8gRXhwb3NlIFczQyByZWFkIG9ubHkgYXR0cmlidXRlcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFczQ1dlYlNvY2tldC5wcm90b3R5cGUsIHtcbiAgICB1cmw6ICAgICAgICAgICAgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fdXJsOyAgICAgICAgICAgIH0gfSxcbiAgICByZWFkeVN0YXRlOiAgICAgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fcmVhZHlTdGF0ZTsgICAgIH0gfSxcbiAgICBwcm90b2NvbDogICAgICAgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fcHJvdG9jb2w7ICAgICAgIH0gfSxcbiAgICBleHRlbnNpb25zOiAgICAgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fZXh0ZW5zaW9uczsgICAgIH0gfSxcbiAgICBidWZmZXJlZEFtb3VudDogeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fYnVmZmVyZWRBbW91bnQ7IH0gfVxufSk7XG5cblxuLy8gRXhwb3NlIFczQyB3cml0ZS9yZWFkIGF0dHJpYnV0ZXMuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhXM0NXZWJTb2NrZXQucHJvdG90eXBlLCB7XG4gICAgYmluYXJ5VHlwZToge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmFyeVR5cGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAgICAgLy8gVE9ETzogSnVzdCAnYXJyYXlidWZmZXInIHN1cHBvcnRlZC5cbiAgICAgICAgICAgIGlmICh0eXBlICE9PSAnYXJyYXlidWZmZXInKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdqdXN0IFwiYXJyYXlidWZmZXJcIiB0eXBlIGFsbG93ZWQgZm9yIFwiYmluYXJ5VHlwZVwiIGF0dHJpYnV0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYmluYXJ5VHlwZSA9IHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuXG4vLyBFeHBvc2UgVzNDIHJlYWR5U3RhdGUgY29uc3RhbnRzIGludG8gdGhlIFdlYlNvY2tldCBpbnN0YW5jZSBhcyBXM0Mgc3RhdGVzLlxuW1snQ09OTkVDVElORycsQ09OTkVDVElOR10sIFsnT1BFTicsT1BFTl0sIFsnQ0xPU0lORycsQ0xPU0lOR10sIFsnQ0xPU0VEJyxDTE9TRURdXS5mb3JFYWNoKGZ1bmN0aW9uKHByb3BlcnR5KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFczQ1dlYlNvY2tldC5wcm90b3R5cGUsIHByb3BlcnR5WzBdLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBwcm9wZXJ0eVsxXTsgfVxuICAgIH0pO1xufSk7XG5cbi8vIEFsc28gZXhwb3NlIFczQyByZWFkeVN0YXRlIGNvbnN0YW50cyBpbnRvIHRoZSBXZWJTb2NrZXQgY2xhc3MgKG5vdCBkZWZpbmVkIGJ5IHRoZSBXM0MsXG4vLyBidXQgdGhlcmUgYXJlIHNvIG1hbnkgbGlicyByZWx5aW5nIG9uIHRoZW0pLlxuW1snQ09OTkVDVElORycsQ09OTkVDVElOR10sIFsnT1BFTicsT1BFTl0sIFsnQ0xPU0lORycsQ0xPU0lOR10sIFsnQ0xPU0VEJyxDTE9TRURdXS5mb3JFYWNoKGZ1bmN0aW9uKHByb3BlcnR5KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFczQ1dlYlNvY2tldCwgcHJvcGVydHlbMF0sIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHByb3BlcnR5WzFdOyB9XG4gICAgfSk7XG59KTtcblxuXG5XM0NXZWJTb2NrZXQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKHRoaXMuX3JlYWR5U3RhdGUgIT09IE9QRU4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgY2FsbCBzZW5kKCkgd2hpbGUgbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIC8vIFRleHQuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyB8fCBkYXRhIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uc2VuZFVURihkYXRhKTtcbiAgICB9XG4gICAgLy8gQmluYXJ5LlxuICAgIGVsc2Uge1xuICAgICAgICAvLyBOb2RlIEJ1ZmZlci5cbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uc2VuZEJ5dGVzKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIEFycmF5QnVmZmVyIG9yIEFycmF5QnVmZmVyVmlldyBjb252ZXJ0IGl0IHRvIE5vZGUgQnVmZmVyLlxuICAgICAgICBlbHNlIGlmIChkYXRhLmJ5dGVMZW5ndGggfHwgZGF0YS5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkYXRhID0gdG9CdWZmZXIoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uLnNlbmRCeXRlcyhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBiaW5hcnkgZGF0YTonLCBkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblxuVzNDV2ViU29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuICAgIHN3aXRjaCh0aGlzLl9yZWFkeVN0YXRlKSB7XG4gICAgICAgIGNhc2UgQ09OTkVDVElORzpcbiAgICAgICAgICAgIC8vIE5PVEU6IFdlIGRvbid0IGhhdmUgdGhlIFdlYlNvY2tldENvbm5lY3Rpb24gaW5zdGFuY2UgeWV0IHNvIG5vXG4gICAgICAgICAgICAvLyB3YXkgdG8gY2xvc2UgdGhlIFRDUCBjb25uZWN0aW9uLlxuICAgICAgICAgICAgLy8gQXJ0aWZpY2lhbGx5IGludm9rZSB0aGUgb25Db25uZWN0RmFpbGVkIGV2ZW50LlxuICAgICAgICAgICAgb25Db25uZWN0RmFpbGVkLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAvLyBBbmQgY2xvc2UgaWYgaXQgY29ubmVjdHMgYWZ0ZXIgYSB3aGlsZS5cbiAgICAgICAgICAgIHRoaXMuX2NsaWVudC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNsb3NlKGNvZGUsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgT1BFTjpcbiAgICAgICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBDTE9TSU5HO1xuICAgICAgICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uLmNsb3NlKGNvZGUsIHJlYXNvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENMT1NJTkc6XG4gICAgICAgIGNhc2UgQ0xPU0VEOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufTtcblxuXG4vKipcbiAqIFByaXZhdGUgQVBJLlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlQ2xvc2VFdmVudChjb2RlLCByZWFzb24pIHtcbiAgICB2YXIgZXZlbnQgPSBuZXcgeWFldGkuRXZlbnQoJ2Nsb3NlJyk7XG5cbiAgICBldmVudC5jb2RlID0gY29kZTtcbiAgICBldmVudC5yZWFzb24gPSByZWFzb247XG4gICAgZXZlbnQud2FzQ2xlYW4gPSAodHlwZW9mIGNvZGUgPT09ICd1bmRlZmluZWQnIHx8IGNvZGUgPT09IDEwMDApO1xuXG4gICAgcmV0dXJuIGV2ZW50O1xufVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VFdmVudChkYXRhKSB7XG4gICAgdmFyIGV2ZW50ID0gbmV3IHlhZXRpLkV2ZW50KCdtZXNzYWdlJyk7XG5cbiAgICBldmVudC5kYXRhID0gZGF0YTtcblxuICAgIHJldHVybiBldmVudDtcbn1cblxuXG5mdW5jdGlvbiBvbkNvbm5lY3QoY29ubmVjdGlvbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBPUEVOO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgIHRoaXMuX3Byb3RvY29sID0gY29ubmVjdGlvbi5wcm90b2NvbDtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gY29ubmVjdGlvbi5leHRlbnNpb25zO1xuXG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbignY2xvc2UnLCBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcbiAgICAgICAgb25DbG9zZS5jYWxsKHNlbGYsIGNvZGUsIHJlYXNvbik7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgIG9uTWVzc2FnZS5jYWxsKHNlbGYsIG1zZyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IHlhZXRpLkV2ZW50KCdvcGVuJykpO1xufVxuXG5cbmZ1bmN0aW9uIG9uQ29ubmVjdEZhaWxlZCgpIHtcbiAgICBkZXN0cm95LmNhbGwodGhpcyk7XG4gICAgdGhpcy5fcmVhZHlTdGF0ZSA9IENMT1NFRDtcblxuICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgeWFldGkuRXZlbnQoJ2Vycm9yJykpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChjcmVhdGVDbG9zZUV2ZW50KDEwMDYsICdjb25uZWN0aW9uIGZhaWxlZCcpKTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gb25DbG9zZShjb2RlLCByZWFzb24pIHtcbiAgICBkZXN0cm95LmNhbGwodGhpcyk7XG4gICAgdGhpcy5fcmVhZHlTdGF0ZSA9IENMT1NFRDtcblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChjcmVhdGVDbG9zZUV2ZW50KGNvZGUsIHJlYXNvbiB8fCAnJykpO1xufVxuXG5cbmZ1bmN0aW9uIG9uTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UudXRmOERhdGEpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNyZWF0ZU1lc3NhZ2VFdmVudChtZXNzYWdlLnV0ZjhEYXRhKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1lc3NhZ2UuYmluYXJ5RGF0YSkge1xuICAgICAgICAvLyBNdXN0IGNvbnZlcnQgZnJvbSBOb2RlIEJ1ZmZlciB0byBBcnJheUJ1ZmZlci5cbiAgICAgICAgLy8gVE9ETzogb3IgdG8gYSBCbG9iICh3aGljaCBkb2VzIG5vdCBleGlzdCBpbiBOb2RlISkuXG4gICAgICAgIGlmICh0aGlzLmJpbmFyeVR5cGUgPT09ICdhcnJheWJ1ZmZlcicpIHtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBtZXNzYWdlLmJpbmFyeURhdGE7XG4gICAgICAgICAgICB2YXIgYXJyYXlidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtcbiAgICAgICAgICAgIGZvciAodmFyIGk9MCwgbGVuPWJ1ZmZlci5sZW5ndGg7IGk8bGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2aWV3W2ldID0gYnVmZmVyW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNyZWF0ZU1lc3NhZ2VFdmVudChhcnJheWJ1ZmZlcikpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fY2xpZW50LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIGlmICh0aGlzLl9jb25uZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24ucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBDb252ZXJ0IGEgdHlwZWQgYXJyYXkgdG8gYSBCdWZmZXIgd2l0aG91dCBhIGNvcHlcbiAqXG4gKiBBdXRob3I6ICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuICogTGljZW5zZTogIE1JVFxuICpcbiAqIGBucG0gaW5zdGFsbCB0eXBlZGFycmF5LXRvLWJ1ZmZlcmBcbiAqL1xuXG52YXIgaXNUeXBlZEFycmF5ID0gcmVxdWlyZSgnaXMtdHlwZWRhcnJheScpLnN0cmljdFxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHR5cGVkYXJyYXlUb0J1ZmZlciAoYXJyKSB7XG4gIGlmIChpc1R5cGVkQXJyYXkoYXJyKSkge1xuICAgIC8vIFRvIGF2b2lkIGEgY29weSwgdXNlIHRoZSB0eXBlZCBhcnJheSdzIHVuZGVybHlpbmcgQXJyYXlCdWZmZXIgdG8gYmFjayBuZXcgQnVmZmVyXG4gICAgdmFyIGJ1ZiA9IEJ1ZmZlci5mcm9tKGFyci5idWZmZXIpXG4gICAgaWYgKGFyci5ieXRlTGVuZ3RoICE9PSBhcnIuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgIC8vIFJlc3BlY3QgdGhlIFwidmlld1wiLCBpLmUuIGJ5dGVPZmZzZXQgYW5kIGJ5dGVMZW5ndGgsIHdpdGhvdXQgZG9pbmcgYSBjb3B5XG4gICAgICBidWYgPSBidWYuc2xpY2UoYXJyLmJ5dGVPZmZzZXQsIGFyci5ieXRlT2Zmc2V0ICsgYXJyLmJ5dGVMZW5ndGgpXG4gICAgfVxuICAgIHJldHVybiBidWZcbiAgfSBlbHNlIHtcbiAgICAvLyBQYXNzIHRocm91Z2ggYWxsIG90aGVyIHR5cGVzIHRvIGBCdWZmZXIuZnJvbWBcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oYXJyKVxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyAgICAgID0gaXNUeXBlZEFycmF5XG5pc1R5cGVkQXJyYXkuc3RyaWN0ID0gaXNTdHJpY3RUeXBlZEFycmF5XG5pc1R5cGVkQXJyYXkubG9vc2UgID0gaXNMb29zZVR5cGVkQXJyYXlcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xudmFyIG5hbWVzID0ge1xuICAgICdbb2JqZWN0IEludDhBcnJheV0nOiB0cnVlXG4gICwgJ1tvYmplY3QgSW50MTZBcnJheV0nOiB0cnVlXG4gICwgJ1tvYmplY3QgSW50MzJBcnJheV0nOiB0cnVlXG4gICwgJ1tvYmplY3QgVWludDhBcnJheV0nOiB0cnVlXG4gICwgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJzogdHJ1ZVxuICAsICdbb2JqZWN0IFVpbnQxNkFycmF5XSc6IHRydWVcbiAgLCAnW29iamVjdCBVaW50MzJBcnJheV0nOiB0cnVlXG4gICwgJ1tvYmplY3QgRmxvYXQzMkFycmF5XSc6IHRydWVcbiAgLCAnW29iamVjdCBGbG9hdDY0QXJyYXldJzogdHJ1ZVxufVxuXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkoYXJyKSB7XG4gIHJldHVybiAoXG4gICAgICAgaXNTdHJpY3RUeXBlZEFycmF5KGFycilcbiAgICB8fCBpc0xvb3NlVHlwZWRBcnJheShhcnIpXG4gIClcbn1cblxuZnVuY3Rpb24gaXNTdHJpY3RUeXBlZEFycmF5KGFycikge1xuICByZXR1cm4gKFxuICAgICAgIGFyciBpbnN0YW5jZW9mIEludDhBcnJheVxuICAgIHx8IGFyciBpbnN0YW5jZW9mIEludDE2QXJyYXlcbiAgICB8fCBhcnIgaW5zdGFuY2VvZiBJbnQzMkFycmF5XG4gICAgfHwgYXJyIGluc3RhbmNlb2YgVWludDhBcnJheVxuICAgIHx8IGFyciBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5XG4gICAgfHwgYXJyIGluc3RhbmNlb2YgVWludDE2QXJyYXlcbiAgICB8fCBhcnIgaW5zdGFuY2VvZiBVaW50MzJBcnJheVxuICAgIHx8IGFyciBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheVxuICAgIHx8IGFyciBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheVxuICApXG59XG5cbmZ1bmN0aW9uIGlzTG9vc2VUeXBlZEFycmF5KGFycikge1xuICByZXR1cm4gbmFtZXNbdG9TdHJpbmcuY2FsbChhcnIpXVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdEV2ZW50VGFyZ2V0IDogcmVxdWlyZSgnLi9saWIvRXZlbnRUYXJnZXQnKSxcblx0RXZlbnQgICAgICAgOiByZXF1aXJlKCcuL2xpYi9FdmVudCcpXG59O1xuIiwiLyoqXG4gKiBFeHBvc2UgdGhlIF9FdmVudFRhcmdldCBjbGFzcy5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBfRXZlbnRUYXJnZXQ7XG5cbmZ1bmN0aW9uIF9FdmVudFRhcmdldCgpIHtcblx0Ly8gRG8gbm90aGluZyBpZiBjYWxsZWQgZm9yIGEgbmF0aXZlIEV2ZW50VGFyZ2V0IG9iamVjdC4uXG5cdGlmICh0eXBlb2YgdGhpcy5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0dGhpcy5fbGlzdGVuZXJzID0ge307XG5cblx0dGhpcy5hZGRFdmVudExpc3RlbmVyID0gX2FkZEV2ZW50TGlzdGVuZXI7XG5cdHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IF9yZW1vdmVFdmVudExpc3RlbmVyO1xuXHR0aGlzLmRpc3BhdGNoRXZlbnQgPSBfZGlzcGF0Y2hFdmVudDtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoX0V2ZW50VGFyZ2V0LnByb3RvdHlwZSwge1xuXHRsaXN0ZW5lcnM6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLl9saXN0ZW5lcnM7XG5cdFx0fVxuXHR9XG59KTtcblxuZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXIodHlwZSwgbmV3TGlzdGVuZXIpIHtcblx0dmFyXG5cdFx0bGlzdGVuZXJzVHlwZSxcblx0XHRpLCBsaXN0ZW5lcjtcblxuXHRpZiAoIXR5cGUgfHwgIW5ld0xpc3RlbmVyKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0bGlzdGVuZXJzVHlwZSA9IHRoaXMuX2xpc3RlbmVyc1t0eXBlXTtcblx0aWYgKGxpc3RlbmVyc1R5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRoaXMuX2xpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyc1R5cGUgPSBbXTtcblx0fVxuXG5cdGZvciAoaSA9IDA7ICEhKGxpc3RlbmVyID0gbGlzdGVuZXJzVHlwZVtpXSk7IGkrKykge1xuXHRcdGlmIChsaXN0ZW5lciA9PT0gbmV3TGlzdGVuZXIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRsaXN0ZW5lcnNUeXBlLnB1c2gobmV3TGlzdGVuZXIpO1xufVxuXG5mdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbGRMaXN0ZW5lcikge1xuXHR2YXJcblx0XHRsaXN0ZW5lcnNUeXBlLFxuXHRcdGksIGxpc3RlbmVyO1xuXG5cdGlmICghdHlwZSB8fCAhb2xkTGlzdGVuZXIpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRsaXN0ZW5lcnNUeXBlID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdO1xuXHRpZiAobGlzdGVuZXJzVHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Zm9yIChpID0gMDsgISEobGlzdGVuZXIgPSBsaXN0ZW5lcnNUeXBlW2ldKTsgaSsrKSB7XG5cdFx0aWYgKGxpc3RlbmVyID09PSBvbGRMaXN0ZW5lcikge1xuXHRcdFx0bGlzdGVuZXJzVHlwZS5zcGxpY2UoaSwgMSk7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHRpZiAobGlzdGVuZXJzVHlwZS5sZW5ndGggPT09IDApIHtcblx0XHRkZWxldGUgdGhpcy5fbGlzdGVuZXJzW3R5cGVdO1xuXHR9XG59XG5cbmZ1bmN0aW9uIF9kaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG5cdHZhclxuXHRcdHR5cGUsXG5cdFx0bGlzdGVuZXJzVHlwZSxcblx0XHRkdW1teUxpc3RlbmVyLFxuXHRcdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9IGZhbHNlLFxuXHRcdGksIGxpc3RlbmVyO1xuXG5cdGlmICghZXZlbnQgfHwgdHlwZW9mIGV2ZW50LnR5cGUgIT09ICdzdHJpbmcnKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdgZXZlbnRgIG11c3QgaGF2ZSBhIHZhbGlkIGB0eXBlYCBwcm9wZXJ0eScpO1xuXHR9XG5cblx0Ly8gRG8gc29tZSBzdHVmZiB0byBlbXVsYXRlIERPTSBFdmVudCBiZWhhdmlvciAoanVzdCBpZiB0aGlzIGlzIG5vdCBhXG5cdC8vIERPTSBFdmVudCBvYmplY3QpXG5cdGlmIChldmVudC5feWFldGkpIHtcblx0XHRldmVudC50YXJnZXQgPSB0aGlzO1xuXHRcdGV2ZW50LmNhbmNlbGFibGUgPSB0cnVlO1xuXHR9XG5cblx0Ly8gQXR0ZW1wdCB0byBvdmVycmlkZSB0aGUgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkgbWV0aG9kXG5cdHRyeSB7XG5cdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0c3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gdHJ1ZTtcblx0XHR9O1xuXHR9IGNhdGNoIChlcnJvcikge31cblxuXHR0eXBlID0gZXZlbnQudHlwZTtcblx0bGlzdGVuZXJzVHlwZSA9ICh0aGlzLl9saXN0ZW5lcnNbdHlwZV0gfHwgW10pO1xuXG5cdGR1bW15TGlzdGVuZXIgPSB0aGlzWydvbicgKyB0eXBlXTtcblx0aWYgKHR5cGVvZiBkdW1teUxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0ZHVtbXlMaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50KTtcblx0fVxuXG5cdGZvciAoaSA9IDA7ICEhKGxpc3RlbmVyID0gbGlzdGVuZXJzVHlwZVtpXSk7IGkrKykge1xuXHRcdGlmIChzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuXHR9XG5cblx0cmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xufVxuIiwiLyoqXG4gKiBFeHBvc2UgdGhlIEV2ZW50IGNsYXNzLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IF9FdmVudDtcblxuXG5mdW5jdGlvbiBfRXZlbnQodHlwZSkge1xuXHR0aGlzLnR5cGUgPSB0eXBlO1xuXHR0aGlzLmlzVHJ1c3RlZCA9IGZhbHNlO1xuXG5cdC8vIFNldCBhIGZsYWcgaW5kaWNhdGluZyB0aGlzIGlzIG5vdCBhIERPTSBFdmVudCBvYmplY3Rcblx0dGhpcy5feWFldGkgPSB0cnVlO1xufVxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogIENvcHlyaWdodCAyMDEwLTIwMTUgQnJpYW4gTWNLZWx2ZXkuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG52YXIgRGVwcmVjYXRpb24gPSB7XG4gICAgZGlzYWJsZVdhcm5pbmdzOiBmYWxzZSxcblxuICAgIGRlcHJlY2F0aW9uV2FybmluZ01hcDoge1xuXG4gICAgfSxcblxuICAgIHdhcm46IGZ1bmN0aW9uKGRlcHJlY2F0aW9uTmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZVdhcm5pbmdzICYmIHRoaXMuZGVwcmVjYXRpb25XYXJuaW5nTWFwW2RlcHJlY2F0aW9uTmFtZV0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignREVQUkVDQVRJT04gV0FSTklORzogJyArIHRoaXMuZGVwcmVjYXRpb25XYXJuaW5nTWFwW2RlcHJlY2F0aW9uTmFtZV0pO1xuICAgICAgICAgICAgdGhpcy5kZXByZWNhdGlvbldhcm5pbmdNYXBbZGVwcmVjYXRpb25OYW1lXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZXByZWNhdGlvbjtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbjtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xudmFyIGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYGFkZFNodXRkb3duYC5cbiAqL1xuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gYWRkU2h1dGRvd247XG5cbi8qKlxuICogQWRkcyBzaHV0ZG93biBmdW5jdGlvbmFpbGl0eSB0byB0aGUgYGh0dHAuU2VydmVyYCBvYmplY3RcbiAqIEBwYXJhbSB7aHR0cC5TZXJ2ZXJ9IHNlcnZlciBUaGUgc2VydmVyIHRvIGFkZCBzaHV0ZG93biBmdW5jdGlvbmFpbGl0eSB0b1xuICovXG5mdW5jdGlvbiBhZGRTaHV0ZG93bihzZXJ2ZXIpIHtcbiAgdmFyIGNvbm5lY3Rpb25zID0ge307XG4gIHZhciBpc1NodXR0aW5nRG93biA9IGZhbHNlO1xuICB2YXIgY29ubmVjdGlvbkNvdW50ZXIgPSAwO1xuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koc29ja2V0LCBmb3JjZSkge1xuICAgIGlmIChmb3JjZSB8fCAoc29ja2V0Ll9pc0lkbGUgJiYgaXNTaHV0dGluZ0Rvd24pKSB7XG4gICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgZGVsZXRlIGNvbm5lY3Rpb25zW3NvY2tldC5fY29ubmVjdGlvbklkXTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gb25Db25uZWN0aW9uKHNvY2tldCkge1xuICAgIHZhciBpZCA9IGNvbm5lY3Rpb25Db3VudGVyKys7XG4gICAgc29ja2V0Ll9pc0lkbGUgPSB0cnVlO1xuICAgIHNvY2tldC5fY29ubmVjdGlvbklkID0gaWQ7XG4gICAgY29ubmVjdGlvbnNbaWRdID0gc29ja2V0O1xuXG4gICAgc29ja2V0Lm9uKCdjbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgICAgZGVsZXRlIGNvbm5lY3Rpb25zW2lkXTtcbiAgICB9KTtcbiAgfTtcblxuICBzZXJ2ZXIub24oJ3JlcXVlc3QnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIHJlcS5zb2NrZXQuX2lzSWRsZSA9IGZhbHNlO1xuXG4gICAgcmVzLm9uKCdmaW5pc2gnLCBmdW5jdGlvbigpIHtcbiAgICAgIHJlcS5zb2NrZXQuX2lzSWRsZSA9IHRydWU7XG4gICAgICBkZXN0cm95KHJlcS5zb2NrZXQpO1xuICAgIH0pO1xuICB9KTtcblxuICBzZXJ2ZXIub24oJ2Nvbm5lY3Rpb24nLCBvbkNvbm5lY3Rpb24pO1xuICBzZXJ2ZXIub24oJ3NlY3VyZUNvbm5lY3Rpb24nLCBvbkNvbm5lY3Rpb24pO1xuXG4gIGZ1bmN0aW9uIHNodXRkb3duKGZvcmNlLCBjYikge1xuICAgIGlzU2h1dHRpbmdEb3duID0gdHJ1ZTtcbiAgICBzZXJ2ZXIuY2xvc2UoZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHsgY2IoZXJyKSB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5rZXlzKGNvbm5lY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgZGVzdHJveShjb25uZWN0aW9uc1trZXldLCBmb3JjZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgc2VydmVyLnNodXRkb3duID0gZnVuY3Rpb24oY2IpIHtcbiAgICBzaHV0ZG93bihmYWxzZSwgY2IpO1xuICB9O1xuXG4gIHNlcnZlci5mb3JjZVNodXRkb3duID0gZnVuY3Rpb24oY2IpIHtcbiAgICBzaHV0ZG93bih0cnVlLCBjYik7XG4gIH07XG5cbiAgcmV0dXJuIHNlcnZlcjtcbn07XG5cbi8qKlxuICogRXh0ZW5kcyB0aGUge2h0dHAuU2VydmVyfSBvYmplY3Qgd2l0aCBzaHV0ZG93biBmdW5jdGlvbmFpbGl0eS5cbiAqIEByZXR1cm4ge2h0dHAuU2VydmVyfSBUaGUgZGVjb3JhdGVkIHNlcnZlciBvYmplY3RcbiAqL1xuZXhwb3J0cy5leHRlbmQgPSBmdW5jdGlvbigpIHtcbiAgaHR0cC5TZXJ2ZXIucHJvdG90eXBlLndpdGhTaHV0ZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBhZGRTaHV0ZG93bih0aGlzKTtcbiAgfTtcblxuICBodHRwcy5TZXJ2ZXIucHJvdG90eXBlLndpdGhTaHV0ZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBhZGRTaHV0ZG93bih0aGlzKTtcbiAgfTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9